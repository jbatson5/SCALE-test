

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sampler: A Module for Statistical Uncertainty Analysis with Scale Sequences &mdash; SCALE Manual 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Criticality Safety Overview" href="Criticality%20Safety%20Overview.html" />
    <link rel="prev" title="TSURFER Appendix A: Sensitivity/Uncertainty Notation" href="tsurfer-appA.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> SCALE Manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Reactor Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TRITON.html">TRITON: A Multipurpose Transport, Depletion, And Sensitivity and Uncertainty Analysis Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRITONAppABC.html">TRITON Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="Polaris.html">POLARIS - 2D Light Water Reactor Lattice Physics Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="PolarisA.html">SCALE 6.2 Polaris Input Format</a></li>
</ul>
<p class="caption"><span class="caption-text">Depletion, Activation, and Spent Fuel Source Terms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Depletion%2C%20Activation%2C%20and%20Spent%20Fuel%20Source%20Terms%20Overview.html">Depletion, Activation, and Spent Fuel Source Terms Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN.html">Origen: Neutron Activation, Actinide Transmutation, Fission Product Generation, and Radiation Source Term Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html">Origen Data Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#energy-resource">Energy Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#decay-resource-format">Decay Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#fission-yield-resource-format">Fission Yield Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#gamma-resource-format">Gamma Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#origen-end7dec-nuclide-set">ORIGEN “end7dec” Nuclide Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGAMI.html">ORIGAMI: A Code for Computing Assembly Isotopics with ORIGEN</a></li>
<li class="toctree-l1"><a class="reference internal" href="SLIG.html">SCALE/Origen Library Generator (SLIG)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Origenutil.html">ORIGEN Utility Programs</a></li>
</ul>
<p class="caption"><span class="caption-text">Sensitivity and Uncertainty Analysis</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Sensitivity%20and%20Uncertainty%20Analysis%20Overview.html">Snesitivity and Uncertainty Analysis Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-1d.html">TSUNAMI-1D:  Control Module for One-Dimensional Cross-Section Sensitivity and Uncertainty</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-1d-appA.html">XSDRNPM Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-3d.html">TSUNAMI-3D: Control Module for Three-Dimensional Cross Section Sensitivity and Uncertainty Analysis for Criticality</a></li>
<li class="toctree-l1"><a class="reference internal" href="sams.html">SAMS: Sensitivity Analysis Module for Scale</a></li>
<li class="toctree-l1"><a class="reference internal" href="sams-appA.html">Sensitivity Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsar.html">TSAR: Tool for Sensitivity Analysis of Reactivity Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-ip.html">TSUNAMI Utility Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-ip-appAB.html">Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsurfer.html">TSURFER: An Adjustment Code to Determine Biases and Uncertainties in Nuclear System Responses by Consolidating Differential Data and Benchmark Integral Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsurfer-appA.html">TSURFER Appendix A: Sensitivity/Uncertainty Notation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Sampler: A Module for Statistical Uncertainty Analysis with Scale Sequences</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uncertainty-analysis-with-stochastic-versus-perturbation-methods">Uncertainty analysis with stochastic versus perturbation methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#methodology">Methodology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#definition-of-input-data-perturbations">Definition of input data perturbations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nuclear-data-perturbations-for-multigroup-calculations">Nuclear data perturbations for multigroup calculations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#depletion-data-perturbations">Depletion data perturbations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#model-data-perturbations">Model data perturbations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#general-workflow">General workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-management">File management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-execution">Parallel execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#behavior-when-encountering-errors">Behavior when encountering errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#input-description">Input Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overall-input-structure">Overall input structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cases-and-sequences">Cases and sequences</a></li>
<li class="toctree-l4"><a class="reference internal" href="#importing-input-data-from-external-files">Importing input data from external files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-parameters">Configuration parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sampler-responses">Sampler responses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general-response-block-format">General response block format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#opus-plt-file-responses">OPUS PLT file responses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#triton-homogenized-cross-section-responses">TRITON homogenized cross-section responses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#standard-composition-file-responses">Standard composition file responses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#origen-concentration-f71-responses">ORIGEN concentration (F71) responses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generic-regular-expression-grep-responses">Generic regular expression (GREP) responses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sampled-variable-values">Sampled variable values</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quick-response-definition-overview">Quick response definition overview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#saving-files">Saving files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parametric-studies">Parametric studies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geometry-and-material-perturbations">Geometry and material perturbations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#variable-definition">Variable definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="#distribution-types">Distribution types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependent-variables-expressions">Dependent variables (expressions)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-placeholders">Using placeholders</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-siren-expressions">Using SIREN expressions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#converting-a-standard-scale-input-deck-to-a-sampler-input-deck">Converting a standard SCALE input deck to a Sampler input deck</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-problems-and-output-description">Example Problems and Output Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#output-description">Output description</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#main-text-output">Main text output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#csv-tables">CSV tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sampling-histograms-and-running-averages">Sampling histograms and running averages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#response-histories">Response histories</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sample-problems">Sample problems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sample-problem-1">Sample problem 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-problem-2">Sample problem 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-problem-3">Sample problem 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-problem-5">Sample problem 5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-problem-6">Sample problem 6</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-problem-7">Sample problem 7</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#appendix-a-scale-input-retrieval-engine-siren">APPENDIX A – SCALE Input Retrieval ENgine (SIREN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#appendix-b-expression-operators-and-functions-for-sampler">APPENDIX B – Expression Operators and Functions for Sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#appendix-c-guidelines-for-running-sampler-in-parallel">APPENDIX C – Guidelines for Running Sampler in Parallel</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Criticality Safety</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Criticality%20Safety%20Overview.html">Criticality Safety Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS5.html">CSAS5:  Control Module For Enhanced Criticality Safety Analysis Sequences With KENO V.a</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS5App.html">Additional Example Applications of CSAS5</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS6.html">CSAS6:  Control Module for Enhanced Criticality Safety Analysis with KENO-VI</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS6App.html">Additional Example Applications of CSAS6</a></li>
<li class="toctree-l1"><a class="reference internal" href="STARBUCS.html">STARBUCS: A Scale Control Module for Automated Criticality Safety Analyses Using Burnup Credit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sourcerer.html">Sourcerer: Deterministic Starting Source for Criticality Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEVC.html">DEVC: Denovo EigenValue Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="KMART.html">KMART5 and KMART6: Postprocessors for KENO V.A and KENO-VI</a></li>
<li class="toctree-l1"><a class="reference internal" href="K5C5.html">K5toK6 and C5toC6: Input File Conversion Programs for KENO and CSAS</a></li>
</ul>
<p class="caption"><span class="caption-text">Material Specification and Cross Section Processing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Material%20Specification%20and%20Cross%20Section%20Processing%20Overview.html">Material Specification and Cross Section Processing Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProc.html">XSPROC: The Material and Cross Section Processing Module for SCALE</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppA.html">XSProc: Standard Composition Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppB.html">XSProc Standard Composition Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppC.html">Examples of Complete XSProc Input Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdcmp.html">Standard Composition Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="BONAMI.html">BONAMI: Resonance Self-Shielding by the Bondarenko Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="CENTRM.html">CENTRM: A Neutron Transport Code for Computing Continuous-Energy Spectra in General One-Dimensional Geometries and Two-Dimensional Lattice Cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="PMC.html">PMC: A Program to Produce Multigroup Cross Sections Using Pointwise Energy Spectra from CENTRM</a></li>
<li class="toctree-l1"><a class="reference internal" href="PMCAppAB.html">PMC Appendices A and B</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHOPS.html">CHOPS: Module to Compute Pointwise Disadvantage Factors and Produce a Cell-Homogenized CENTRM Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="CRAWDAD.html">CRAWDAD: Module to Produce CENTRM-Formatted Continuous-Energy Nuclear Data Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="MCDancoff.html">MCDancoff Data Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="CAJUN.html">CAJUN: Module for Combining and Manipulating CENTRM Continuous-Energy Libraries</a></li>
</ul>
<p class="caption"><span class="caption-text">Monte Carlo Transport</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Monte%20Carlo%20Transport%20Overview.html">Monte Carlo Transport Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoA.html">Keno Appendix A: KENO V.a Shape Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoB.html">Keno Appendix B: KENO VI Shape Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoC.html">Keno Appendix C: Sample problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Monaco.html">Monaco: A Fixed-Source Monte Carlo Transport Code for Shielding Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Radiation Shielding</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MAVRIC.html">MAVRIC: Monaco with Automated Variance Reduction using Importance Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="CAAScapability.html">MAVRIC Appendix A: CAAS Capability</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendixb.html">MAVRIC Appendix B: MAVRIC Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendixc.html">MAVRIC Appendix C: Advanced Features</a></li>
</ul>
<p class="caption"><span class="caption-text">Deterministic Transport</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Deterministic%20Transport%20Intro.html">Deterministic Transport Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSD.html">XSDRNPM: A One-Dimensional Discrete-Ordinates Code for Transport Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSDAppAB.html">XSDRNPM Appendices A and B</a></li>
<li class="toctree-l1"><a class="reference internal" href="NEWT.html">NEWT:  A New Transport Algorithm for Two-Dimensional Discrete-Ordinates Analysis in Non-Orthogonal Geometries</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SCALE Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Sampler: A Module for Statistical Uncertainty Analysis with Scale Sequences</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/sampler.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sampler-a-module-for-statistical-uncertainty-analysis-with-scale-sequences">
<span id="id1"></span><h1>Sampler: A Module for Statistical Uncertainty Analysis with Scale Sequences<a class="headerlink" href="#sampler-a-module-for-statistical-uncertainty-analysis-with-scale-sequences" title="Permalink to this headline">¶</a></h1>
<p>W. A. Wieselquist, M. L. Williams, F. Havlůj <a href="#id92"><span class="problematic" id="id2">[1]_</span></a>, R. A. Lefebvre, W.
Zwermann <a href="#id93"><span class="problematic" id="id3">[2]_</span></a>, M. Klein <a href="#id94"><span class="problematic" id="id4">[2]_</span></a>, D. Wiarda, M. T. Pigni, I. C. Gauld,
M. A. Jessee, J. P. Lefebvre, K. J. Dugan <a href="#id95"><span class="problematic" id="id5">[3]_</span></a>, and B. T. Rearden</p>
<p>ABSTRACT</p>
<p>Sampler is a “super-sequence” that performs general uncertainty analysis
for SCALE sequences by statistically sampling the input data and
analyzing the output distributions for specified responses. Among the
input parameters that can be sampled are multigroup nuclear data,
resonance self-shielding data (shielding factors and CENTRM pointwise
cross sections), depletion data such as fission product yields and decay
data, and model parameters such as nuclide concentrations, temperatures,
and simple dimension specifications. Random perturbation factors for
nuclear cross sections and depletion data are pre-computed with the
XSUSA module Medusa by sampling covariance information and are stored in
libraries read during the Sampler execution, while model parameters are
sampled “on the fly”. A wide variety of output response types for
virtually all SCALE sequences can be specified for the uncertainty
analysis, and correlations in uncertain parameters between multiple
systems are also generated.</p>
<p>ACKNOWLEDGMENTS</p>
<p>Contributions from the Gesellschaft für Anlagen- und Reaktorsicherheit
(GRS) in Germany are gratefully acknowledged. The development of the SCALE
Sampler module is based on GRS’s suggestion that their XSUSA code could be used
in conjunction with SCALE for stochastic uncertainty calculations. The original
Sampler sequence was developed based on the XSUSA sampling sequence as well as
collaboration and knowledge exchange with GRS staff members. The GRS module
Medusa is used to generate perturbations of the MG cross sections, fission
yields, and decay data.</p>
<p>The U.S. Nuclear Regulatory Commission Office of Nuclear Regulatory Research,
the U.S. DOE Nuclear Fuel Storage and Transportation Planning Project, and the
U.S. DOE Nuclear Criticality Safety Program supported the development of
Sampler.</p>
<div class="section" id="introduction">
<span id="id6"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The SCALE nuclear analysis code system provides a unified set of
computational tools and data libraries to address a wide range of
applications, including criticality safety, reactor physics, spent fuel
characterization, burnup credit, national security, and neutron/photon
radiation shielding. <a href="#id96"><span class="problematic" id="id7">[4]_</span></a> In addition to determining the problem
solutions, SCALE also provides tools to compute uncertainties in the
results, arising from uncertainties in the data used for the
calculations. Due to the diverse types of computational methods in
SCALE, robust sensitivity/uncertainty (S/U) methods are necessary.
Sampler implements stochastic sampling of uncertain parameters that can
be applied to any type of SCALE calculation, propagating uncertainties
throughout a computational sequence. Sampler treats uncertainties from
two sources: 1) nuclear data and 2) input parameters. Sampler generates
the uncertainty in any result generated by the computational sequence
through stochastic means by repeating numerous passes through the
computational sequence, each with a randomly perturbed sample of the
requested uncertain quantities. The mean value and uncertainty in each
parameter is reported along with the correlation in uncertain parameters
where multiple systems are simultaneously sampled with correlated
uncertainties.</p>
<p>Used in conjunction with nuclear data covariances available in SCALE,
Sampler is a general, overarching sequence for obtaining uncertainties
for many types of applications. SCALE includes covariances for
multigroup neutron cross-section data, as well as for fission product
yields and radioactive decay data, which allows uncertainty calculations
to be performed for most multigroup (MG) computational sequences in
SCALE. At the present time, nuclear data sampling cannot be applied to
SCALE continuous energy (CE) Monte Carlo calculations (i.e., CE-KENO and
CE-Monaco), although the fundamental approach is still valid.</p>
<p>Used in conjunction with uncertainties in input data, Sampler can
determine the uncertainties and correlations in computed results due to
uncertainties in dimensions, densities, distributions of material
compositions, temperatures, or many other quantities that are defined in
the user input for any SCALE computational sequence. This methodology
was especially developed to produce uncertainties and correlations in
criticality safety benchmark experiments, but it has a wide range of
applications in numerous scenarios in nuclear safety analysis and
design. The input sampling capabilities of Sampler also include a
parametric capability to determine the response of a system to a
systematic variation of an arbitrary number of input parameters.</p>
<div class="section" id="uncertainty-analysis-with-stochastic-versus-perturbation-methods">
<span id="id8"></span><h3>Uncertainty analysis with stochastic versus perturbation methods<a class="headerlink" href="#uncertainty-analysis-with-stochastic-versus-perturbation-methods" title="Permalink to this headline">¶</a></h3>
<p>Two quite different approaches may be used for uncertainty analysis. One
method uses first order perturbation theory expressions to compute
sensitivity coefficients for a given response. This requires performing
a forward transport calculation for the specified system and (sometimes)
adjoint calculations for each response of interest. After the forward
and adjoint transport solutions are obtained, sensitivity coefficients
for all nuclear cross sections and material concentrations can be
computed very efficiently with perturbation theory.<sup>1</sup> The
sensitivities may be folded with covariance matrices to obtain response
uncertainties due to nuclear data. The TSUNAMI modules and sequences in
SCALE use perturbation theory for S/U analysis in this manner (see
TSUNAMI-1D, TSUNAMI-2D, and TSUNAMI-3D).</p>
<p>For some types of applications, the adjoint-based perturbation
methodology is not adequate or is inefficient. These include:</p>
<blockquote>
<div><p>(a) Cases requiring codes with no adjoint functionality. SCALE has
capability for critical eigenvalue adjoint solutions and generalized
adjoint calculations using XSDRN, NEWT or KENO, but adjoint methods
are not currently available for coupled neutronics-depletion
calculations.</p>
<p>(b) Cases for which first order perturbation theory is not valid
(i.e., problems with significant second order effects).</p>
</div></blockquote>
<p>The Sampler module described in this section provides an alternative
method for uncertainty analysis based on stochastic sampling (Monte
Carlo) and does not require adjoint calculations. This approach samples
joint probability density functions (PDFs) – such as given in the SCALE
nuclear data covariance library– to produce a random sample for the
nuclear cross sections used a transport calculation. If PDFs are
available for other parameters such as depletion data or model
parameters, etc., then these too can be sampled and included in the
perturbed input vector. The perturbed data vector can be input to any
SCALE sequence or functional module to obtain a single forward solution
for all desired perturbed responses. The process is repeated for the
desired number of samples—typically a few hundred; and the output
distributions of results are analyzed to obtain standard deviations and
correlation coefficients for all responses. The stochastic sampling
method is not restricted to current SCALE modules; any new sequences or
codes can be used for the forward calculations, without having to
develop the capability for adjoint calculations.</p>
<p>Output distributions from the SCALE sampling also may be propagated to
downstream codes for follow-on uncertainty analysis. For example, input
for the TRITON lattice physics sequence can be sampled to produce a
random set of output assembly-averaged, two-group cross section
libraries. The two-group libraries can be input to a 3D core simulator
that performs steady-state or transient calculations, and statistical
analysis of the simulator output provides response uncertainties
(possibly time-dependent) due to the SCALE input data uncertainties.
Response uncertainties computed with this approach are not limited to
first order accuracy; i.e., they account for all non-linearities and
discontinuities with the same accuracy as the original codes.</p>
<p>Thus there are several advantages to the statistical sampling method
because it requires only forward calculations. The typical Sampler
computational procedure perturbs the entire input data vector
simultaneously, so that the total uncertainty in all responses, due to
all data uncertainties, is obtained. This standard approach does not
provide individual data sensitivity coefficients, unlike the
perturbation theory method. In this sense, the statistical sampling
method is complementary to the adjoint-based sensitivity method in the
TSUNAMI modules. Computation of sensitivities using only forward
calculations requires that each input parameter be varied individually,
rather than collectively; and this may require a large number of
simulations to obtain a full set of sensitivity coefficients.</p>
</div>
</div>
<div class="section" id="methodology">
<span id="id9"></span><h2>Methodology<a class="headerlink" href="#methodology" title="Permalink to this headline">¶</a></h2>
<p>The main components of a Sampler calculation are the procedures for
perturbing input data, obtaining the desired responses, and performing
statistical analysis of the output distributions.</p>
<div class="section" id="definition-of-input-data-perturbations">
<span id="id10"></span><h3>Definition of input data perturbations<a class="headerlink" href="#definition-of-input-data-perturbations" title="Permalink to this headline">¶</a></h3>
<p>The input data for a SCALE computation will generally be one of three
types:</p>
<p>(a) <em>Nuclear data for transport calculations</em>. This includes multigroup
(MG) and continuous energy (CE) cross sections, multiplicities,
secondary particle distributions, and data used for resonance
self-shielding of MG cross sections.</p>
<p>(b) <em>Nuclide transmutation data for depletion and burnup calculations</em>.
This includes fission product yield data, decay constants, branching
ratios to excited states, decay energies and distributions.</p>
<p>(c) <em>Modeling parameters for the system</em>. This includes information for
defining nuclide number densities (e.g., density, weight fractions,
enrichment, void fraction, etc.), temperature, and dimensions.</p>
<p>In principle Sampler can perform uncertainty analysis for all the above
types of input data if uncertainties and correlations are known. The
main restriction at this time is that CE cross sections for Monte Carlo
calculations are not sampled (although the continuous data used for
self-shielding <em>are</em> treated), so data perturbation applications are
limited to MG calculations. Perturbations to input number densities and
model dimensions are not impacted by this data limitation.</p>
<div class="section" id="nuclear-data-perturbations-for-multigroup-calculations">
<span id="id11"></span><h4>Nuclear data perturbations for multigroup calculations<a class="headerlink" href="#nuclear-data-perturbations-for-multigroup-calculations" title="Permalink to this headline">¶</a></h4>
<p>Input MG nuclear data for SCALE sequences are obtained from an AMPX
Master formatted library, which contains infinitely-dilute
one-dimensional (1D) cross sections, two-dimensional (2D) scattering
distributions, and Bondarenko self-shielding factors for various types
of reactions. Only the 1D data and Bondarenko factors are varied in
Sampler because no covariance data are available for the 2D scattering
distributions; however, the 2D data are renormalized to be consistent
the perturbed 1D scattering cross sections.</p>
<p>The Medusa module of the XSUSA program <a href="#id97"><span class="problematic" id="id12">[5]_</span></a> is used to generate
perturbation factors for the 1D cross sections on the MG library,
assuming that the probability density functions are multivariate normal
distributions with covariances given in the SCALE nuclear data
covariance library. The library covariance data are given as
infinitely-dilute, relative values; therefore a random sample for cross
section <span class="math notranslate nohighlight">\(\sigma_{\mathrm{x}, \mathrm{g}}\)</span> corresponds to
<span class="math notranslate nohighlight">\(\frac{\Delta \sigma_{\mathrm{x}, \mathrm{g}}}{\sigma_{\mathrm{x}, \mathrm{g}}}\)</span>,
where subscript x defines the nuclide/reaction
type and g is the group number. The relative variations are transformed
to multiplicative perturbation factors, defined by</p>
<div class="math notranslate nohighlight" id="equation-eq6-7-1">
<span class="eqno">(251)<a class="headerlink" href="#equation-eq6-7-1" title="Permalink to this equation">¶</a></span>\[\mathrm{Q}_{\mathrm{x}, \mathrm{g}}=1+\frac{\Delta \sigma_{\mathrm{x}, \mathrm{g}}}{\sigma_{\mathrm{x}, \mathrm{g}}}\]</div>
<p>that can be applied to the reference data to obtain the altered
infinitely-dilute values. A master sample file containing perturbation
factors for 1000 samples (see note below) of the infinitely-dilute 1D data has been
pre-computed and stored in the SCALE data directory. Each sample in the
file contains perturbation factors for all groups and reactions in all
materials. The master sample file is used for all cases, which avoids
having to perform the data sampling during SCALE execution.</p>
<p>Because the 1D data in the MG library are infinitely-dilute (i.e.,
problem-independent), SCALE sequences include modules that compute
resonance shielding corrections for the MG data. The self-shielding
calculations generally require two additional types of input data: (a)
Bondarenko self-shielding factors for the BONAMI module, which typically
performs self-shielding calculations outside of the resolved resonance
range; and (b) CE cross sections for the CENTRM/PMC modules, which
compute pointwise (PW) flux spectra and process self-shielded cross
sections for the resolved resonance range. Perturbations in the
Bondarenko factors and CE cross sections used in self-shielding
calculations must be consistent with perturbations made to the
infinitely dilute 1D cross sections since all these data are based on
the same fundamental ENDF/B information. It was shown in reference
[ <a href="#id98"><span class="problematic" id="id13">[7]_</span></a>] that consistent perturbations can be obtained by using the same
perturbation factors <span class="math notranslate nohighlight">\(Q_{x, g}\)</span> in following expressions:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The tradeoff of size on disk of the pre-calculated samples
distributed with SCALE versus the maximum number of perturbations required in
practice has led to the current maximum of 1000 samples. Based on limited
experience, correlation coefficients of near zero require the most samples to
converge and typically about 1000 samples has been sufficient.</p>
</div>
<ol class="loweralpha simple">
<li><p>infinitely-dilute MG cross sections <span class="math notranslate nohighlight">\(\sigma_{\mathrm{x}, \mathrm{g}}\)</span>:</p></li>
</ol>
<div class="math notranslate nohighlight" id="equation-eq6-7-2">
<span class="eqno">(252)<a class="headerlink" href="#equation-eq6-7-2" title="Permalink to this equation">¶</a></span>\[\sigma_{\mathrm{x}, \mathrm{g}}^{\prime}=\mathrm{Q}_{\mathrm{x}, \mathrm{g}} \sigma_{\mathrm{x}, \mathrm{g}}\]</div>
<p>(b) Bondarenko factors <span class="math notranslate nohighlight">\(\mathrm{f}\left(\sigma_{0}, \mathrm{~T}\right)\)</span>,
at background cross section <span class="math notranslate nohighlight">\(\sigma_{0}\)</span> and temperature T:</p>
<div class="math notranslate nohighlight" id="equation-eq6-7-3">
<span class="eqno">(253)<a class="headerlink" href="#equation-eq6-7-3" title="Permalink to this equation">¶</a></span>\[\mathrm{f}_{\mathrm{x}, \mathrm{g}}^{\prime}\left(\sigma_{0}, \mathrm{~T}\right)=\mathrm{f}_{\mathrm{x}, \mathrm{g}}\left(\sigma_{0}^{\prime}, \mathrm{T}\right) ; \quad \text { where } \sigma_{0}^{\prime}=\sigma_{0} / \mathrm{Q}_{\mathrm{x}, \mathrm{g}}\]</div>
<ol class="loweralpha simple" start="3">
<li><p>CE data <span class="math notranslate nohighlight">\(\sigma_{\mathrm{x}}(\mathrm{E})\)</span>:</p></li>
</ol>
<div class="math notranslate nohighlight" id="equation-eq6-7-4">
<span class="eqno">(254)<a class="headerlink" href="#equation-eq6-7-4" title="Permalink to this equation">¶</a></span>\[\sigma_{\mathrm{x}}^{\prime}(\mathrm{E})=\mathrm{Q}_{\mathrm{x}, \mathrm{g}} \sigma_{\mathrm{x}}(\mathrm{E}), \text { for } \mathrm{E} \in \mathrm{g}\]</div>
<p>In the above expressions, subscript x defines the nuclide/reaction type and g is the group number.</p>
<p>During Sampler execution the module ClarolPlus reads perturbation factors (<span class="math notranslate nohighlight">\(Q_{x, g}\)</span>)
for a specified sample number from the master sample file, and evaluates
Equations <a class="reference internal" href="#equation-eq6-7-2">(252)</a> and <a class="reference internal" href="#equation-eq6-7-3">(253)</a>. ClarolPlus also writes a file containing
perturbation factors only for the particular sample number used by the
CrawdadPlus module, as described below.</p>
</div>
<div class="section" id="depletion-data-perturbations">
<span id="id14"></span><h4>Depletion data perturbations<a class="headerlink" href="#depletion-data-perturbations" title="Permalink to this headline">¶</a></h4>
<p>Multiplicative perturbation factors for fission product yields have
been generated with XSUSA by sampling the covariances for the
independent yield uncertainties. The yield uncertainties are taken
from ENDF/B VII.1, which in general are given by fissionable nuclide and
for up to three energies: 0.025 eV, 0.5 MeV, and 14 MeV. The ENDF/B
yield uncertainties do not include correlations between fission
products, which may arise due to constraints such as (a) the sum of
all yields must always be two (i.e., the uncertainty in the yield sum
is zero), and (b) the uncertainties in independent yields should be
consistent with uncertainties given for cumulative yields. The
constraints generally introduce positive and negative correlations
into the yields covariance matrix. A method developed by Pigni <a href="#id99"><span class="problematic" id="id15">[8]_</span></a>
was used to determine the correlations in <sup>235</sup>U yields.
Correlations in yields from other fissionable nuclides are not
available in SCALE at this time.</p>
<p>During Sampler execution the perturbation factors are read for a given
data sample, compute a complete set of perturbed independent yields for
all fissionable nuclides and energies, and renormalize the yields to
ensure that they sum to two. An output file containing the perturbed
yield data is written to an external file in the format read by ORIGEN.
The perturbation factors are read once each time a sequence executed
(i.e., for each data sample).</p>
<p>A set of 1,000 decay data perturbations has also been generated with
XSUSA and stored in decay-only ORIGEN library files. Sampler
automatically aliases the appropriate sample to the file “end7dec”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order for decay data perturbations to be performed, the
“end7dec” decay library must be used <strong>directly</strong>. Typical TRITON and
Polaris calculations <strong>do not use “</strong>end7dec” directly, due to using
the unperturbed decay data embedded in a special ORIGEN reaction library
aliased to “transition.def” as the basis for all coupled
transport/depletion calculations. Experience has been that decay data
contributes very little additional uncertainty compared to yield data
and cross section data.</p>
</div>
</div>
<div class="section" id="model-data-perturbations">
<span id="id16"></span><h4>Model data perturbations<a class="headerlink" href="#model-data-perturbations" title="Permalink to this headline">¶</a></h4>
<p>An approach presented by Areva NP GmbH utilizes statistical sampling on
uncertain parameters to assess the uncertainty in individual system as
well as correlations between multiple systems. <a href="#id100"><span class="problematic" id="id17">[9]_</span></a> In this approach,
values for individual parameters in the input model are randomly
modified within the reported uncertainty and distribution function and a
series of perturbed values are obtained. Where sufficient samples are
made, the distribution of the perturbed values is used to determine the
uncertainty in the computed quantity due to uncertainties in the input
parameters. In cases where the same uncertain parameters influence
multiple experiments the simultaneous perturbation of the parameter for
multiple cases will provide the correlation in uncertainties between the
different configurations.</p>
<p>To obtain the uncertainty and correlation due to all uncertain
parameters, all parameters are randomly perturbed for each calculation
and the uncertainties and correlations are determined. Mathematically,
the uncertainty in an individual output parameter <em>k</em> is determined as
shown in Eq. <a class="reference internal" href="#equation-eq6-7-5">(255)</a>.</p>
<div class="math notranslate nohighlight" id="equation-eq6-7-5">
<span class="eqno">(255)<a class="headerlink" href="#equation-eq6-7-5" title="Permalink to this equation">¶</a></span>\[\Delta k^{\exp }(i)=\hat{\mu}_{i}=\sqrt{\frac{1}{n-1} \sum_{a=1}^{n}\left(\left(k_{c a l c}^{M C}(i)\right)_{a}-\overline{k_{\text {calc}}^{M C}(i)}\right)^{2}} ,\]</div>
<p>where <span class="math notranslate nohighlight">\(\Delta k^{\exp }(i)\)</span> is the uncertainty (in terms of standard deviation) in
system <em>i</em> due to uncertainties in the input parameters. <span class="math notranslate nohighlight">\(\left(k_{c a l c}^{M C}(i)\right)_{a}\)</span> is
the <em>a</em><sup>th</sup> Monte Carlo (MC) sample of system <em>i</em>, where all uncertain
input parameters have been randomly varied within the specified
distribution.</p>
<p>The covariance between two systems, <em>i</em> and <em>j</em>, is determined as shown
in Eq. <a class="reference internal" href="#equation-eq6-7-6">(256)</a>.</p>
<div class="math notranslate nohighlight" id="equation-eq6-7-6">
<span class="eqno">(256)<a class="headerlink" href="#equation-eq6-7-6" title="Permalink to this equation">¶</a></span>\[\hat{\Sigma}_{i j}=\sqrt{\frac{1}{n-1} \sum_{a=1}^{n}\left(\left(k_{\text {calc}}^{M C}(i)\right)_{a}-\overline{k_{\text {calc}}^{M C}(i)}\right)\left(\left(k_{\text {calc}}^{M C}(j)\right)_{a}-\overline{k_{\text {calc}}^{M C}(j)}\right)} .\]</div>
<p>The correlation coefficient between systems i and j can be determined from Eqs.
<a class="reference internal" href="#equation-eq6-7-5">(255)</a> and <a class="reference internal" href="#equation-eq6-7-6">(256)</a> as shown in Eq. <a class="reference internal" href="#equation-eq6-7-7">(257)</a>.</p>
<div class="math notranslate nohighlight" id="equation-eq6-7-7">
<span class="eqno">(257)<a class="headerlink" href="#equation-eq6-7-7" title="Permalink to this equation">¶</a></span>\[c_{i j}=\frac{\hat{\Sigma}_{i j}}{\hat{\mu}_{i} \hat{\mu}_{j}} .\]</div>
<p>The correlation coefficients determined with Eq. <a class="reference internal" href="#equation-eq6-7-7">(257)</a> are the values needed
to perform the Generalized Least Linear Square (GLLS) analysis using TSURFER,
which solves for a set of cross section data perturbations that would improve
agreement between the computational simulations and experimental benchmark
results.</p>
</div>
</div>
<div class="section" id="general-workflow">
<span id="id18"></span><h3>General workflow<a class="headerlink" href="#general-workflow" title="Permalink to this headline">¶</a></h3>
<p>The overall workflow for Sampler is as follows:</p>
<ul class="simple">
<li><p>for each sample, pick the perturbation factors and generate geometry
perturbations</p>
<ul>
<li><p>for each case, build SCALE input decks, which include:</p>
<ul>
<li><p>calls to the perturbation modules, which generate the perturbed
data libraries (based on the perturbation factors for this
sample)</p></li>
<li><p>user sequence inputs</p></li>
<li><p>output data retrieval</p></li>
</ul>
</li>
<li><p>insert each of the constructed input decks into the processing
queue</p></li>
</ul>
</li>
<li><p>run all SCALE cases from the queue (serial or parallel, as available)</p></li>
<li><p>perform data extraction (using the response mechanism) and
statistical analysis</p></li>
<li><p>print output and generate data files</p></li>
</ul>
<p>The advantage of this workflow is that the individual SCALE runs are
completely identified by the sample number (so they are reproducible)
and they are independent. Each of the runs is executed within its own
environment (with SCALE runtime as a subprocess), with its own decay
data, fission yield and cross section library. This arrangement is very
robust and, as there is no coupling between the runs, can be effectively
parallelized.</p>
</div>
<div class="section" id="file-management">
<span id="id19"></span><h3>File management<a class="headerlink" href="#file-management" title="Permalink to this headline">¶</a></h3>
<p>For every SCALE run, Sampler creates a subdirectory within its own
temporary directory. Each subdirectory has a name in the form <em>(case
name)</em> <a href="#id20"><span class="problematic" id="id21">``</span></a>_pert_ `` <em>(sample number)</em>. Within this directory all the
useful data for the particular run are stored: the input file, the
output file, the message file, the terminal log file (which is a joint
capture of SCALE both standard output and standard error stream) along
with the saved data files (ft71, xfile016, PTP files etc.)</p>
<p>By retaining the temporary directory, the user can then examine and
possibly reuse saved files for the individual SCALE runs.</p>
</div>
<div class="section" id="parallel-execution">
<span id="id22"></span><h3>Parallel execution<a class="headerlink" href="#parallel-execution" title="Permalink to this headline">¶</a></h3>
<p>Since the Sampler calculations usually consist of several hundred
mutually completely independent calculations, it is desirable to run the
subcases in parallel.</p>
<p>Sampler supports both threading and MPI for parallel computing. No
special settings are needed in the input deck; Sampler fully relies on
the parallel capabilities of the SCALE runtime environment (ScaleRTE).</p>
<p>In order to run Sampler in parallel, use <code class="docutils literal notranslate"><span class="pre">=%sampler</span></code> as the sequence
declarator and specify either the <code class="docutils literal notranslate"><span class="pre">–N</span></code> (for MPI) or <code class="docutils literal notranslate"><span class="pre">–I</span></code> (for multi-threads)
command line arguments to ScaleRTE. For serial and multi-threaded runs,
the declaratory <code class="docutils literal notranslate"><span class="pre">=sampler</span></code> may be used to remove the warning about a
parallel version not being available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Where MPI is used, the Sampler case temporary directory has to
be accessible by all of the computing nodes. Therefore, use –T to place
the temporary directory into a shared storage space.</p>
</div>
</div>
<div class="section" id="behavior-when-encountering-errors">
<span id="id23"></span><h3>Behavior when encountering errors<a class="headerlink" href="#behavior-when-encountering-errors" title="Permalink to this headline">¶</a></h3>
<p>Any time a parameter within a SCALE input is perturbed, there is the
possibility that the perturbation will cause unrealistic behavior (fuel
pellet passing through cladding, etc.) that will cause SCALE to fail.
The default behavior of Sampler is to finish all perturbed cases and
check whether there are errors present for each case once all cases have
been run.</p>
</div>
</div>
<div class="section" id="input-description">
<span id="id24"></span><h2>Input Description<a class="headerlink" href="#input-description" title="Permalink to this headline">¶</a></h2>
<p>This section describes the Sampler input file format.</p>
<div class="section" id="overall-input-structure">
<span id="id25"></span><h3>Overall input structure<a class="headerlink" href="#overall-input-structure" title="Permalink to this headline">¶</a></h3>
<p>The order of the blocks is arbitrary, with the exception of dependent
variables (see <a class="reference internal" href="#id43"><span class="std std-ref">Dependent variables (expressions)</span></a>. Below is the layout of a typical
sampler input.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">(control</span> <span class="err">flags)</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>
<span class="n">read</span><span class="err"> </span><span class="n">parametric</span>
  <span class="err">(parametric</span> <span class="err">studies</span> <span class="err">definitions)</span>
<span class="n">end</span><span class="err"> </span><span class="n">parametric</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">casename</span><span class="err">]</span>
  <span class="err">sequence=(sequence</span> <span class="err">name)</span>
    <span class="err">(sequence</span> <span class="err">input)</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
  <span class="err">...</span> <span class="err">(more</span> <span class="err">sequences)</span> <span class="err">...</span>
  <span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">id</span><span class="err">1]</span>
    <span class="err">(variable</span> <span class="err">definition)</span>
  <span class="n">end</span><span class="err"> </span><span class="n">variable</span>
  <span class="err">...</span> <span class="err">(more</span> <span class="err">variables)</span> <span class="err">...</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
<span class="err">...</span> <span class="err">(more</span> <span class="err">cases)</span> <span class="err">...</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">name</span><span class="err">1]</span>
  <span class="err">(response</span> <span class="err">definition)</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
<span class="err">...</span> <span class="err">(more</span> <span class="err">responses)</span> <span class="err">...</span>

<span class="n">read</span><span class="err"> </span><span class="n">save</span>
  <span class="err">(file</span> <span class="err">save</span> <span class="err">definition)</span>
<span class="n">end</span><span class="err"> </span><span class="n">save</span>
<span class="err">...</span> <span class="err">(more</span> <span class="err">saves)</span> <span class="err">...</span>

<span class="n">end</span>
</pre></div>
</div>
<p>Every Sampler input file has to contain the parameters block and at least one
case block. Other input blocks are optional.</p>
<div class="section" id="cases-and-sequences">
<span id="id26"></span><h4>Cases and sequences<a class="headerlink" href="#cases-and-sequences" title="Permalink to this headline">¶</a></h4>
<p>Within Sampler, multiple independent SCALE calculations, or <em>cases</em>, can
be included. Since the same set of responses is extracted from each of
the cases, these should have the same structure (i.e. produce the same
kind of output files); the benefit of having multiple cases within one
Sampler input deck is that it is possible to generate cross-correlations
between cases as an output.</p>
<p>Every <em>case</em> contains one or more stacked <em>sequences</em>. The whole case is
always run together.</p>
<p>Each case has an unique <em>identifier</em>. The identifier is a single word
beginning with a letter followed by letters, numbers and underscores.
Note that the dash “-” cannot be used in a case identifier.</p>
<p>Within the case block, the user can enter any number of sequences, which
contain the actual user input. The format of each sequence block is:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="err">sequence=(sequence</span> <span class="err">name)</span> <span class="err">(optional</span> <span class="err">parm=</span> <span class="err">setting)</span>
 <span class="err">(sequence</span> <span class="err">data)</span>
<span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
</pre></div>
</div>
<p>The sequence data is a SCALE input that is not processed by Sampler,
except to substitute sampled values for variable placeholders (see <a class="reference internal" href="#id44"><span class="std std-ref">Using placeholders</span></a>
for more information). For <code class="docutils literal notranslate"><span class="pre">parm=</span></code> settings, no limit on column
number is enforced.</p>
</div>
<div class="section" id="importing-input-data-from-external-files">
<span id="id27"></span><h4>Importing input data from external files<a class="headerlink" href="#importing-input-data-from-external-files" title="Permalink to this headline">¶</a></h4>
<p>Instead of directly specifying the SCALE sequence input within the Sampler input
file, the user can specify the path to a previously generated input file which
can be imported for use within Sampler as:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">import</span> <span class="err">=</span> <span class="s">&quot;/home/usr/sampler_samples/sampler_1x_case.inp&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
</pre></div>
</div>
<p>In this case, absolute paths should be used (or a <code class="docutils literal notranslate"><span class="pre">shell</span></code> sequence before invoking
Sampler, to copy the appropriate files into the temporary directory). This
approach provides concise input files and is advantageous for quality assurance
controlled input data.</p>
</div>
</div>
<div class="section" id="configuration-parameters">
<span id="id28"></span><h3>Configuration parameters<a class="headerlink" href="#configuration-parameters" title="Permalink to this headline">¶</a></h3>
<p>In the parameters block the user can control the main workflow and
output parameters for sampler. Valid keywords are shown in <a class="reference internal" href="#tab6-7-1"><span class="std std-numref">Table 113</span></a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note that of the major perturbation modes, only “perturb_geometry=yes”
is on by default. (Bondarenko factor and pointwise data perturbation for
CENTRM controls how “perturb_xs=yes” is performed.)</p>
</div>
<span id="tab6-7-1"></span><table class="docutils align-center" id="id65">
<caption><span class="caption-number">Table 113 </span><span class="caption-text">Parameter input for Sampler.</span><a class="headerlink" href="#id65" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/tab12.svg"><img alt="_images/tab12.svg" src="_images/tab12.svg" width="800" /></a>
</td>
</tr>
</tbody>
</table>
<p><strong>Notes on sample numbers:</strong></p>
<p>The samples are selected from the perturbation factor libraries (except
for geometry perturbation); it is up to the user to fit inside the range
of samples available (i.e. n_samples+first_sample–1 must be less or
equal to the number of samples). The built-in perturbation libraries
based nuclear data covariances contain 1000 samples.</p>
<p><strong>Note on perturbed library name:</strong></p>
<p>The default behavior for Sampler is to set <code class="docutils literal notranslate"><span class="pre">perturbed_library</span></code> to the same
name as <code class="docutils literal notranslate"><span class="pre">library</span></code>. Since Sampler creates a local file in the temporary
directory, which is used by SCALE instead of the library in the lookup
table, it in general results in the desired behavior. SCALE sequences
only provide pre-defined resonance self-shielding options for known
libraries, so where <code class="docutils literal notranslate"><span class="pre">perturbed_library</span></code> differs from the name of a
standard SCALE library, the type of resonance self-shielding calculation
desired must be specified (via the <em>PARM=</em> setting). Please review the
documentation of the specified sequence for available options, such as
<em>PARM=CENTRM</em>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The library name must result in a valid filename. In some
cases the use of “<code class="docutils literal notranslate"><span class="pre">xn252v7.1</span></code>” instead of “<code class="docutils literal notranslate"><span class="pre">v7.1-252</span></code>” is recommended
because the dash might result in improper links to the perturbed
library. This guidance applies only to the cases when <code class="docutils literal notranslate"><span class="pre">perturb_xs=yes</span></code> is
used; otherwise, Sampler does not generate a perturbed library.</p>
</div>
<p>See <a class="reference internal" href="#id46"><span class="std std-ref">Converting a standard SCALE input deck to a Sampler input deck</span></a> for an example of properly referencing the perturbed library.</p>
</div>
<div class="section" id="sampler-responses">
<span id="id29"></span><h3>Sampler responses<a class="headerlink" href="#sampler-responses" title="Permalink to this headline">¶</a></h3>
<p>For every case run within Sampler any number of responses can be
extracted. A response can be a single number or a time-dependent series,
which is assigned a name and optionally several parameters. The
responses are entered once and shared across all the cases, i.e. every
case returns the same set of responses. This allows Sampler to provide
the user with inter-case comparisons and statistics (i.e. covariance and
correlation matrices).</p>
<p>Sampler recognizes these kinds of responses:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">opus_plt</span></code> – data from an OPUS-generated PLT file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">triton</span></code> - TRITON homogenized cross-sections (xfile016)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stdcmp</span></code> – standard composition files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">f71</span></code> – concentrations from the F71 ORIGEN dump</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grep</span></code> – general expression from the text output file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">variables</span></code> – the geometry perturbation sampled values</p></li>
</ul>
<div class="section" id="general-response-block-format">
<span id="id30"></span><h4>General response block format<a class="headerlink" href="#general-response-block-format" title="Permalink to this headline">¶</a></h4>
<p>The general format of the response block is:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[(</span><span class="n">response</span><span class="err"> </span><span class="n">id</span><span class="err">)]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">(response</span> <span class="err">type)</span>
  <span class="err">(response</span> <span class="err">parameters)</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
<p>The <em>(response id)</em> is an arbitrary identifier (a single word) by which
the the response is denoted in the results. The <em>(response type)</em> is one
of the keywords <code class="docutils literal notranslate"><span class="pre">opus_plt</span></code>, <code class="docutils literal notranslate"><span class="pre">triton</span></code>, <code class="docutils literal notranslate"><span class="pre">stdcmp</span></code>, <code class="docutils literal notranslate"><span class="pre">f71</span></code>, variables and <code class="docutils literal notranslate"><span class="pre">grep</span></code>.
Response parameters are different for each response type and are
explained below.</p>
</div>
<div class="section" id="opus-plt-file-responses">
<span id="id31"></span><h4>OPUS PLT file responses<a class="headerlink" href="#opus-plt-file-responses" title="Permalink to this headline">¶</a></h4>
<p>This response extracts any data from a PLT file generated by OPUS. The
user specifies which PLT file should be used and which elements/nuclides
should be used.</p>
<p>Parameter <code class="docutils literal notranslate"><span class="pre">ndataset</span></code> provides the number of the selected PLT file, i.e.
<code class="docutils literal notranslate"><span class="pre">ndataset=1</span></code> will read data from the file ending with
.00000000000000001.plt (which is the second generated PLT file in the
given case).</p>
<p>Parameter <code class="docutils literal notranslate"><span class="pre">nuclides=…end</span></code> specifies the list of nuclides (or elements)
which are read from the PLT file; nuclides can be specified as
alphanumeric identifiers (U-235, ba137m) or six-digit ZAI identifiers
(922350). In addition to that, any other PLT file response identifiers
(i.e. the character strings in the first column of the plot table) may
be used, which allows for example the usage of <code class="docutils literal notranslate"><span class="pre">total</span></code> and <code class="docutils literal notranslate"><span class="pre">subtotal</span></code>
keywords.</p>
<p><strong>Example</strong></p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">fisrates</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">opus_plt</span>
  <span class="err">ndataset</span> <span class="err">=</span> <span class="m">1</span>
  <span class="err">nuclides</span> <span class="err">=</span> <span class="err">u</span><span class="m">238</span> <span class="err">pu</span><span class="m">239</span> <span class="err">total</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
</div>
<div class="section" id="triton-homogenized-cross-section-responses">
<span id="id32"></span><h4>TRITON homogenized cross-section responses<a class="headerlink" href="#triton-homogenized-cross-section-responses" title="Permalink to this headline">¶</a></h4>
<p>This response extracts the homogenized cross-section data saved by
TRITON on the <code class="docutils literal notranslate"><span class="pre">xfile016</span></code>.</p>
<p>Responses are retrieved for a selected homogenized mixture and all
branches (which are then denoted by response name suffixes).</p>
<p>Using a <code class="docutils literal notranslate"><span class="pre">data=</span> <span class="pre">…</span> <span class="pre">end</span></code> assignment specifies which data types are to be
saved.</p>
<p>The available options for data entries are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>kinf sigma_total sigma_fission sigma_absorption
sigma_capture sigma_transport_out sigma_transport_in
sigma_transport sigma_elastic sigma_n2n nu_fission
kappa_fission nu chi flux diffusion
</pre></div>
</div>
<p><strong>Example</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">xs</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">triton</span>
  <span class="err">mixture</span> <span class="err">=</span> <span class="m">1</span>
  <span class="err">data</span> <span class="err">=</span> <span class="err">kinf</span> <span class="err">sigma_absorption</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
</div>
<div class="section" id="standard-composition-file-responses">
<span id="id33"></span><h4>Standard composition file responses<a class="headerlink" href="#standard-composition-file-responses" title="Permalink to this headline">¶</a></h4>
<p>This response retrieves isotopic concentrations (in atoms/barn-cm) from
the standard composition file. Parameter <code class="docutils literal notranslate"><span class="pre">nuclides=…end</span></code> specifies which
nuclides should be retrieved. The parameter mixture specifies the number
of the StdCmpMix file, so <code class="docutils literal notranslate"><span class="pre">mixture=10</span></code> would load concentrations from the
file <a href="#id101"><span class="problematic" id="id102">StdCmpMix00010_</span></a>* (for all time steps).</p>
<p><strong>Example:</strong></p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">mix</span><span class="err">10]</span>
  <span class="err">nuclides</span> <span class="err">=</span> <span class="err">u-</span><span class="m">235</span> <span class="err">pu-</span><span class="m">239</span> <span class="n">end</span>
  <span class="err">mixture</span> <span class="err">=</span> <span class="m">10</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
</div>
<div class="section" id="origen-concentration-f71-responses">
<span id="id34"></span><h4>ORIGEN concentration (F71) responses<a class="headerlink" href="#origen-concentration-f71-responses" title="Permalink to this headline">¶</a></h4>
<p>This response retrieves the isotopic concentrations (in gram-atoms) from
the ORIGEN concentration edit in the <code class="docutils literal notranslate"><span class="pre">ft71f001</span></code> file.</p>
<p>Parameter <code class="docutils literal notranslate"><span class="pre">nuclides=…end</span></code> specifies the list of nuclides (or elements)
which are read from the F71 file; nuclides can be specified as
alphanumeric identifiers (U-235, ba137m) or six-digit ZAI identifiers
(922350).</p>
<p>Two options are available to choose the positions on the file from which data
should be retrieved. Either <code class="docutils literal notranslate"><span class="pre">step_from=start</span></code> and <code class="docutils literal notranslate"><span class="pre">step_to=end</span></code> can be used to
select a range of positions, or <code class="docutils literal notranslate"><span class="pre">mixture=N</span></code>  can be used to choose either an
ORIGEN case or a TRITON case mixture. This is convenient for TRITON cases where
step numbers are usually not known in advance.</p>
<p><strong>Example:</strong></p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">concentrations</span><span class="err">]</span>
  <span class="err">type=origen_nuclides</span>
  <span class="err">nuclides</span> <span class="err">=</span> <span class="err">u-</span><span class="m">235</span> <span class="err">pu-</span><span class="m">239</span> <span class="err">pu-</span><span class="m">240</span> <span class="err">pu-</span><span class="m">241</span> <span class="n">end</span>
  <span class="err">mixture</span> <span class="err">=</span> <span class="m">10</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
</div>
<div class="section" id="generic-regular-expression-grep-responses">
<span id="id35"></span><h4>Generic regular expression (GREP) responses<a class="headerlink" href="#generic-regular-expression-grep-responses" title="Permalink to this headline">¶</a></h4>
<p>In order to allow the user to collect other responses from the SCALE
output, a generic regular expression (regexp) mechanism is provided by
Sampler. For every response the user can enter one (or more) regular
expressions, which are applied (using the “grep” system tool) to the
main output file. “grep” is executed with the “-o” option, which returns
only the matched portion of the line (and not the whole line). Usually
it is necessary to use two expressions, one to find the line of interest
and another to extract only the desired value. The POSIX character
classes are supported in the grep used—the most commonly used are
“[[:digit:]]” to match a single digit 0-9 and [[:space:]] to match a
single space or tab. The “+” and “*” are used to match one or more and
zero or more repeats, respectively. Note that as per standard regexp
rules, “.” matches any character and an escape is necessary, i.e. “.”,
in order to match a period.</p>
<p>Each regular expression is defined by the keyword <code class="docutils literal notranslate"><span class="pre">regexp=</span></code>”…”. The result
of the last regular expressions should be a single number (and is
treated as such by Sampler).</p>
<p>The following example defines regular expression for extraction of
k-effective from a CSAS5/6 output file:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">keff</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">grep</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;best estimate system k-eff[[:space:]]+[[:digit:]]+\.[[:digit:]]+&quot;</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;[[:digit:]]+\.[[:digit:]]+&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
<p>With the first <code class="docutils literal notranslate"><span class="pre">regexp</span></code> statement, a line containing “best estimate system
k-eff” followed by a number is found, and then just the number part is
extracted with the second <code class="docutils literal notranslate"><span class="pre">regexp</span></code> statement.</p>
<p>For ease of use, Sampler provides several regular expression shortcuts
shown in <a class="reference internal" href="#tab6-7-2"><span class="std std-numref">Table 114</span></a>.</p>
<span id="tab6-7-2"></span><table class="docutils align-center" id="id66">
<caption><span class="caption-number">Table 114 </span><span class="caption-text">Regular expression shortcuts for SCALE sequences.</span><a class="headerlink" href="#id66" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/tab22.svg"><img alt="_images/tab22.svg" src="_images/tab22.svg" width="800" /></a>
</td>
</tr>
</tbody>
</table>
<p>Thus, the previous example may be alternately rephrased as such:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">keff</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">grep</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;:kenova.keff:&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
<p>In addition to this, the <code class="docutils literal notranslate"><span class="pre">grep</span></code> response also supports extraction of data
with uncertainties. In order to get the response uncertainty, use the
<code class="docutils literal notranslate"><span class="pre">eregexp=</span></code> keyword, which follows the same rules as <code class="docutils literal notranslate"><span class="pre">regexp=</span></code>. The same
shortcuts as for <code class="docutils literal notranslate"><span class="pre">regexp=</span></code> may be used as well (for KENO V.a/VI
multiplication coefficient). Therefore, to get KENO multiplication
factor including the uncertainty, one might define the response like
this:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">keff</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">grep</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;:kenova.keff:&quot;</span>
  <span class="err">eregexp</span> <span class="err">=</span> <span class="s">&quot;:kenova.keff:&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
</div>
<div class="section" id="sampled-variable-values">
<span id="id36"></span><h4>Sampled variable values<a class="headerlink" href="#sampled-variable-values" title="Permalink to this headline">¶</a></h4>
<p>Using the <code class="docutils literal notranslate"><span class="pre">variables</span></code> response, the user can extract information from the
sampled values of the geometry/material perturbation variables. The
<code class="docutils literal notranslate"><span class="pre">data=</span></code> key contains the list of variable identifiers of interest.</p>
<p>This option is useful to generate the correlations between
geometry/material perturbations and the responses of interest.</p>
<p><strong>Example:</strong></p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">r</span><span class="err">1]</span>
  <span class="err">...</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">r</span><span class="err">]</span>
  <span class="err">type=variables</span>
  <span class="err">data</span> <span class="err">=</span> <span class="err">r</span><span class="m">1</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
</div>
<div class="section" id="quick-response-definition-overview">
<span id="id37"></span><h4>Quick response definition overview<a class="headerlink" href="#quick-response-definition-overview" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="#tab6-7-3"><span class="std std-numref">Table 115</span></a> summarizes the available options for the different response
types. The nuclides specification can either be in terms of the standard
alphanumeric identifier, e.g. “u235m” for <sup>235m</sup>U, or the IZZZAAA
integer identifier, e.g. “1092235” for <sup>235m</sup>U.</p>
<span id="tab6-7-3"></span><table class="docutils align-center" id="id67">
<caption><span class="caption-number">Table 115 </span><span class="caption-text">Response definition overview.</span><a class="headerlink" href="#id67" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/tab31.svg"><img alt="_images/tab31.svg" src="_images/tab31.svg" width="800" /></a>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="saving-files">
<span id="id38"></span><h3>Saving files<a class="headerlink" href="#saving-files" title="Permalink to this headline">¶</a></h3>
<p>By default, Sampler saves from each run the input, output, message and
terminal log files. In addition to that, if respective responses are
requested, it saves the <code class="docutils literal notranslate"><span class="pre">ft71f001</span></code> as basename<code class="docutils literal notranslate"><span class="pre">.f71</span></code>, x``file016`` as
basename<code class="docutils literal notranslate"><span class="pre">.x16</span></code> and the <code class="docutils literal notranslate"><span class="pre">StdCmpMix*</span></code> files.</p>
<p>The user might specify additional files to be saved into the sample
subdirectory; this is achieved by defining one or more <code class="docutils literal notranslate"><span class="pre">save</span></code> blocks.</p>
<p>Each save block contains a <code class="docutils literal notranslate"><span class="pre">file=”…”</span></code> parameter, which specifies the
filename in the sample run temporary directory. Optionally, the user can
specify <code class="docutils literal notranslate"><span class="pre">name=”…”</span></code> to let Sampler rename the file to
<em>basename</em>.<em>extension</em>, where <em>extension</em> is the value of the <code class="docutils literal notranslate"><span class="pre">name</span></code>
parameter. If <code class="docutils literal notranslate"><span class="pre">name</span></code> is not specified, the file is not renamed and is just
copied to the sample subdirectory. The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter cannot be used if
wildcards are used in the <code class="docutils literal notranslate"><span class="pre">file</span></code> parameter.</p>
<p>The quotes for both <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">file</span></code> parameter values are mandatory.</p>
<p><strong>Example 1</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">save</span>
  <span class="err">name</span> <span class="err">=</span> <span class="s">&quot;ft2&quot;</span>
  <span class="err">file</span> <span class="err">=</span> <span class="s">&quot;ft71f002&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">save</span>
</pre></div>
</div>
<p><strong>Example 2</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">save</span>
  <span class="err">file</span> <span class="err">=</span> <span class="s">&quot;StdCmpMix*&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">save</span>
</pre></div>
</div>
</div>
<div class="section" id="parametric-studies">
<span id="id39"></span><h3>Parametric studies<a class="headerlink" href="#parametric-studies" title="Permalink to this headline">¶</a></h3>
<p>The Sampler infrastructure allows an efficient implementation of studies
of parameter variation effects on various responses. This mode is
activated by entering the <code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">parametric</span> <span class="pre">…</span> <span class="pre">end</span> <span class="pre">parametric</span></code> block.</p>
<p>This block contains two arrays: <code class="docutils literal notranslate"><span class="pre">variables</span> <span class="pre">=</span> <span class="pre">…</span> <span class="pre">end</span></code> and <code class="docutils literal notranslate"><span class="pre">n_samples</span> <span class="pre">=</span> <span class="pre">…</span> <span class="pre">end</span></code>.
The variables array lists the variables of the parametric study. The
variables must have “<code class="docutils literal notranslate"><span class="pre">distribution=uniform</span></code>”, and the minimum and maximum
becomes the range for that variable in the parametric study. For each
variable, the corresponding value in the <code class="docutils literal notranslate"><span class="pre">n_samples</span></code> = <code class="docutils literal notranslate"><span class="pre">…</span> <span class="pre">end</span></code> array
indicates the number of evenly spaced values to assume <em>in that
dimension.</em> The total number of calculations is therefore the
multiplication of all the <code class="docutils literal notranslate"><span class="pre">n_samples</span></code> values. Note that for a single
sample with <code class="docutils literal notranslate"><span class="pre">n_samples=1</span></code>, only the minimum value is used. Below is as an
example of the parametric block.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">parametric</span>
  <span class="err">variables</span> <span class="err">=</span> <span class="err">density</span> <span class="err">temperature</span> <span class="n">end</span>
  <span class="err">n_samples</span> <span class="err">=</span>      <span class="m">10</span>           <span class="m">6</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">parametric</span>
</pre></div>
</div>
<p>The two variables are <code class="docutils literal notranslate"><span class="pre">density</span> <span class="pre">``and</span> <span class="pre">``temperature</span></code>, and there will be 10
evenly spaced density values (including the minimum and maximum) and 6
evenly spaced temperature values, for a total of
<span class="math notranslate nohighlight">\(10 \times 6 = 60\)</span> calculations. To perform the same number of
samples in each dimension, the keyword <code class="docutils literal notranslate"><span class="pre">n_samples</span></code> in the parameters block
may also be used.</p>
<p>Sampler generates a summary table of the parametric study, including
values for which the minimum and maximum of each response occurs.
Sampler also generates PTP plot files showing the dependency of each
response on each variable.</p>
</div>
<div class="section" id="geometry-and-material-perturbations">
<span id="id40"></span><h3>Geometry and material perturbations<a class="headerlink" href="#geometry-and-material-perturbations" title="Permalink to this headline">¶</a></h3>
<p>In addition to data perturbations, Sampler also allows the user to
include geometry and material uncertainties in the calculation. This is
achieved by defining <code class="docutils literal notranslate"><span class="pre">variable</span></code> blocks. Each variable may be linked to a
particular value in the input and is associated either with a random
variable distribution or with an arithmetic expression. The expression
capability allows for dependent or derived parameters, such as
<sup>238</sup>U content depending on enrichment or outer clad radius
depending on the inner radius.</p>
<p>For each sample, Sampler creates a perturbed input by generating a set
of variable values and substituting them into the input. For every
variable, the user has to define the variable and specify its
distribution (using one of the predefined random variable distributions
described in <a class="reference internal" href="#id26"><span class="std std-ref">Cases and sequences</span></a>) or its dependence on other variables (using an
arithmetic expression). If desired, the user can also specify which part
of the input will be replaced by the variable. This can be achieved
either by specifying a SCALE Input Retrieval ENgine (SIREN) expression
or by putting placeholders directly inside the input deck (see Appendix
A for details on SIREN).</p>
<div class="section" id="variable-definition">
<span id="id41"></span><h4>Variable definition<a class="headerlink" href="#variable-definition" title="Permalink to this headline">¶</a></h4>
<p>Variables are defined by a <code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">variable..end</span> <span class="pre">variable</span></code> block. The general format of the block is:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[(</span><span class="n">variable</span><span class="err"> </span><span class="n">id</span><span class="err">)]</span>
  <span class="err">distribution</span> <span class="err">=</span> <span class="err">(distribution</span> <span class="err">type)</span>
  <span class="err">siren</span> <span class="err">=</span> <span class="s">&quot;(siren expression)&quot;</span>
  <span class="err">(distribution-specific</span> <span class="err">parameters)</span>
  <span class="err">cases</span> <span class="err">=</span> <span class="err">(case</span> <span class="err">list)</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
<p>The variable id is an arbitrary, single word consisting of letters,
numbers and underscores (with number not being the first character). The
variable id has to be unique and is case dependent. <code class="docutils literal notranslate"><span class="pre">distribution</span></code> is one
of the distribution-type keywords (see <a class="reference internal" href="#id42"><span class="std std-ref">Distribution types</span></a>) or <code class="docutils literal notranslate"><span class="pre">expression</span></code> for
the dependent variable definition. The <code class="docutils literal notranslate"><span class="pre">cases=</span></code> specification applies only
to the variables defined at the global scope (see below). The <code class="docutils literal notranslate"><span class="pre">siren=</span></code>
specification is optional, see below.</p>
<p>The block can be placed either:</p>
<ol class="loweralpha simple">
<li><p>inside a case block. This variable applies only to this particular case.</p></li>
</ol>
<p>In the following example, variable <code class="docutils literal notranslate"><span class="pre">x</span></code> applies to the case <code class="docutils literal notranslate"><span class="pre">c1</span></code> and the
variable <code class="docutils literal notranslate"><span class="pre">y</span></code> applies to the case <code class="docutils literal notranslate"><span class="pre">c2</span></code>.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=...</span>
    <span class="err">...</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
  <span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">x</span><span class="err">]</span>
    <span class="err">...</span>
  <span class="n">end</span><span class="err"> </span><span class="n">variable</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">2]</span>
  <span class="err">sequence=...</span>
    <span class="err">...</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
  <span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">y</span><span class="err">]</span>
    <span class="err">...</span>
  <span class="n">end</span><span class="err"> </span><span class="n">variable</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
</pre></div>
</div>
<p>b) at the global scope. The <code class="docutils literal notranslate"><span class="pre">cases=...</span> <span class="pre">end</span></code> has to be used to specify the
cases to which this variable applies.</p>
<p>In this example, variable <code class="docutils literal notranslate"><span class="pre">x</span></code> applies to the both cases <code class="docutils literal notranslate"><span class="pre">c1</span></code> and <code class="docutils literal notranslate"><span class="pre">c2</span></code> and the variable
<code class="docutils literal notranslate"><span class="pre">y</span></code> applies only to the case <code class="docutils literal notranslate"><span class="pre">c1</span></code>.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=...</span>
    <span class="err">...</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">2]</span>
  <span class="err">sequence=...</span>
    <span class="err">...</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">x</span><span class="err">]</span>
  <span class="err">...</span>
  <span class="err">cases</span> <span class="err">=</span> <span class="err">c</span><span class="m">1</span> <span class="err">c</span><span class="m">2</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">y</span><span class="err">]</span>
  <span class="err">...</span>
  <span class="err">cases</span> <span class="err">=</span> <span class="err">c</span><span class="m">1</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
</div>
<div class="section" id="distribution-types">
<span id="id42"></span><h4>Distribution types<a class="headerlink" href="#distribution-types" title="Permalink to this headline">¶</a></h4>
<p>Sampler supports three random <code class="docutils literal notranslate"><span class="pre">distribution</span></code> types, selected using the
distribution= keyword.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uniform</span></code>: uniform distribution over a (closed) interval.</p></li>
</ol>
<p>Additional parameters for a uniform distribution are shown in <a class="reference internal" href="#tab6-7-4"><span class="std std-numref">Table 116</span></a>.</p>
<span id="tab6-7-4"></span><table class="colwidths-auto docutils align-center" id="id68">
<caption><span class="caption-number">Table 116 </span><span class="caption-text">Parameters for uniform distributions.</span><a class="headerlink" href="#id68" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p><strong>KEYWORD</strong></p></th>
<th class="head"><p><strong>DESCRIPTION</strong></p></th>
<th class="head"><p><strong>NOTE</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>value=</p></td>
<td><p>Base (unperturbed) value</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-odd"><td><p>minimum=</p></td>
<td><p>Lower bound value</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-even"><td><p>maximum=</p></td>
<td><p>Upper bound value</p></td>
<td><p>required</p></td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">rfuel</span><span class="err">]</span>
  <span class="err">distribution=uniform</span>
  <span class="err">minimum</span> <span class="err">=</span> <span class="m">0</span><span class="err">.</span><span class="m">40</span>
  <span class="err">value</span> <span class="err">=</span> <span class="m">0</span><span class="err">.</span><span class="m">41</span>
  <span class="err">maximum</span> <span class="err">=</span> <span class="m">0</span><span class="err">.</span><span class="m">42</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">normal</span></code>: normal (optionally truncated) distribution.</p></li>
</ol>
<p>Additional parameters for normal distribution are shown in <a class="reference internal" href="#tab6-7-5"><span class="std std-numref">Table 117</span></a>.</p>
<span id="tab6-7-5"></span><table class="docutils align-center" id="id69">
<caption><span class="caption-number">Table 117 </span><span class="caption-text">Parameters for normal distributions.</span><a class="headerlink" href="#id69" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 30%" />
<col style="width: 47%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>KEYWORD</strong></p></th>
<th class="head"><p><strong>DESCRIPTION</strong></p></th>
<th class="head"><p><strong>NOTE</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>value=</p></td>
<td><p>Mean value</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-odd"><td><p>stddev=</p></td>
<td><p>Standard deviation</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-even"><td><p>minimum=</p></td>
<td><p>Lower cutoff value</p></td>
<td><p>optional</p></td>
</tr>
<tr class="row-odd"><td><p>maximum=</p></td>
<td><p>Upper cutoff value</p></td>
<td><p>optional</p></td>
</tr>
</tbody>
</table>
<p>The user can specify both <code class="docutils literal notranslate"><span class="pre">minimum</span></code> and <code class="docutils literal notranslate"><span class="pre">maximum</span></code>, one of them, or neither. If a
cutoff is not specified, the distribution is not truncated on that side.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">c</span><span class="err">1_</span><span class="n">u</span><span class="err">235]</span>
  <span class="err">distribution=normal</span>
  <span class="err">value=</span><span class="m">95</span><span class="err">.</span><span class="m">0</span>
  <span class="err">stddev=</span><span class="m">0</span><span class="err">.</span><span class="m">05</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><code class="docutils literal notranslate"><span class="pre">beta</span></code>: beta distribution.</p></li>
</ol>
<p>Additional parameters for the beta distribution are shown in <a class="reference internal" href="#tab6-7-6"><span class="std std-numref">Table 118</span></a>.</p>
<span id="tab6-7-6"></span><table class="docutils align-center" id="id70">
<caption><span class="caption-number">Table 118 </span><span class="caption-text">Parameters for beta distributions.</span><a class="headerlink" href="#id70" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 22%" />
<col style="width: 60%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>KEYWORD</strong></p></th>
<th class="head"><p><strong>DESCRIPTION</strong></p></th>
<th class="head"><p><strong>NOTE</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>value=</p></td>
<td><p>Mean value</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-odd"><td><p>minimum=</p></td>
<td><p>Lower cutoff value</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-even"><td><p>maximum=</p></td>
<td><p>Upper cutoff value</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-odd"><td><p>beta_a=</p></td>
<td><p>First parameter for distribution</p></td>
<td><p>required</p></td>
</tr>
<tr class="row-even"><td><p>beta_b=</p></td>
<td><p>Second parameter for distribution</p></td>
<td><p>required</p></td>
</tr>
</tbody>
</table>
<p>The Beta distribution is defined in the standard way given by Eq.
<a class="reference internal" href="#equation-eq6-7-8">(258)</a>. The parameters for the distribution determine where the peak is
located in the interval [<code class="docutils literal notranslate"><span class="pre">minimum</span></code>, <code class="docutils literal notranslate"><span class="pre">maximum</span></code>] and the variance of the
distribution; the parameters α and β are required to be integer values.
Note that <code class="docutils literal notranslate"><span class="pre">value</span></code> does not need to be the midpoint between <code class="docutils literal notranslate"><span class="pre">minimum</span></code> and
<code class="docutils literal notranslate"><span class="pre">maximum</span></code>.</p>
<div class="math notranslate nohighlight" id="equation-eq6-7-8">
<span class="eqno">(258)<a class="headerlink" href="#equation-eq6-7-8" title="Permalink to this equation">¶</a></span>\[f(x ; \alpha, \beta)=\frac{\Gamma(\alpha+\beta)}{\Gamma(\alpha) \Gamma(\beta)} x^{\alpha-1}(1-x)^{\beta-1} ,\]</div>
<p><strong>Example</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">rclad</span><span class="err">]</span>
  <span class="err">distribution=beta</span>
  <span class="err">value=</span><span class="m">0</span><span class="err">.</span><span class="m">47</span>
  <span class="err">minimum=</span><span class="m">0</span><span class="err">.</span><span class="m">45</span>
  <span class="err">maximum=</span><span class="m">0</span><span class="err">.</span><span class="m">50</span>
  <span class="err">beta_a=</span><span class="m">2</span>
  <span class="err">beta_b=</span><span class="m">6</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
</div>
<div class="section" id="dependent-variables-expressions">
<span id="id43"></span><h4>Dependent variables (expressions)<a class="headerlink" href="#dependent-variables-expressions" title="Permalink to this headline">¶</a></h4>
<p>Using <code class="docutils literal notranslate"><span class="pre">distribution=expression</span></code> allows the user to specify a variable
using the values of other variables. Setting <code class="docutils literal notranslate"><span class="pre">expression=</span></code>“(expression)”
then specifies how to evaluate the variable. Sampler supports basic
arithmetic operators and other variables can be used as well. However,
Sampler currently provides no variable dependency resolution and
therefore only variables that were defined (using the variable block)
previously in the input deck can be referenced in an expression.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">c</span><span class="err">1_</span><span class="n">u</span><span class="err">238]</span>
  <span class="err">distribution</span> <span class="err">=</span> <span class="err">expression</span>
  <span class="err">expression=</span><span class="s">&quot;100.0-c1_u235&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
</div>
<div class="section" id="using-placeholders">
<span id="id44"></span><h4>Using placeholders<a class="headerlink" href="#using-placeholders" title="Permalink to this headline">¶</a></h4>
<p>Inside the <code class="docutils literal notranslate"><span class="pre">sequence=</span></code> blocks, a #{<em>variable id</em>} placeholder can be used.
This will be replaced by a variable value when Sampler builds the
particular input deck. Only a simple variable reference can be used; no
expressions are allowed here.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="err">sequence=csas</span><span class="m">5</span>
<span class="err">...</span>
<span class="err">uranium</span>  <span class="m">1</span> <span class="err">den=</span><span class="m">18</span><span class="err">.</span><span class="m">76</span> <span class="m">1</span> <span class="m">300</span> <span class="m">92235</span> <span class="err">#{u</span><span class="m">235</span><span class="err">}</span> <span class="m">92238</span> <span class="err">#{u</span><span class="m">238</span><span class="err">}</span> <span class="n">end</span>
<span class="err">...</span>
<span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">u</span><span class="err">235]</span>
<span class="err">...</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">u</span><span class="err">238]</span>
<span class="err">...</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
<p>In the input deck snippet the <sup>235</sup>U and <sup>238</sup>U content
are inserted directly to the respective places (defined by variables
u235 and u238).</p>
<p>Using placeholders is straightforward and simple; however, if for input
deck quality assurance or other reasons it is not desirable to modify
the input deck directly, SIREN expressions can be used.</p>
</div>
<div class="section" id="using-siren-expressions">
<span id="id45"></span><h4>Using SIREN expressions<a class="headerlink" href="#using-siren-expressions" title="Permalink to this headline">¶</a></h4>
<p>SIREN is a package which provides an XPath-like interface to the SCALE
input deck represented by a Document Object Model (DOM). In Sampler, the
user can specify <code class="docutils literal notranslate"><span class="pre">siren=</span></code>”<em>path</em>” to have the respective token(s) replaced
by a variable value.</p>
<p>Please refer to Appendix A for more details on specifying the SIREN path
expressions.</p>
<p><strong>Example:</strong></p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">c</span><span class="err">1_</span><span class="n">u</span><span class="err">235]</span>
  <span class="err">distribution=normal</span>
  <span class="err">value=</span><span class="m">95</span><span class="err">.</span><span class="m">0</span>
  <span class="err">stddev=</span><span class="m">0</span><span class="err">.</span><span class="m">05</span>
  <span class="err">siren=</span><span class="s">&quot;/csas5/comps/stdcomp[decl=’uranium’]/wtpt_pair[id=&#39;92235&#39;]/wtpt&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>
</pre></div>
</div>
<p>The variable <code class="docutils literal notranslate"><span class="pre">c1_u235</span></code> value is inserted as the weight percent of
<sup>235</sup>U in the basic standard composition declared as “uranium” in
the CSAS5 sequence.</p>
</div>
</div>
<div class="section" id="converting-a-standard-scale-input-deck-to-a-sampler-input-deck">
<span id="id46"></span><h3>Converting a standard SCALE input deck to a Sampler input deck<a class="headerlink" href="#converting-a-standard-scale-input-deck-to-a-sampler-input-deck" title="Permalink to this headline">¶</a></h3>
<p>In this section, a short walkthrough is provided on how to convert a
“normal” SCALE input into a Sampler input for cross section uncertainty
propagation.</p>
<p>Beginning with a simple CSAS5 input deck:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=csas5</span>
  <span class="err">sample</span> <span class="err">problem</span> <span class="m">1</span>  <span class="err">case</span> <span class="m">2</span><span class="err">c</span><span class="m">8</span> <span class="err">bare</span>
  <span class="err">v</span><span class="m">7</span><span class="err">.</span><span class="m">1</span><span class="err">-</span><span class="m">252</span>
  <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
    <span class="err">uranium</span>  <span class="m">1</span> <span class="err">den=</span><span class="m">18</span><span class="err">.</span><span class="m">76</span> <span class="m">1</span> <span class="m">300</span> <span class="m">92235</span> <span class="m">93</span><span class="err">.</span><span class="m">2</span> <span class="m">92238</span> <span class="m">5</span><span class="err">.</span><span class="m">6</span> <span class="m">92234</span> <span class="m">1</span><span class="err">.</span><span class="m">0</span> <span class="m">92236</span> <span class="m">0</span><span class="err">.</span><span class="m">2</span> <span class="n">end</span>
  <span class="n">end</span><span class="err"> </span><span class="n">comp</span>

  <span class="n">read</span><span class="err"> </span><span class="n">geometry</span>
    <span class="err">unit</span> <span class="m">1</span>
      <span class="err">cylinder</span> <span class="m">1</span> <span class="m">1</span> <span class="m">5</span><span class="err">.</span><span class="m">748</span> <span class="m">5</span><span class="err">.</span><span class="m">3825</span> <span class="err">-</span><span class="m">5</span><span class="err">.</span><span class="m">3825</span>
      <span class="err">cuboid</span>  <span class="m">0</span> <span class="m">1</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">505</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">505</span>
  <span class="n">end</span><span class="err"> </span><span class="n">geometry</span>
    <span class="n">read</span><span class="err"> </span><span class="n">array</span>
      <span class="err">gbl=</span><span class="m">1</span> <span class="err">ara=</span><span class="m">1</span> <span class="err">nux=</span><span class="m">2</span> <span class="err">nuy=</span><span class="m">2</span> <span class="err">nuz=</span><span class="m">2</span> <span class="err">fill</span> <span class="err">f</span><span class="m">1</span>  <span class="n">end</span><span class="err"> </span><span class="n">fill</span>
    <span class="n">end</span><span class="err"> </span><span class="n">array</span>
  <span class="n">end</span><span class="err"> </span><span class="n">data</span>
<span class="n">end</span>
</pre></div>
</div>
<p>First, wrap the given input in sequence and case blocks and assign the
case an arbitrary identifier (<code class="docutils literal notranslate"><span class="pre">c1</span></code>). It is also recommended to change the
library alias to the actual filename.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=sampler</span>
<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=csas</span><span class="m">5</span>
    <span class="err">sample</span> <span class="err">problem</span> <span class="m">1</span>  <span class="err">case</span> <span class="m">2</span><span class="err">c</span><span class="m">8</span> <span class="err">bare</span>
    <span class="err">xn</span><span class="m">252</span><span class="err">v</span><span class="m">7</span><span class="err">.</span><span class="m">1</span>
    <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
      <span class="err">uranium</span>  <span class="m">1</span> <span class="err">den=</span><span class="m">18</span><span class="err">.</span><span class="m">76</span> <span class="m">1</span> <span class="m">300</span> <span class="m">92235</span> <span class="m">93</span><span class="err">.</span><span class="m">2</span> <span class="m">92238</span> <span class="m">5</span><span class="err">.</span><span class="m">6</span> <span class="m">92234</span> <span class="m">1</span><span class="err">.</span><span class="m">0</span> <span class="m">92236</span> <span class="m">0</span><span class="err">.</span><span class="m">2</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">comp</span>

    <span class="n">read</span><span class="err"> </span><span class="n">geometry</span>
      <span class="err">unit</span> <span class="m">1</span>
        <span class="err">cylinder</span> <span class="m">1</span> <span class="m">1</span> <span class="m">5</span><span class="err">.</span><span class="m">748</span> <span class="m">5</span><span class="err">.</span><span class="m">3825</span> <span class="err">-</span><span class="m">5</span><span class="err">.</span><span class="m">3825</span>
        <span class="err">cuboid</span>  <span class="m">0</span> <span class="m">1</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">505</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">505</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geometry</span>
      <span class="n">read</span><span class="err"> </span><span class="n">array</span>
        <span class="err">gbl=</span><span class="m">1</span> <span class="err">ara=</span><span class="m">1</span> <span class="err">nux=</span><span class="m">2</span> <span class="err">nuy=</span><span class="m">2</span> <span class="err">nuz=</span><span class="m">2</span> <span class="err">fill</span> <span class="err">f</span><span class="m">1</span>  <span class="n">end</span><span class="err"> </span><span class="n">fill</span>
      <span class="n">end</span><span class="err"> </span><span class="n">array</span>
    <span class="n">end</span><span class="err"> </span><span class="n">data</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Second, add the parameters block to identify the base cross-section
library used for building the perturbed ones. Note that this is the only
SCALE module that uses the plural form of parameters and that the
reference to the library matches exactly the one inside the CSAS5 input.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=sampler</span>
<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">library=</span><span class="s">&quot;xn252v7.1&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>
<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=csas</span><span class="m">5</span>
    <span class="err">sample</span> <span class="err">problem</span> <span class="m">1</span>  <span class="err">case</span> <span class="m">2</span><span class="err">c</span><span class="m">8</span> <span class="err">bare</span>
    <span class="err">xn</span><span class="m">252</span><span class="err">v</span><span class="m">7</span><span class="err">.</span><span class="m">1</span>
    <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
      <span class="err">uranium</span>  <span class="m">1</span> <span class="err">den=</span><span class="m">18</span><span class="err">.</span><span class="m">76</span> <span class="m">1</span> <span class="m">300</span> <span class="m">92235</span> <span class="m">93</span><span class="err">.</span><span class="m">2</span> <span class="m">92238</span> <span class="m">5</span><span class="err">.</span><span class="m">6</span> <span class="m">92234</span> <span class="m">1</span><span class="err">.</span><span class="m">0</span> <span class="m">92236</span> <span class="m">0</span><span class="err">.</span><span class="m">2</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">comp</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geometry</span>
      <span class="err">unit</span> <span class="m">1</span>
        <span class="err">cylinder</span> <span class="m">1</span> <span class="m">1</span> <span class="m">5</span><span class="err">.</span><span class="m">748</span> <span class="m">5</span><span class="err">.</span><span class="m">3825</span> <span class="err">-</span><span class="m">5</span><span class="err">.</span><span class="m">3825</span>
        <span class="err">cuboid</span>  <span class="m">0</span> <span class="m">1</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">505</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">505</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geometry</span>
      <span class="n">read</span><span class="err"> </span><span class="n">array</span>
        <span class="err">gbl=</span><span class="m">1</span> <span class="err">ara=</span><span class="m">1</span> <span class="err">nux=</span><span class="m">2</span> <span class="err">nuy=</span><span class="m">2</span> <span class="err">nuz=</span><span class="m">2</span> <span class="err">fill</span> <span class="err">f</span><span class="m">1</span>  <span class="n">end</span><span class="err"> </span><span class="n">fill</span>
      <span class="n">end</span><span class="err"> </span><span class="n">array</span>
    <span class="n">end</span><span class="err"> </span><span class="n">data</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Finally, set up the perturbations (number of samples and what to perturb):</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=sampler</span>
<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">library=</span><span class="s">&quot;xn252v7.1&quot;</span>
  <span class="err">n_samples</span> <span class="err">=</span> <span class="m">40</span>
  <span class="err">perturb_xs</span> <span class="err">=</span> <span class="err">yes</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>
<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=csas</span><span class="m">5</span>
    <span class="err">sample</span> <span class="err">problem</span> <span class="m">1</span>  <span class="err">case</span> <span class="m">2</span><span class="err">c</span><span class="m">8</span> <span class="err">bare</span>
    <span class="err">xn</span><span class="m">252</span><span class="err">v</span><span class="m">7</span><span class="err">.</span><span class="m">1</span>
    <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
      <span class="err">uranium</span>  <span class="m">1</span> <span class="err">den=</span><span class="m">18</span><span class="err">.</span><span class="m">76</span> <span class="m">1</span> <span class="m">300</span> <span class="m">92235</span> <span class="m">93</span><span class="err">.</span><span class="m">2</span> <span class="m">92238</span> <span class="m">5</span><span class="err">.</span><span class="m">6</span> <span class="m">92234</span> <span class="m">1</span><span class="err">.</span><span class="m">0</span> <span class="m">92236</span> <span class="m">0</span><span class="err">.</span><span class="m">2</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">comp</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geometry</span>
      <span class="err">unit</span> <span class="m">1</span>
        <span class="err">cylinder</span> <span class="m">1</span> <span class="m">1</span> <span class="m">5</span><span class="err">.</span><span class="m">748</span> <span class="m">5</span><span class="err">.</span><span class="m">3825</span> <span class="err">-</span><span class="m">5</span><span class="err">.</span><span class="m">3825</span>
        <span class="err">cuboid</span>  <span class="m">0</span> <span class="m">1</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">87</span> <span class="m">6</span><span class="err">.</span><span class="m">505</span> <span class="err">-</span><span class="m">6</span><span class="err">.</span><span class="m">505</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geometry</span>
      <span class="n">read</span><span class="err"> </span><span class="n">array</span>
        <span class="err">gbl=</span><span class="m">1</span> <span class="err">ara=</span><span class="m">1</span> <span class="err">nux=</span><span class="m">2</span> <span class="err">nuy=</span><span class="m">2</span> <span class="err">nuz=</span><span class="m">2</span> <span class="err">fill</span> <span class="err">f</span><span class="m">1</span>  <span class="n">end</span><span class="err"> </span><span class="n">fill</span>
      <span class="n">end</span><span class="err"> </span><span class="n">array</span>
    <span class="n">end</span><span class="err"> </span><span class="n">data</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>
<span class="n">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-problems-and-output-description">
<span id="id47"></span><h2>Example Problems and Output Description<a class="headerlink" href="#example-problems-and-output-description" title="Permalink to this headline">¶</a></h2>
<p>This section describes output files created by Sampler and provides
several sample cases.</p>
<div class="section" id="output-description">
<span id="id48"></span><h3>Output description<a class="headerlink" href="#output-description" title="Permalink to this headline">¶</a></h3>
<p>This section describes the contents of the main Sampler output file, as
well as the other files generated by Sampler.</p>
<p>All of the CSV, PTP and SDF files are, for convenience, copied into a
separate directory called <em>${OUTBASENAME}</em>.<code class="docutils literal notranslate"><span class="pre">samplerfiles</span></code>, where
<em>${OUTBASENAME}</em> is the base name of the main SCALE output file, e.g.
“my” in “my.out”.</p>
<div class="section" id="main-text-output">
<span id="id49"></span><h4>Main text output<a class="headerlink" href="#main-text-output" title="Permalink to this headline">¶</a></h4>
<p>The main text output summarizes the Sampler run progress and presents
the most important results.</p>
<div class="section" id="sampler-banner">
<span id="id50"></span><h5>Sampler banner<a class="headerlink" href="#sampler-banner" title="Permalink to this headline">¶</a></h5>
<p>The program verification information banner shows the program version and the
main execution information (date and time, user name, computer name).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>************************************************************************************************************************************
************************************************************************************************************************************
************************************************************************************************************************************
*****                                                                                                                          *****
*****                                             program verification information                                             *****
*****                                                                                                                          *****
*****                                            code system:  SCALE   version: 6.2                                            *****
*****                                                                                                                          *****
************************************************************************************************************************************
************************************************************************************************************************************
*****                                                                                                                          *****
*****                                                                                                                          *****
*****                      program:  sampler                                                                                   *****
*****                                                                                                                          *****
*****                      version:  6.2.0                                                                                     *****
*****                                                                                                                          *****
*****                     username:  usr                                                                                       *****
*****                                                                                                                          *****
*****                     hostname:  node11.ornl.gov                                                                           *****
*****                                                                                                                          *****
*****                                                                                                                          *****
*****            date of execution:  2013-04-04                                                                                *****
*****                                                                                                                          *****
*****            time of execution:  14:40:01                                                                                  *****
*****                                                                                                                          *****
************************************************************************************************************************************
************************************************************************************************************************************
************************************************************************************************************************************
</pre></div>
</div>
</div>
<div class="section" id="input-parameters-echo">
<span id="id51"></span><h5>Input parameters echo<a class="headerlink" href="#input-parameters-echo" title="Permalink to this headline">¶</a></h5>
<p>Input echo table summarizes the user selected parameters and options.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>------------------------------------------------------------------------------------------------------------------------------------
-                                                      Input parameters echo                                                       -
------------------------------------------------------------------------------------------------------------------------------------

   Number of cases                          : 1
   Number of samples                        : 500
   First sample index                       : 1
   Number of MAT-MT pairs                   : 0

   Perturb cross-sections                   : yes
   Perturb decay data                       : no
   Perturb fission yields                   : no

   Perturb pointwise XS                     : yes
   Perturb Bondarenko factors               : yes

   Master XS library                        : xn238v7
   Perturbed XS library                     : xn238v7
   Multigroup factors library               :
   Sensitivity factors library              : sensitivity_factors
   Covariance library                       : 44groupcov

   Print CSV tables                         : yes
   Print PTP histograms/histories           : yes
   Print per-sample data                    : no
   Print covariances                        : no
   Print correlations                       : no
   Print chi-square test                    : no
</pre></div>
</div>
</div>
<div class="section" id="scale-run-overview">
<span id="id52"></span><h5>SCALE run overview<a class="headerlink" href="#scale-run-overview" title="Permalink to this headline">¶</a></h5>
<p>The run overview table displays the list of SCALE calculations processed by
Sampler, i.e. for each case the baseline calculation (sample 0) and the
requested number of samples.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>************************************************************************************************************************************
*                                                             Sampling                                                             *
************************************************************************************************************************************

      case |              run         sample       running?                                                 sample directory
-----------+----------------------------------------------------------------------------------------------------------------
 case00001 |   sample #1 / 41         #00000            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00000
 case00001 |   sample #2 / 41         #00001            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00001
 case00001 |   sample #3 / 41         #00002            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00002
 case00001 |   sample #4 / 41         #00003            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00003
 case00001 |   sample #5 / 41         #00004            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00004
 case00001 |   sample #6 / 41         #00005            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00005
 case00001 |   sample #7 / 41         #00006            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00006
 case00001 |   sample #8 / 41         #00007            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00007
 case00001 |   sample #9 / 41         #00008            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00008
 case00001 |  sample #10 / 41         #00009            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00009
 case00001 |  sample #11 / 41         #00010            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00010
 case00001 |  sample #12 / 41         #00011            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00011
 case00001 |  sample #13 / 41         #00012            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00012
 case00001 |  sample #14 / 41         #00013            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00013
 case00001 |  sample #15 / 41         #00014            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00014
 case00001 |  sample #16 / 41         #00015            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00015
 case00001 |  sample #17 / 41         #00016            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00016
 case00001 |  sample #18 / 41         #00017            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00017
 case00001 |  sample #19 / 41         #00018            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00018
 case00001 |  sample #20 / 41         #00019            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00019
 case00001 |  sample #21 / 41         #00020            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00020
 case00001 |  sample #22 / 41         #00021            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00021
 case00001 |  sample #23 / 41         #00022            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00022
 case00001 |  sample #24 / 41         #00023            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00023
 case00001 |  sample #25 / 41         #00024            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00024
 case00001 |  sample #26 / 41         #00025            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00025
 case00001 |  sample #27 / 41         #00026            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00026
 case00001 |  sample #28 / 41         #00027            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00027
 case00001 |  sample #29 / 41         #00028            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00028
 case00001 |  sample #30 / 41         #00029            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00029
 case00001 |  sample #31 / 41         #00030            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00030
 case00001 |  sample #32 / 41         #00031            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00031
 case00001 |  sample #33 / 41         #00032            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00032
 case00001 |  sample #34 / 41         #00033            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00033
 case00001 |  sample #35 / 41         #00034            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00034
 case00001 |  sample #36 / 41         #00035            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00035
 case00001 |  sample #37 / 41         #00036            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00036
 case00001 |  sample #38 / 41         #00037            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00037
 case00001 |  sample #39 / 41         #00038            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00038
 case00001 |  sample #40 / 41         #00039            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00039
 case00001 |  sample #41 / 41         #00040            yes     /home/usr/sampler_samples/sampler_3_tmp/case00001_pert_00040

 --- Master process needs to run 41 SCALE runs.
</pre></div>
</div>
<p>The table shows case name, sample index, sample number (i.e. the number in the
perturbation factor library), whether the case has to be executed (if not it
means that the results were already available in the samplerfiles directory) and
the full path to the run subdirectory.</p>
</div>
<div class="section" id="response-tables">
<span id="id53"></span><h5>Response tables<a class="headerlink" href="#response-tables" title="Permalink to this headline">¶</a></h5>
<p>According to the print flags set by the user in the parameters block,
Sampler prints the following tables:</p>
<ul class="simple">
<li><p>values of all responses for all samples (printed if <code class="docutils literal notranslate"><span class="pre">print_data=yes</span></code>)</p></li>
<li><p>average values and standard deviation over the samples population
(always printed)</p></li>
<li><p>comparison of average and baseline value (always printed)</p></li>
<li><p>chi-square normality test (printed if <code class="docutils literal notranslate"><span class="pre">print_chi2=yes</span></code>)</p></li>
<li><p>covariance matrices (printed if <code class="docutils literal notranslate"><span class="pre">print_cov=yes</span></code>)</p></li>
<li><p>correlation matrices (printed if <code class="docutils literal notranslate"><span class="pre">print_corr=yes</span></code>)</p></li>
<li><p>case- and response- specific tables</p></li>
</ul>
<p>The case-specific tables contain only responses for a given case (so it
is possible to explore correlations only within a given case). The
response-specific tables are, on the other hand, contain responses
across all cases, so they are useful for case cross-correlation
analysis.</p>
<p>All of the tables are, regardless of the print flags, saved in the CSV
files (see the following section).</p>
</div>
</div>
<div class="section" id="csv-tables">
<span id="id54"></span><h4>CSV tables<a class="headerlink" href="#csv-tables" title="Permalink to this headline">¶</a></h4>
<p>Every table produced by Sampler is (regardless of whether it has been
selected for the main text output) saved also in the CSV (comma
separated values) format, which makes it convenient to process Sampler
results with a spreadsheet program, plotting package, or any scripting
workflow.</p>
<p>These types of tables are created:</p>
<ul class="simple">
<li><p>values for every sample for time-independent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.val.all.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>correlation matrix for time-independent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.corr.all.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>covariance matrix for time-independent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.cov.all.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>values for every sample for time-independent responses for each case</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.val.case-*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>correlation matrix for time-independent responses for each case</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.corr.case-*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>covariance matrix for time-independent responses for each case</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.cov.case-*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>values for every sample for time-independent responses for each
response</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.val.response-*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>correlation matrix for time-independent responses for each response</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.corr.response-*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>covariance matrix for time-independent responses for each response</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.static.cov.response-*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>values for every sample for time-dependent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>average values for time-dependent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.*.avg.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>standard deviations for time-dependent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.*.stddev.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>correlation matrices for every time step for time-dependent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.*.corr.step*.csv</span></code>)</p>
</div></blockquote>
<ul class="simple">
<li><p>covariance matrices for every time step for time-dependent responses</p></li>
</ul>
<blockquote>
<div><p>(<code class="docutils literal notranslate"><span class="pre">response_table.*.cov.step*.csv</span></code>)</p>
</div></blockquote>
</div>
<div class="section" id="sampling-histograms-and-running-averages">
<span id="id55"></span><h4>Sampling histograms and running averages<a class="headerlink" href="#sampling-histograms-and-running-averages" title="Permalink to this headline">¶</a></h4>
<p>In order to provide information on sampling convergence, Sampler
provides two plots for each response at every time step:</p>
<ul class="simple">
<li><p>histogram plot – distribution of the response values in directory
<em>${OUTBASENAME}</em>.samplerfiles/histogram</p></li>
<li><p>running average plot – average and standard deviation for first N
samples of the population in directory
<em>${OUTBASENAME}</em>.samplerfiles/running_averages</p></li>
</ul>
<p>Both plots are in the PTP format and can be plotted by Fulcrum, as shown
in <a class="reference internal" href="#fig6-7-1"><span class="std std-numref">Fig. 97</span></a> and <a class="reference internal" href="#fig6-7-2"><span class="std std-numref">Fig. 98</span></a>.</p>
<div class="figure align-center" id="id71">
<span id="fig6-7-1"></span><a class="reference internal image-reference" href="_images/fig129.png"><img alt="_images/fig129.png" src="_images/fig129.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 97 </span><span class="caption-text">Example histogram viewed in Fulcrum.</span><a class="headerlink" href="#id71" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id72">
<span id="fig6-7-2"></span><a class="reference internal image-reference" href="_images/fig220.png"><img alt="_images/fig220.png" src="_images/fig220.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 98 </span><span class="caption-text">Example running average viewed in Fulcrum.</span><a class="headerlink" href="#id72" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="response-histories">
<span id="id56"></span><h4>Response histories<a class="headerlink" href="#response-histories" title="Permalink to this headline">¶</a></h4>
<p>For time-dependent responses, Sampler produces two plots with
time-dependent summary data.</p>
<ul class="simple">
<li><p>standard deviation plot – time-dependent average response with
1-sigma uncertainty bars in directory
<em>${OUTBASENAME}</em>.samplerfiles/histories/history.avg.*</p></li>
<li><p>min/max plot – time-dependent average response with min/max error
bars in directory <em>${OUTBASENAME}</em>.samplerfiles/
histories/history.min_max.*</p></li>
</ul>
<p>An example of the standard deviation plot is shown <a class="reference internal" href="#fig6-7-3"><span class="std std-numref">Fig. 99</span></a> and the
min/max plot in <a class="reference internal" href="#fig6-7-4"><span class="std std-numref">Fig. 100</span></a>.</p>
<div class="figure align-center" id="id73">
<span id="fig6-7-3"></span><a class="reference internal image-reference" href="_images/fig319.png"><img alt="_images/fig319.png" src="_images/fig319.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 99 </span><span class="caption-text">Time-dependent average plus standard deviation plot.</span><a class="headerlink" href="#id73" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id74">
<span id="fig6-7-4"></span><a class="reference internal image-reference" href="_images/fig414.png"><img alt="_images/fig414.png" src="_images/fig414.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 100 </span><span class="caption-text">Time-dependent average plus min/max plot.</span><a class="headerlink" href="#id74" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="sample-problems">
<span id="id57"></span><h3>Sample problems<a class="headerlink" href="#sample-problems" title="Permalink to this headline">¶</a></h3>
<p>The following sample problems demonstrate various computational and
output capabilities of Sampler in various situations, for both
uncertainty and parametric calculations.</p>
<p>Input files for those sample problems can be found in the <code class="docutils literal notranslate"><span class="pre">samples/input</span></code>
directory of the SCALE installation. The naming convention for the
inputs is sampler_<em>N</em>.inp, where <em>N</em> is the sample problem number.
The number of samples (n_samples) shown here may vary from the number
included in the sample inputs.</p>
<div class="section" id="sample-problem-1">
<span id="id58"></span><h4>Sample problem 1<a class="headerlink" href="#sample-problem-1" title="Permalink to this headline">¶</a></h4>
<p>This simple, single-case problem, evaluates uncertainty in eigenvalue
for a T-XSDRN calculation of a MOX pincell. Only the cross-sections are
perturbed.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">n_samples=</span><span class="m">250</span>
  <span class="err">library=</span><span class="s">&quot;xn238v7&quot;</span>
  <span class="err">perturb_xs</span> <span class="err">=</span> <span class="err">yes</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=t-xsdrn</span>           <span class="err">parm=</span><span class="m">2</span><span class="err">region</span>
    <span class="err">pin-cell</span> <span class="err">model</span> <span class="err">with</span> <span class="err">MOX</span>
    <span class="err">xn</span><span class="m">238</span><span class="err">v</span><span class="m">7</span>
    <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
      <span class="err">uo</span><span class="m">2</span>   <span class="m">1</span> <span class="m">0</span><span class="err">.</span><span class="m">95</span> <span class="m">900</span> <span class="m">92235</span> <span class="m">4</span><span class="err">.</span><span class="m">5</span> <span class="m">92238</span> <span class="m">95</span><span class="err">.</span><span class="m">5</span>   <span class="n">end</span>
      <span class="err">zirc</span><span class="m">2</span> <span class="m">2</span> <span class="m">1</span> <span class="m">600</span>   <span class="n">end</span>
      <span class="err">h</span><span class="m">2</span><span class="err">o</span>   <span class="m">3</span> <span class="err">den=</span><span class="m">0</span><span class="err">.</span><span class="m">75</span> <span class="m">0</span><span class="err">.</span><span class="m">9991</span> <span class="m">540</span>   <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">comp</span>
    <span class="n">read</span><span class="err"> </span><span class="n">cell</span>
      <span class="err">latticecell</span> <span class="err">squarepitch</span> <span class="err">pitch=</span><span class="m">1</span><span class="err">.</span><span class="m">3127</span> <span class="m">3</span> <span class="err">fuelr=</span><span class="m">0</span><span class="err">.</span><span class="m">42</span> <span class="m">1</span> <span class="err">cladd=</span><span class="m">0</span><span class="err">.</span><span class="m">9500</span> <span class="m">2</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">cell</span>
    <span class="n">read</span><span class="err"> </span><span class="n">model</span>
    <span class="err">pin-cell</span> <span class="err">model</span> <span class="err">with</span> <span class="err">MOX</span>
    <span class="n">read</span><span class="err"> </span><span class="n">parm</span>
      <span class="err">sn=</span><span class="m">16</span>
    <span class="n">end</span><span class="err"> </span><span class="n">parm</span>
    <span class="n">read</span><span class="err"> </span><span class="n">materials</span>
      <span class="err">mix=</span><span class="m">1</span> <span class="err">com=</span><span class="s">&#39;fuel&#39;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">2</span> <span class="err">com=</span><span class="s">&#39;clad&#39;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">3</span> <span class="err">com=</span><span class="s">&#39;moderator&#39;</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">materials</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geom</span>
      <span class="err">geom=cylinder</span>
      <span class="err">rightBC=white</span>
      <span class="err">zoneIDs</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneids</span>
      <span class="err">zoneDimensions</span> <span class="m">0</span><span class="err">.</span><span class="m">42</span> <span class="m">0</span><span class="err">.</span><span class="m">475</span> <span class="m">0</span><span class="err">.</span><span class="m">7406117</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneDimensions</span>
      <span class="err">zoneIntervals</span> <span class="m">3</span><span class="err">r</span><span class="m">10</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneIntervals</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geom</span>
    <span class="n">end</span><span class="err"> </span><span class="n">model</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">lambda</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">grep</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;:xsdrn.lambda:&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">end</span>
</pre></div>
</div>
<p>The distribution of lambda (k-eff) from sample problem 1 is shown in <a class="reference internal" href="#fig6-7-5"><span class="std std-numref">Fig. 101</span></a>.</p>
<div class="figure align-center" id="id75">
<span id="fig6-7-5"></span><a class="reference internal image-reference" href="_images/fig512.png"><img alt="_images/fig512.png" src="_images/fig512.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 101 </span><span class="caption-text">Distribution of lambda (k-eff) obtained from sample problem 1.</span><a class="headerlink" href="#id75" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="sample-problem-2">
<span id="id59"></span><h4>Sample problem 2<a class="headerlink" href="#sample-problem-2" title="Permalink to this headline">¶</a></h4>
<p>This problem demonstrates a two-dimensional parametric study (using
inline placeholders) for two pincell systems.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parametric</span>
  <span class="err">variables</span> <span class="err">=</span> <span class="err">temp</span> <span class="err">rho</span> <span class="n">end</span>
  <span class="err">n_samples</span> <span class="err">=</span> <span class="m">3</span> <span class="m">5</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">parametric</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=t-xsdrn</span>           <span class="err">parm=</span><span class="m">2</span><span class="err">region</span>
    <span class="err">pin-cell</span> <span class="err">model</span> <span class="err">with</span> <span class="err">MOX</span>
    <span class="err">xn</span><span class="m">238</span><span class="err">v</span><span class="m">7</span>
    <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
      <span class="err">uo</span><span class="m">2</span>   <span class="m">1</span> <span class="m">0</span><span class="err">.</span><span class="m">95</span> <span class="err">#{temp}</span> <span class="m">92235</span> <span class="m">4</span><span class="err">.</span><span class="m">5</span> <span class="m">92238</span> <span class="m">95</span><span class="err">.</span><span class="m">5</span>   <span class="n">end</span>
      <span class="err">zirc</span><span class="m">2</span> <span class="m">2</span> <span class="m">1</span> <span class="m">600</span>   <span class="n">end</span>
      <span class="err">h</span><span class="m">2</span><span class="err">o</span>   <span class="m">3</span> <span class="err">den=#{rho}</span> <span class="m">0</span><span class="err">.</span><span class="m">9991</span> <span class="m">540</span>   <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">comp</span>
    <span class="n">read</span><span class="err"> </span><span class="n">cell</span>
      <span class="err">latticecell</span> <span class="err">squarepitch</span> <span class="err">pitch=</span><span class="m">1</span><span class="err">.</span><span class="m">8127</span> <span class="m">3</span> <span class="err">fuelr=</span><span class="m">0</span><span class="err">.</span><span class="m">45</span> <span class="m">1</span> <span class="err">cladd=</span><span class="m">0</span><span class="err">.</span><span class="m">9500</span> <span class="m">2</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">cell</span>
    <span class="n">read</span><span class="err"> </span><span class="n">model</span>
    <span class="err">pin-cell</span> <span class="err">model</span> <span class="err">with</span> <span class="err">MOX</span>
    <span class="n">read</span><span class="err"> </span><span class="n">parm</span>
      <span class="err">sn=</span><span class="m">16</span>
    <span class="n">end</span><span class="err"> </span><span class="n">parm</span>
    <span class="n">read</span><span class="err"> </span><span class="n">materials</span>
      <span class="err">mix=</span><span class="m">1</span> <span class="err">com=</span><span class="s">&#39;fuel&#39;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">2</span> <span class="err">com=</span><span class="s">&#39;clad&#39;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">3</span> <span class="err">com=</span><span class="s">&#39;moderator&#39;</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">materials</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geom</span>
      <span class="err">geom=cylinder</span>
      <span class="err">rightBC=white</span>
      <span class="err">zoneIDs</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneids</span>
      <span class="err">zoneDimensions</span> <span class="m">0</span><span class="err">.</span><span class="m">45</span> <span class="m">0</span><span class="err">.</span><span class="m">475</span> <span class="m">1</span><span class="err">.</span><span class="m">0006117</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneDimensions</span>
      <span class="err">zoneIntervals</span> <span class="m">3</span><span class="err">r</span><span class="m">10</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneIntervals</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geom</span>
    <span class="n">end</span><span class="err"> </span><span class="n">model</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">2]</span>
  <span class="err">sequence=t-xsdrn</span>           <span class="err">parm=</span><span class="m">2</span><span class="err">region</span>
    <span class="err">pin-cell</span> <span class="err">model</span> <span class="err">with</span> <span class="err">MOX</span>
    <span class="err">xn</span><span class="m">238</span><span class="err">v</span><span class="m">7</span>
    <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
      <span class="err">uo</span><span class="m">2</span>   <span class="m">1</span> <span class="m">0</span><span class="err">.</span><span class="m">95</span> <span class="err">#{temp}</span> <span class="m">92235</span> <span class="m">4</span><span class="err">.</span><span class="m">5</span> <span class="m">92238</span> <span class="m">95</span><span class="err">.</span><span class="m">5</span>   <span class="n">end</span>
      <span class="err">zirc</span><span class="m">2</span> <span class="m">2</span> <span class="m">1</span> <span class="m">600</span>   <span class="n">end</span>
      <span class="err">h</span><span class="m">2</span><span class="err">o</span>   <span class="m">3</span> <span class="err">den=#{rho}</span> <span class="m">0</span><span class="err">.</span><span class="m">9991</span> <span class="m">540</span>   <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">comp</span>
    <span class="n">read</span><span class="err"> </span><span class="n">cell</span>
      <span class="err">latticecell</span> <span class="err">squarepitch</span> <span class="err">pitch=</span><span class="m">1</span><span class="err">.</span><span class="m">9127</span> <span class="m">3</span> <span class="err">fuelr=</span><span class="m">0</span><span class="err">.</span><span class="m">45</span> <span class="m">1</span> <span class="err">cladd=</span><span class="m">0</span><span class="err">.</span><span class="m">9500</span> <span class="m">2</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">cell</span>
    <span class="n">read</span><span class="err"> </span><span class="n">model</span>
    <span class="err">pin-cell</span> <span class="err">model</span> <span class="err">with</span> <span class="err">MOX</span>
    <span class="n">read</span><span class="err"> </span><span class="n">parm</span>
      <span class="err">sn=</span><span class="m">16</span>
    <span class="n">end</span><span class="err"> </span><span class="n">parm</span>
    <span class="n">read</span><span class="err"> </span><span class="n">materials</span>
      <span class="err">mix=</span><span class="m">1</span> <span class="err">com=</span><span class="s">&#39;fuel&#39;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">2</span> <span class="err">com=</span><span class="s">&#39;clad&#39;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">3</span> <span class="err">com=</span><span class="s">&#39;moderator&#39;</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">materials</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geom</span>
      <span class="err">geom=cylinder</span>
      <span class="err">rightBC=white</span>
      <span class="err">zoneIDs</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneids</span>
      <span class="err">zoneDimensions</span> <span class="m">0</span><span class="err">.</span><span class="m">45</span> <span class="m">0</span><span class="err">.</span><span class="m">475</span> <span class="m">1</span><span class="err">.</span><span class="m">0406117</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneDimensions</span>
      <span class="err">zoneIntervals</span> <span class="m">3</span><span class="err">r</span><span class="m">10</span> <span class="n">end</span><span class="err"> </span><span class="n">zoneIntervals</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geom</span>
    <span class="n">end</span><span class="err"> </span><span class="n">model</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">rho</span><span class="err">]</span>
  <span class="err">distribution=uniform</span>
  <span class="err">minimum</span> <span class="err">=</span> <span class="m">0</span><span class="err">.</span><span class="m">5</span>
  <span class="err">value</span> <span class="err">=</span> <span class="m">0</span><span class="err">.</span><span class="m">65</span>
  <span class="err">maximum</span> <span class="err">=</span> <span class="m">0</span><span class="err">.</span><span class="m">8</span>
  <span class="err">cases</span> <span class="err">=</span> <span class="err">c</span><span class="m">1</span> <span class="err">c</span><span class="m">2</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>

<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">temp</span><span class="err">]</span>
  <span class="err">distribution=uniform</span>
  <span class="err">minimum</span> <span class="err">=</span> <span class="m">700</span>
  <span class="err">value</span> <span class="err">=</span> <span class="m">900</span>
  <span class="err">maximum</span> <span class="err">=</span> <span class="m">1100</span>
  <span class="err">cases</span> <span class="err">=</span> <span class="err">c</span><span class="m">1</span> <span class="err">c</span><span class="m">2</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">lambda</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">grep</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;:xsdrn.lambda:&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">end</span>
</pre></div>
</div>
<p>The dependency of eigenvalue on coolant density for the two systems is
printed to the output file, as shown in <a class="reference internal" href="#fig6-7-6"><span class="std std-numref">Fig. 102</span></a>, where the first
table shows the temperature and density combinations in the first two
columns and the corresponding eigenvalue from case 1 and case 2 in the
next two columns. Two summary tables are printed, identifying the
conditions of the maximum and minimum for each response, in each case.</p>
<div class="figure align-center" id="id76">
<span id="fig6-7-6"></span><a class="reference internal image-reference" href="_images/fig69.png"><img alt="_images/fig69.png" src="_images/fig69.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 102 </span><span class="caption-text">Dependency of lambda (k-eff) on coolant density and fuel
temperature for sample problem 2.</span><a class="headerlink" href="#id76" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="sample-problem-3">
<span id="id60"></span><h4>Sample problem 3<a class="headerlink" href="#sample-problem-3" title="Permalink to this headline">¶</a></h4>
<p>This sample problem demonstrates enrichment variation using SIREN
expressions and dependent variables.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">n_samples=</span><span class="m">50</span>
  <span class="err">perturb_geometry=yes</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">sphere</span><span class="err">]</span>
  <span class="err">sequence=csas</span><span class="m">5</span>     <span class="err">parm=bonami</span>
  <span class="err">sample</span> <span class="err">problem</span> <span class="m">14</span>  <span class="err">u</span> <span class="err">metal</span> <span class="err">cylinder</span> <span class="err">in</span> <span class="err">an</span> <span class="err">annulus</span>
  <span class="err">xn</span><span class="m">238</span><span class="err">v</span><span class="m">7</span>
  <span class="n">read</span><span class="err"> </span><span class="n">comp</span>
    <span class="err">uranium</span>  <span class="m">1</span> <span class="err">den=</span><span class="m">18</span><span class="err">.</span><span class="m">69</span> <span class="m">1</span> <span class="m">300</span>  <span class="m">92235</span> <span class="m">94</span><span class="err">.</span><span class="m">4</span> <span class="m">92238</span> <span class="m">5</span><span class="err">.</span><span class="m">6</span> <span class="n">end</span>
  <span class="n">end</span><span class="err"> </span><span class="n">comp</span>
  <span class="n">read</span><span class="err"> </span><span class="n">geom</span>
    <span class="err">global</span> <span class="err">unit</span> <span class="m">1</span>
      <span class="err">cylinder</span>  <span class="m">1</span> <span class="m">1</span> <span class="m">8</span><span class="err">.</span><span class="m">89</span> <span class="m">10</span><span class="err">.</span><span class="m">109</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span> <span class="err">orig</span> <span class="m">5</span><span class="err">.</span><span class="m">0799</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>
      <span class="err">cylinder</span>  <span class="m">0</span> <span class="m">1</span> <span class="m">13</span><span class="err">.</span><span class="m">97</span> <span class="m">10</span><span class="err">.</span><span class="m">109</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>
      <span class="err">cylinder</span>  <span class="m">1</span> <span class="m">1</span> <span class="m">19</span><span class="err">.</span><span class="m">05</span> <span class="m">10</span><span class="err">.</span><span class="m">109</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>
  <span class="n">end</span><span class="err"> </span><span class="n">geom</span>
  <span class="n">end</span><span class="err"> </span><span class="n">data</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
  <span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">u</span><span class="err">235]</span>
    <span class="err">distribution=uniform</span>
    <span class="err">minimum=</span><span class="m">91</span><span class="err">.</span><span class="m">0</span>
    <span class="err">value=</span><span class="m">94</span><span class="err">.</span><span class="m">4</span>
    <span class="err">maximum=</span><span class="m">95</span><span class="err">.</span><span class="m">0</span>
    <span class="err">siren=</span><span class="s">&quot;/csas5/comps/stdcomp/wtpt_pair[id=&#39;92235&#39;]/wtpt&quot;</span>
  <span class="n">end</span><span class="err"> </span><span class="n">variable</span>
  <span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">u</span><span class="err">238]</span>
    <span class="err">distribution=expression</span>
    <span class="err">expression=</span><span class="s">&quot;100.0-u235&quot;</span>
    <span class="err">siren=</span><span class="s">&quot;/csas5/comps/stdcomp/wtpt_pair[id=&#39;92238&#39;]/wtpt&quot;</span>
  <span class="n">end</span><span class="err"> </span><span class="n">variable</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">keff</span><span class="err">]</span>
  <span class="err">type=grep</span>
  <span class="err">regexp=</span><span class="s">&quot;:kenovi.keff:&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>
</pre></div>
</div>
<p>The distribution of the multiplication factor with the specified
enrichment distribution is shown in <a class="reference internal" href="#fig6-7-7"><span class="std std-numref">Fig. 103</span></a>.</p>
<div class="figure align-center" id="id77">
<span id="fig6-7-7"></span><a class="reference internal image-reference" href="_images/fig77.png"><img alt="_images/fig77.png" src="_images/fig77.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 103 </span><span class="caption-text">Distribution of multiplication factor with sampled enrichment distribution
for sample problem 3.</span><a class="headerlink" href="#id77" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="sample-problem-4">
<span id="id61"></span><h5>Sample problem 4<a class="headerlink" href="#sample-problem-4" title="Permalink to this headline">¶</a></h5>
<p>Sample problem 4 demonstrates sampling with covariance data for neutron
cross sections and fission product yields. Note that decay sampling does
not work with TRITON at this time due to not using the perturbed ORIGEN
decay libraries <em>directly</em>. Additionally, it demonstrates how to extract
reaction rates from a TRITON case, combining an additional OPUS run with
the <code class="docutils literal notranslate"><span class="pre">opus_plt</span></code> response.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">n_samples=</span><span class="m">100</span>
  <span class="err">library=</span><span class="s">&quot;xn238v7&quot;</span>
  <span class="err">perturb_xs</span> <span class="err">=</span> <span class="err">yes</span>
  <span class="err">perturb_decay</span> <span class="err">=</span> <span class="err">no</span>
  <span class="err">perturb_yields</span> <span class="err">=</span> <span class="err">yes</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=t-depl</span>  <span class="err">parm=(bonami,addnux=</span><span class="m">0</span><span class="err">)</span>
    <span class="err">pincell</span> <span class="err">model</span>
    <span class="err">xn</span><span class="m">238</span><span class="err">v</span><span class="m">7</span>
    <span class="n">read</span><span class="err"> </span><span class="n">composition</span>
     <span class="err">uo</span><span class="m">2</span>         <span class="m">10</span> <span class="m">0</span><span class="err">.</span><span class="m">95</span> <span class="m">900</span> <span class="m">92235</span> <span class="m">3</span><span class="err">.</span><span class="m">6</span> <span class="m">92238</span> <span class="m">96</span><span class="err">.</span><span class="m">4</span>   <span class="n">end</span>
     <span class="err">zirc</span><span class="m">2</span>       <span class="m">20</span> <span class="m">1</span> <span class="m">600</span>   <span class="n">end</span>
     <span class="err">h</span><span class="m">2</span><span class="err">o</span>         <span class="m">30</span> <span class="err">den=</span><span class="m">0</span><span class="err">.</span><span class="m">75</span> <span class="m">0</span><span class="err">.</span><span class="m">9991</span> <span class="m">540</span>   <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">composition</span>
    <span class="n">read</span><span class="err"> </span><span class="n">celldata</span>
      <span class="err">latticecell</span> <span class="err">squarepitch</span> <span class="err">pitch=</span><span class="m">1</span><span class="err">.</span><span class="m">2600</span> <span class="m">30</span> <span class="err">fuelr=</span><span class="m">0</span><span class="err">.</span><span class="m">4095</span> <span class="m">10</span> <span class="err">cladr=</span><span class="m">0</span><span class="err">.</span><span class="m">4750</span> <span class="m">20</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">celldata</span>
    <span class="n">read</span><span class="err"> </span><span class="n">depletion</span>
      <span class="m">10</span>
    <span class="n">end</span><span class="err"> </span><span class="n">depletion</span>
    <span class="n">read</span><span class="err"> </span><span class="n">burndata</span>
      <span class="err">power=</span><span class="m">25</span> <span class="err">burn=</span><span class="m">1200</span> <span class="err">nlib=</span><span class="m">30</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">burndata</span>
    <span class="n">read</span><span class="err"> </span><span class="n">model</span>
    <span class="n">read</span><span class="err"> </span><span class="n">materials</span>
      <span class="err">mix=</span><span class="m">10</span> <span class="err">com=</span><span class="s">&quot;4.5 enriched fuel&quot;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">20</span> <span class="err">com=</span><span class="s">&quot;cladding&quot;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">30</span> <span class="err">com=</span><span class="s">&quot;water&quot;</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">materials</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geom</span>
      <span class="err">global</span> <span class="err">unit</span> <span class="m">1</span>
        <span class="err">cylinder</span> <span class="m">10</span> <span class="m">0</span><span class="err">.</span><span class="m">4095</span>
        <span class="err">cylinder</span> <span class="m">20</span> <span class="m">0</span><span class="err">.</span><span class="m">4750</span>
        <span class="err">cuboid</span>   <span class="m">30</span> <span class="m">4</span><span class="err">p</span><span class="m">0</span><span class="err">.</span><span class="m">63</span>
        <span class="err">media</span> <span class="m">10</span> <span class="m">1</span> <span class="m">10</span>
        <span class="err">media</span> <span class="m">20</span> <span class="m">1</span> <span class="m">20</span> <span class="err">-</span><span class="m">10</span>
        <span class="err">media</span> <span class="m">30</span> <span class="m">1</span> <span class="m">30</span> <span class="err">-</span><span class="m">20</span>
      <span class="err">boundary</span> <span class="m">30</span> <span class="m">3</span> <span class="m">3</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geom</span>
    <span class="n">read</span><span class="err"> </span><span class="n">collapse</span>
     <span class="m">150</span><span class="err">r</span><span class="m">1</span> <span class="m">88</span><span class="err">r</span><span class="m">2</span>
    <span class="n">end</span><span class="err"> </span><span class="n">collapse</span>
    <span class="n">read</span><span class="err"> </span><span class="n">homog</span>
      <span class="m">500</span> <span class="err">mini</span> <span class="m">10</span> <span class="m">20</span> <span class="m">30</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">homog</span>
    <span class="n">read</span><span class="err"> </span><span class="n">bounds</span>
      <span class="err">all=refl</span>
    <span class="n">end</span><span class="err"> </span><span class="n">bounds</span>
    <span class="n">end</span><span class="err"> </span><span class="n">model</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
  <span class="err">sequence=opus</span>
    <span class="err">typarams=nuclides</span>
    <span class="err">units=fissions</span>
    <span class="err">symnuc=u</span><span class="m">238</span> <span class="err">pu</span><span class="m">239</span> <span class="n">end</span>
    <span class="err">library=</span><span class="s">&quot;ft33f001.cmbined&quot;</span>
    <span class="err">case</span> <span class="err">=</span> <span class="m">10</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
  <span class="err">sequence=opus</span>
    <span class="err">typarams=nuclides</span>
    <span class="err">units=captures</span>
    <span class="err">symnuc=u</span><span class="m">238</span> <span class="err">pu</span><span class="m">239</span> <span class="n">end</span>
    <span class="err">library=</span><span class="s">&quot;ft33f001.cmbined&quot;</span>
    <span class="err">case</span> <span class="err">=</span> <span class="m">10</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">hmgxs</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">triton</span>
  <span class="err">mixture</span> <span class="err">=</span> <span class="m">1</span>
  <span class="err">data</span> <span class="err">=</span> <span class="err">kinf</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">concentrations</span><span class="err">]</span>
  <span class="err">type=origen_nuclides</span>
  <span class="err">nuclides</span> <span class="err">=</span> <span class="err">u-</span><span class="m">235</span> <span class="err">pu-</span><span class="m">239</span> <span class="err">pu-</span><span class="m">240</span> <span class="err">pu-</span><span class="m">241</span> <span class="err">nd-</span><span class="m">148</span> <span class="err">sm-</span><span class="m">149</span> <span class="err">sm-</span><span class="m">150</span> <span class="err">sm-</span><span class="m">151</span> <span class="err">cs-</span><span class="m">133</span> <span class="err">cs-</span><span class="m">134</span> <span class="err">cs-</span><span class="m">137</span> <span class="n">end</span>
  <span class="err">mixture</span> <span class="err">=</span> <span class="m">10</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">fisrates</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">opus_plt</span>
  <span class="err">ndataset</span> <span class="err">=</span> <span class="m">1</span>
  <span class="err">nuclides</span> <span class="err">=</span> <span class="err">u</span><span class="m">238</span> <span class="err">pu</span><span class="m">239</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">caprates</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">opus_plt</span>
  <span class="err">ndataset</span> <span class="err">=</span> <span class="m">2</span>
  <span class="err">nuclides</span> <span class="err">=</span> <span class="err">u</span><span class="m">238</span> <span class="err">pu</span><span class="m">239</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">end</span>
</pre></div>
</div>
<p>Plots of various isotopic uncertainties as a function of time are shown
in <a class="reference internal" href="#fig6-7-8"><span class="std std-numref">Fig. 104</span></a> for <sup>235</sup>U, <a class="reference internal" href="#fig6-7-9"><span class="std std-numref">Fig. 105</span></a> for <sup>239</sup>Pu,
<a class="reference internal" href="#fig6-7-10"><span class="std std-numref">Fig. 106</span></a> for <sup>240</sup>Pu, <a class="reference internal" href="#fig6-7-11"><span class="std std-numref">Fig. 107</span></a> for <sup>241</sup>Pu,
<a class="reference internal" href="#fig6-7-12"><span class="std std-numref">Fig. 108</span></a> for <sup>148</sup>Nd, <a class="reference internal" href="#fig6-7-13"><span class="std std-numref">Fig. 109</span></a> for <sup>150</sup>Sm, and
<a class="reference internal" href="#fig6-7-14"><span class="std std-numref">Fig. 110</span></a> for <sup>151</sup>Sm in terms of the unperturbed with error
bars for the <em>minimum</em> and <em>maximum</em>, that is over the 100 samples
performed, the minimum value at that time and the maximum value at that
time. Note that most isotopes accumulate uncertainty over time, but this
is not always the case, e.g. for <sup>151</sup>Sm. Two common burnup
indicators (measured in spent fuel to infer/confirm burnup)
<sup>148</sup>Nd and <sup>150</sup>Sm show linear increase with time (as
expected for a burnup indicator).</p>
<div class="figure align-center" id="id78">
<span id="fig6-7-8"></span><a class="reference internal image-reference" href="_images/fig86.png"><img alt="_images/fig86.png" src="_images/fig86.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 104 </span><span class="caption-text">Uncertainty in <sup>235</sup>U concentration for problem 4.</span><a class="headerlink" href="#id78" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id79">
<span id="fig6-7-9"></span><a class="reference internal image-reference" href="_images/fig94.png"><img alt="_images/fig94.png" src="_images/fig94.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 105 </span><span class="caption-text">Uncertainty in <sup>239</sup>Pu concentration for problem 4.</span><a class="headerlink" href="#id79" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id80">
<span id="fig6-7-10"></span><a class="reference internal image-reference" href="_images/fig104.png"><img alt="_images/fig104.png" src="_images/fig104.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 106 </span><span class="caption-text">Uncertainty in <sup>240</sup>Pu concentration for problem 4.</span><a class="headerlink" href="#id80" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id81">
<span id="fig6-7-11"></span><a class="reference internal image-reference" href="_images/fig1110.png"><img alt="_images/fig1110.png" src="_images/fig1110.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 107 </span><span class="caption-text">Uncertainty in <sup>241</sup>Pu concentration for problem 4.</span><a class="headerlink" href="#id81" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id82">
<span id="fig6-7-12"></span><a class="reference internal image-reference" href="_images/fig1210.png"><img alt="_images/fig1210.png" src="_images/fig1210.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 108 </span><span class="caption-text">Uncertainty in <sup>148</sup>Nd concentration for problem 4.</span><a class="headerlink" href="#id82" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id83">
<span id="fig6-7-13"></span><a class="reference internal image-reference" href="_images/fig135.png"><img alt="_images/fig135.png" src="_images/fig135.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 109 </span><span class="caption-text">Uncertainty in <sup>150</sup>Sm concentration for problem 4.</span><a class="headerlink" href="#id83" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id84">
<span id="fig6-7-14"></span><a class="reference internal image-reference" href="_images/fig146.png"><img alt="_images/fig146.png" src="_images/fig146.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 110 </span><span class="caption-text">Uncertainty in <sup>151</sup>Sm concentration for problem 4.</span><a class="headerlink" href="#id84" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="sample-problem-5">
<span id="id62"></span><h4>Sample problem 5<a class="headerlink" href="#sample-problem-5" title="Permalink to this headline">¶</a></h4>
<p>This problem provides an example of two correlated depletion cases. The second
“c2” case has a larger pitch and lower enrichment fuel. All data libraries are
perturbed.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">n_samples</span> <span class="err">=</span> <span class="m">100</span>
  <span class="err">library</span> <span class="err">=</span> <span class="s">&quot;xn238v7&quot;</span>
  <span class="err">perturb_xs</span> <span class="err">=</span> <span class="err">yes</span>
  <span class="err">perturb_yields</span> <span class="err">=</span> <span class="err">yes</span>
  <span class="err">perturb_decay</span> <span class="err">=</span> <span class="err">yes</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">1]</span>
  <span class="err">sequence=t-depl</span>  <span class="err">parm=(bonami,addnux=</span><span class="m">0</span><span class="err">)</span>
    <span class="err">pincell</span> <span class="err">model</span>
    <span class="err">xn</span><span class="m">238</span><span class="err">v</span><span class="m">7</span>
    <span class="n">read</span><span class="err"> </span><span class="n">composition</span>
     <span class="err">uo</span><span class="m">2</span>         <span class="m">10</span> <span class="m">0</span><span class="err">.</span><span class="m">95</span> <span class="m">900</span> <span class="m">92235</span> <span class="m">3</span><span class="err">.</span><span class="m">6</span> <span class="m">92238</span> <span class="m">96</span><span class="err">.</span><span class="m">4</span>   <span class="n">end</span>
     <span class="err">zirc</span><span class="m">2</span>       <span class="m">20</span> <span class="m">1</span> <span class="m">600</span>   <span class="n">end</span>
     <span class="err">h</span><span class="m">2</span><span class="err">o</span>         <span class="m">30</span> <span class="err">den=</span><span class="m">0</span><span class="err">.</span><span class="m">75</span> <span class="m">0</span><span class="err">.</span><span class="m">9991</span> <span class="m">540</span>   <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">composition</span>
    <span class="n">read</span><span class="err"> </span><span class="n">celldata</span>
      <span class="err">latticecell</span> <span class="err">squarepitch</span> <span class="err">pitch=</span><span class="m">1</span><span class="err">.</span><span class="m">2600</span> <span class="m">30</span> <span class="err">fuelr=</span><span class="m">0</span><span class="err">.</span><span class="m">4095</span> <span class="m">10</span> <span class="err">cladr=</span><span class="m">0</span><span class="err">.</span><span class="m">4750</span> <span class="m">20</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">celldata</span>
    <span class="n">read</span><span class="err"> </span><span class="n">depletion</span>
      <span class="m">10</span>
    <span class="n">end</span><span class="err"> </span><span class="n">depletion</span>
    <span class="n">read</span><span class="err"> </span><span class="n">burndata</span>
      <span class="err">power=</span><span class="m">25</span> <span class="err">burn=</span><span class="m">1200</span> <span class="err">nlib=</span><span class="m">30</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">burndata</span>
    <span class="n">read</span><span class="err"> </span><span class="n">model</span>
    <span class="n">read</span><span class="err"> </span><span class="n">materials</span>
      <span class="err">mix=</span><span class="m">10</span> <span class="err">com=</span><span class="s">&quot;4.5 enriched fuel&quot;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">20</span> <span class="err">com=</span><span class="s">&quot;cladding&quot;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">30</span> <span class="err">com=</span><span class="s">&quot;water&quot;</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">materials</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geom</span>
      <span class="err">global</span> <span class="err">unit</span> <span class="m">1</span>
        <span class="err">cylinder</span> <span class="m">10</span> <span class="m">0</span><span class="err">.</span><span class="m">4095</span>
        <span class="err">cylinder</span> <span class="m">20</span> <span class="m">0</span><span class="err">.</span><span class="m">4750</span>
        <span class="err">cuboid</span>   <span class="m">30</span> <span class="m">4</span><span class="err">p</span><span class="m">0</span><span class="err">.</span><span class="m">63</span>
        <span class="err">media</span> <span class="m">10</span> <span class="m">1</span> <span class="m">10</span>
        <span class="err">media</span> <span class="m">20</span> <span class="m">1</span> <span class="m">20</span> <span class="err">-</span><span class="m">10</span>
        <span class="err">media</span> <span class="m">30</span> <span class="m">1</span> <span class="m">30</span> <span class="err">-</span><span class="m">20</span>
      <span class="err">boundary</span> <span class="m">30</span> <span class="m">3</span> <span class="m">3</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geom</span>
    <span class="n">read</span><span class="err"> </span><span class="n">collapse</span>
     <span class="m">150</span><span class="err">r</span><span class="m">1</span> <span class="m">88</span><span class="err">r</span><span class="m">2</span>
    <span class="n">end</span><span class="err"> </span><span class="n">collapse</span>
    <span class="n">read</span><span class="err"> </span><span class="n">homog</span>
      <span class="m">500</span> <span class="err">mini</span> <span class="m">10</span> <span class="m">20</span> <span class="m">30</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">homog</span>
    <span class="n">read</span><span class="err"> </span><span class="n">bounds</span>
      <span class="err">all=refl</span>
    <span class="n">end</span><span class="err"> </span><span class="n">bounds</span>
    <span class="n">end</span><span class="err"> </span><span class="n">model</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">c</span><span class="err">2]</span>
  <span class="err">sequence=t-depl</span>  <span class="err">parm=(bonami,addnux=</span><span class="m">0</span><span class="err">)</span>
    <span class="err">pincell</span> <span class="err">model</span>
    <span class="err">xn</span><span class="m">238</span><span class="err">v</span><span class="m">7</span>
    <span class="n">read</span><span class="err"> </span><span class="n">composition</span>
     <span class="err">uo</span><span class="m">2</span>         <span class="m">10</span> <span class="m">0</span><span class="err">.</span><span class="m">95</span> <span class="m">900</span> <span class="m">92235</span> <span class="m">3</span><span class="err">.</span><span class="m">6</span> <span class="m">92238</span> <span class="m">96</span><span class="err">.</span><span class="m">4</span>   <span class="n">end</span>
     <span class="err">zirc</span><span class="m">2</span>       <span class="m">20</span> <span class="m">1</span> <span class="m">600</span>   <span class="n">end</span>
     <span class="err">h</span><span class="m">2</span><span class="err">o</span>         <span class="m">30</span> <span class="err">den=</span><span class="m">0</span><span class="err">.</span><span class="m">75</span> <span class="m">0</span><span class="err">.</span><span class="m">9991</span> <span class="m">540</span>   <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">composition</span>
    <span class="n">read</span><span class="err"> </span><span class="n">celldata</span>
      <span class="err">latticecell</span> <span class="err">squarepitch</span> <span class="err">pitch=</span><span class="m">1</span><span class="err">.</span><span class="m">6600</span> <span class="m">30</span> <span class="err">fuelr=</span><span class="m">0</span><span class="err">.</span><span class="m">4095</span> <span class="m">10</span> <span class="err">cladr=</span><span class="m">0</span><span class="err">.</span><span class="m">4750</span> <span class="m">20</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">celldata</span>
    <span class="n">read</span><span class="err"> </span><span class="n">depletion</span>
      <span class="m">10</span>
    <span class="n">end</span><span class="err"> </span><span class="n">depletion</span>
    <span class="n">read</span><span class="err"> </span><span class="n">burndata</span>
      <span class="err">power=</span><span class="m">25</span> <span class="err">burn=</span><span class="m">1200</span> <span class="err">nlib=</span><span class="m">30</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">burndata</span>
    <span class="n">read</span><span class="err"> </span><span class="n">model</span>
    <span class="n">read</span><span class="err"> </span><span class="n">materials</span>
      <span class="err">mix=</span><span class="m">10</span> <span class="err">com=</span><span class="s">&quot;3.6 enriched fuel&quot;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">20</span> <span class="err">com=</span><span class="s">&quot;cladding&quot;</span> <span class="n">end</span>
      <span class="err">mix=</span><span class="m">30</span> <span class="err">com=</span><span class="s">&quot;water&quot;</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">materials</span>
    <span class="n">read</span><span class="err"> </span><span class="n">geom</span>
      <span class="err">global</span> <span class="err">unit</span> <span class="m">1</span>
        <span class="err">cylinder</span> <span class="m">10</span> <span class="m">0</span><span class="err">.</span><span class="m">4095</span>
        <span class="err">cylinder</span> <span class="m">20</span> <span class="m">0</span><span class="err">.</span><span class="m">4750</span>
        <span class="err">cuboid</span>   <span class="m">30</span> <span class="m">4</span><span class="err">p</span><span class="m">0</span><span class="err">.</span><span class="m">83</span>
        <span class="err">media</span> <span class="m">10</span> <span class="m">1</span> <span class="m">10</span>
        <span class="err">media</span> <span class="m">20</span> <span class="m">1</span> <span class="m">20</span> <span class="err">-</span><span class="m">10</span>
        <span class="err">media</span> <span class="m">30</span> <span class="m">1</span> <span class="m">30</span> <span class="err">-</span><span class="m">20</span>
      <span class="err">boundary</span> <span class="m">30</span> <span class="m">3</span> <span class="m">3</span>
    <span class="n">end</span><span class="err"> </span><span class="n">geom</span>
    <span class="n">read</span><span class="err"> </span><span class="n">collapse</span>
     <span class="m">150</span><span class="err">r</span><span class="m">1</span> <span class="m">88</span><span class="err">r</span><span class="m">2</span>
    <span class="n">end</span><span class="err"> </span><span class="n">collapse</span>
    <span class="n">read</span><span class="err"> </span><span class="n">homog</span>
      <span class="m">500</span> <span class="err">mini</span> <span class="m">10</span> <span class="m">20</span> <span class="m">30</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">homog</span>
    <span class="n">read</span><span class="err"> </span><span class="n">bounds</span>
      <span class="err">all=refl</span>
    <span class="n">end</span><span class="err"> </span><span class="n">bounds</span>
    <span class="n">end</span><span class="err"> </span><span class="n">model</span>
  <span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">concentrations</span><span class="err">]</span>
  <span class="err">type=origen_nuclides</span>
  <span class="err">nuclides</span> <span class="err">=</span> <span class="err">u-</span><span class="m">235</span> <span class="err">pu-</span><span class="m">239</span> <span class="err">pu-</span><span class="m">240</span> <span class="err">pu-</span><span class="m">241</span> <span class="err">nd-</span><span class="m">148</span> <span class="err">sm-</span><span class="m">149</span> <span class="err">sm-</span><span class="m">150</span> <span class="err">sm-</span><span class="m">151</span> <span class="err">cs-</span><span class="m">133</span> <span class="err">cs-</span><span class="m">134</span> <span class="err">cs-</span><span class="m">137</span> <span class="n">end</span>
  <span class="err">mixture</span> <span class="err">=</span> <span class="m">10</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">end</span>
</pre></div>
</div>
<p>The correlation matrix for concentrations at 1200 days of irradiation is
shown in <a class="reference internal" href="#fig6-7-15"><span class="std std-numref">Fig. 111</span></a>, post-processed with Excel to show high and low
correlation coefficients. The bold and underline entries indicate that
the each extracted isotope shows a correlation coefficient of 1.0
between the two cases. This means that the two cases are the same in
terms of their isotopic response to data perturbations.</p>
<div class="figure align-center" id="id85">
<span id="fig6-7-15"></span><a class="reference internal image-reference" href="_images/fig153.png"><img alt="_images/fig153.png" src="_images/fig153.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 111 </span><span class="caption-text">Correlation matrix for concentrations in sample problem 5.</span><a class="headerlink" href="#id85" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="sample-problem-6">
<span id="id63"></span><h4>Sample problem 6<a class="headerlink" href="#sample-problem-6" title="Permalink to this headline">¶</a></h4>
<p>Sample problem 6 provides an example of fission yield and decay data
sampling. First, COUPLE is run to assemble an ORIGEN library (on file
ft33f001) from the perturbed yields and decay data libraries. Burst
fission with long decay is then performed by ORIGEN and OPUS is used to
extract the fission product decay heat.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">n_samples</span> <span class="err">=</span> <span class="m">500</span>
  <span class="err">perturb_yields</span> <span class="err">=</span> <span class="err">yes</span>
  <span class="err">perturb_decay</span> <span class="err">=</span> <span class="err">yes</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">heat</span><span class="err">]</span>
<span class="err">sequence=couple</span>

<span class="m">0</span><span class="err">$$</span> <span class="err">a</span><span class="m">3</span> <span class="m">80</span> <span class="m">21</span> <span class="m">0</span> <span class="m">33</span> <span class="err">e</span>
<span class="m">1</span><span class="err">$$</span> <span class="err">a</span><span class="m">4</span> <span class="m">1</span> <span class="err">a</span><span class="m">18</span> <span class="m">238</span> <span class="err">e</span> <span class="m">1</span><span class="err">t</span>
<span class="m">9</span><span class="err">**</span>
 <span class="m">13</span><span class="err">z</span> <span class="m">1</span><span class="err">.</span><span class="m">25</span> <span class="m">0</span><span class="err">.</span><span class="m">3</span> <span class="m">223</span><span class="err">z</span>
<span class="m">2</span><span class="err">t</span>
<span class="err">done</span>
<span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="err">sequence=origens</span>
<span class="m">3</span><span class="err">$$</span> <span class="m">1</span> <span class="m">1</span> <span class="err">e</span> <span class="err">t</span>
<span class="err">ft</span><span class="m">33</span><span class="err">f</span><span class="m">001</span>
<span class="m">56</span><span class="err">$$</span> <span class="m">40</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="err">-</span><span class="m">1</span> <span class="err">a</span><span class="m">9</span> <span class="m">0</span> <span class="m">1</span> <span class="m">2</span> <span class="m">1</span> <span class="m">1</span> <span class="err">e</span>
<span class="err">t</span>
<span class="err">u</span><span class="m">235</span> <span class="err">thermal</span> <span class="err">fission</span> <span class="err">energy</span> <span class="err">release</span>
<span class="m">59</span><span class="err">**</span>  <span class="m">3</span><span class="err">.</span><span class="m">08617</span><span class="err">e</span><span class="m">12</span> <span class="err">f</span><span class="m">0</span> <span class="err">e</span>
<span class="m">60</span><span class="err">**</span> <span class="m">1</span><span class="err">e-</span><span class="m">10</span> <span class="m">1</span> <span class="m">1</span><span class="err">.</span><span class="m">5</span> <span class="m">2</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span> <span class="m">10</span> <span class="m">15</span> <span class="m">20</span> <span class="m">40</span> <span class="m">60</span> <span class="m">80</span> <span class="m">100</span>
     <span class="m">150</span> <span class="m">200</span> <span class="m">400</span> <span class="m">600</span> <span class="m">800</span> <span class="m">1000</span> <span class="m">1500</span> <span class="m">2000</span> <span class="m">4000</span> <span class="m">6000</span> <span class="m">8000 1e4</span>
     <span class="m">1</span><span class="err">.</span><span class="m">5</span><span class="err">e</span><span class="m">4</span> <span class="m">2</span><span class="err">e</span><span class="m">4</span> <span class="m">4</span><span class="err">e</span><span class="m">4</span> <span class="m">6</span><span class="err">e</span><span class="m">4</span> <span class="m">8</span><span class="err">e</span><span class="m">4 1e5</span>
     <span class="m">1</span><span class="err">e</span><span class="m">6</span> <span class="m">1</span><span class="err">e</span><span class="m">7</span> <span class="m">1</span><span class="err">e</span><span class="m">8</span> <span class="m">1</span><span class="err">e</span><span class="m">9</span> <span class="m">1</span><span class="err">e</span><span class="m">10</span> <span class="m">1</span><span class="err">e</span><span class="m">11</span> <span class="m">1</span><span class="err">e</span><span class="m">12 1e13</span>
<span class="m">61</span><span class="err">**</span> <span class="err">f</span><span class="m">1</span><span class="err">e-</span><span class="m">14</span>
<span class="m">67</span><span class="err">$$</span> <span class="err">a</span><span class="m">47</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="err">e</span>
<span class="m">68</span><span class="err">$$</span> <span class="err">a</span><span class="m">2</span> <span class="m">1</span> <span class="err">e</span>
<span class="m">73</span><span class="err">$$</span> <span class="m">922350</span>
<span class="m">74</span><span class="err">**</span> <span class="m">1</span>
<span class="m">75</span><span class="err">$$</span> <span class="m">2</span>
<span class="m">80</span><span class="err">$$</span> <span class="m">0</span> <span class="err">f</span><span class="m">1</span>
<span class="err">t</span>
<span class="err">ft</span><span class="m">71</span><span class="err">f</span><span class="m">001</span>
<span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="err">sequence=opus</span>
  <span class="err">library=</span><span class="s">&quot;ft33f001&quot;</span>
  <span class="err">units=watts</span>
  <span class="err">libtype=fiss</span>
  <span class="err">minposition=</span><span class="m">2</span>
<span class="n">end</span><span class="err"> </span><span class="n">sequence</span>
<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">heat</span><span class="err">]</span>
  <span class="err">type=opus_plt</span>
  <span class="err">ndataset=</span><span class="m">0</span>
  <span class="err">nuclides=total</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">end</span>
</pre></div>
</div>
<p>The total decay heat with the uncertainty is shown in <a class="reference internal" href="#tab6-7-7"><span class="std std-numref">Table 119</span></a> and <a class="reference internal" href="#fig6-7-16"><span class="std std-numref">Fig. 112</span></a>.</p>
<span id="tab6-7-7"></span><table class="docutils align-center" id="id86">
<caption><span class="caption-number">Table 119 </span><span class="caption-text">Decay heat and uncertainties from sample problem 6.</span><a class="headerlink" href="#id86" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/tab7.svg"><img alt="_images/tab7.svg" src="_images/tab7.svg" width="1000" /></a>
</td>
</tr>
</tbody>
</table>
<div class="figure align-center" id="id87">
<span id="fig6-7-16"></span><a class="reference internal image-reference" href="_images/fig162.png"><img alt="_images/fig162.png" src="_images/fig162.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 112 </span><span class="caption-text">Decay heat and uncertainties from sample problem 6.</span><a class="headerlink" href="#id87" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="sample-problem-7">
<span id="id64"></span><h4>Sample problem 7<a class="headerlink" href="#sample-problem-7" title="Permalink to this headline">¶</a></h4>
<p>Sample problem 7 illustrates an example of a shielding parametric study
with MAVRIC. It also demonstrates usage of the grep response for both
response value and uncertainty.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=%sampler</span>

<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
  <span class="err">n_samples</span> <span class="err">=</span> <span class="m">50</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>

<span class="n">read</span><span class="err"> </span><span class="n">parametric</span>
  <span class="err">variables</span> <span class="err">=</span> <span class="err">thick</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">parametric</span>

<span class="n">read</span><span class="err"> </span><span class="n">case</span><span class="err">[</span><span class="n">graphite</span><span class="err">]</span>
<span class="err">sequence=mavric</span>
<span class="err">Monaco/MAVRIC</span> <span class="err">Training</span> <span class="err">-</span> <span class="err">Exercise</span> <span class="m">3</span><span class="err">.</span> <span class="err">Graphite</span> <span class="err">Shielding</span> <span class="err">Measurements</span> <span class="err">Revisited</span>
<span class="err">v</span><span class="m">7</span><span class="err">-</span><span class="m">27</span><span class="err">n</span><span class="m">19</span><span class="err">g</span>

<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="c">&#39; Composition Block - standard SCALE input</span>
<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="n">read</span><span class="err"> </span><span class="n">composition</span>
    <span class="err">para(h</span><span class="m">2</span><span class="err">o)</span>    <span class="m">3</span>         <span class="m">1</span><span class="err">.</span><span class="m">0</span> <span class="m">293</span><span class="err">.</span><span class="m">0</span> <span class="n">end</span>
    <span class="err">carbon</span>       <span class="m">4</span> <span class="err">den=</span><span class="m">1</span><span class="err">.</span><span class="m">7</span>  <span class="m">1</span><span class="err">.</span><span class="m">0</span> <span class="m">300</span><span class="err">.</span><span class="m">0</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">composition</span>

<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="c">&#39; Geometry Block - SCALE standard geometry package (SGGP)</span>
<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="n">read</span><span class="err"> </span><span class="n">geometry</span>
    <span class="err">global</span> <span class="err">unit</span> <span class="m">1</span>
        <span class="err">cuboid</span>  <span class="m">1</span>   <span class="m">25</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">25</span><span class="err">.</span><span class="m">0</span>  <span class="m">25</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">25</span><span class="err">.</span><span class="m">0</span>   <span class="m">25</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">25</span><span class="err">.</span><span class="m">0</span>
        <span class="err">cone</span>    <span class="m">2</span>  <span class="m">10</span><span class="err">.</span><span class="m">35948</span>  <span class="m">25</span><span class="err">.</span><span class="m">01</span>   <span class="m">0</span><span class="err">.</span><span class="m">0</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>   <span class="err">rotate</span>  <span class="err">a</span><span class="m">1</span><span class="err">=-</span><span class="m">90</span> <span class="err">a</span><span class="m">2</span><span class="err">=-</span><span class="m">90</span> <span class="err">a</span><span class="m">3</span><span class="err">=</span><span class="m">0</span>
        <span class="err">cuboid</span>  <span class="m">3</span>   <span class="err">#{x</span><span class="m">90</span><span class="err">}</span>  <span class="m">70</span><span class="err">.</span><span class="m">0</span>  <span class="m">40</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">40</span><span class="err">.</span><span class="m">0</span>   <span class="m">40</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">40</span><span class="err">.</span><span class="m">0</span>
        <span class="err">cuboid</span> <span class="m">99</span>  <span class="m">120</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">30</span><span class="err">.</span><span class="m">0</span>  <span class="m">50</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">50</span><span class="err">.</span><span class="m">0</span>   <span class="m">50</span><span class="err">.</span><span class="m">0</span> <span class="err">-</span><span class="m">50</span><span class="err">.</span><span class="m">0</span>
        <span class="err">media</span> <span class="m">3</span> <span class="m">1</span>  <span class="m">1</span> <span class="err">-</span><span class="m">2</span>
        <span class="err">media</span> <span class="m">0</span> <span class="m">1</span>  <span class="m">2</span>
        <span class="err">media</span> <span class="m">4</span> <span class="m">1</span>  <span class="m">3</span>
        <span class="err">media</span> <span class="m">0</span> <span class="m">1</span>  <span class="m">99</span> <span class="err">-</span><span class="m">1</span>  <span class="err">-</span><span class="m">2</span> <span class="err">-</span><span class="m">3</span>
    <span class="err">boundary</span> <span class="m">99</span>
<span class="n">end</span><span class="err"> </span><span class="n">geometry</span>

<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="c">&#39; Definitions Block</span>
<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="n">read</span><span class="err"> </span><span class="n">definitions</span>
    <span class="err">location</span> <span class="m">1</span>
        <span class="err">position</span> <span class="m">110</span> <span class="m">0</span> <span class="m">0</span>
    <span class="n">end</span><span class="err"> </span><span class="n">location</span>
    <span class="err">response</span> <span class="m">5</span>
        <span class="err">title=</span><span class="s">&quot;ANSI standard (1977) neutron flux-to-dose-rate factors&quot;</span>
        <span class="err">specialDose=</span><span class="m">9029</span>
    <span class="n">end</span><span class="err"> </span><span class="n">response</span>
    <span class="err">distribution</span> <span class="m">1</span>
        <span class="err">title=</span><span class="s">&quot;Cf-252 neutrons, Watt spectrum a=1.025 MeV and b=2.926/MeV&quot;</span>
        <span class="err">special=</span><span class="s">&quot;wattSpectrum&quot;</span>
        <span class="err">parameters</span> <span class="m">1</span><span class="err">.</span><span class="m">025</span> <span class="m">2</span><span class="err">.</span><span class="m">926</span> <span class="n">end</span>
    <span class="n">end</span><span class="err"> </span><span class="n">distribution</span>
    <span class="err">gridGeometry</span> <span class="m">7</span>
        <span class="err">title=</span><span class="s">&quot;large meshes in paraffin, 5 cm mesh for shield thicknesses&quot;</span>
        <span class="err">xLinear</span> <span class="m">5</span> <span class="err">-</span><span class="m">25</span> <span class="m">25</span>
        <span class="err">xLinear</span> <span class="m">12</span> <span class="m">30</span> <span class="err">#{x</span><span class="m">90</span><span class="err">}</span>
        <span class="err">xplanes</span> <span class="m">100</span> <span class="m">110</span> <span class="m">120</span> <span class="err">-</span><span class="m">30</span> <span class="n">end</span>
        <span class="err">yplanes</span> <span class="err">-</span><span class="m">50</span> <span class="err">-</span><span class="m">40</span> <span class="m">40</span> <span class="m">50</span> <span class="n">end</span>
        <span class="err">yLinear</span> <span class="m">7</span> <span class="err">-</span><span class="m">35</span> <span class="m">35</span>
        <span class="err">zplanes</span> <span class="err">-</span><span class="m">50</span> <span class="err">-</span><span class="m">40</span> <span class="m">40</span> <span class="m">50</span> <span class="n">end</span>
        <span class="err">zLinear</span> <span class="m">7</span> <span class="err">-</span><span class="m">35</span> <span class="m">35</span>
    <span class="n">end</span><span class="err"> </span><span class="n">gridGeometry</span>
<span class="n">end</span><span class="err"> </span><span class="n">definitions</span>

<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="c">&#39; Sources Block</span>
<span class="c">&#39;   Cf-252 neutrons, Watt fission spectrum model</span>
<span class="c">&#39;   with a=1.025 MeV and  b=2.926/MeV</span>
<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="n">read</span><span class="err"> </span><span class="n">sources</span>
    <span class="err">src</span> <span class="m">1</span>
        <span class="err">title=</span><span class="s">&quot;Cf-252 neutrons, Watt fission spectrum model&quot;</span>
        <span class="err">strength</span><span class="m">=4.05E+07</span>
        <span class="err">cuboid</span>  <span class="m">0</span><span class="err">.</span><span class="m">01</span> <span class="m">0</span><span class="err">.</span><span class="m">01</span>  <span class="m">0</span> <span class="m">0</span>  <span class="m">0</span> <span class="m">0</span>
        <span class="err">neutrons</span>
        <span class="err">eDistributionID=</span><span class="m">1</span>
    <span class="n">end</span><span class="err"> </span><span class="n">src</span>
<span class="n">end</span><span class="err"> </span><span class="n">sources</span>

<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="c">&#39; Tallies Block</span>
<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="n">read</span><span class="err"> </span><span class="n">tallies</span>
    <span class="err">pointDetector</span> <span class="m">1</span>
        <span class="err">title=</span><span class="s">&quot;center of detector&quot;</span>
        <span class="err">neutron</span>
        <span class="err">locationID=</span><span class="m">1</span>
        <span class="err">responseID=</span><span class="m">5</span>
    <span class="n">end</span><span class="err"> </span><span class="n">pointDetector</span>
    <span class="err">meshTally</span> <span class="m">1</span>
        <span class="err">title=</span><span class="s">&quot;example mesh tally&quot;</span>
        <span class="err">neutron</span>
        <span class="err">gridGeometryID=</span><span class="m">7</span>
        <span class="err">responseID=</span><span class="m">5</span>
        <span class="err">noGroupFluxes</span>
    <span class="n">end</span><span class="err"> </span><span class="n">meshTally</span>
<span class="n">end</span><span class="err"> </span><span class="n">tallies</span>

<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="c">&#39; Parameters Block</span>
<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="n">read</span><span class="err"> </span><span class="n">parameters</span>
    <span class="err">randomSeed=</span><span class="m">00003</span><span class="err">ecd</span><span class="m">7</span><span class="err">b</span><span class="m">4</span><span class="err">e</span><span class="m">3</span><span class="err">e</span><span class="m">8</span><span class="err">b</span>
    <span class="err">library=</span><span class="s">&quot;v7-200n47g&quot;</span>
    <span class="err">perBatch=</span><span class="m">10000</span> <span class="err">batches=</span><span class="m">10</span>
    <span class="err">fissionMult=</span><span class="m">0</span>   <span class="err">noPhotons</span>
<span class="n">end</span><span class="err"> </span><span class="n">parameters</span>

<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="c">&#39; Importance Map Block</span>
<span class="c">&#39;-------------------------------------------------------------------------------</span>
<span class="n">read</span><span class="err"> </span><span class="n">importanceMap</span>
    <span class="err">adjointSource</span> <span class="m">1</span>
        <span class="err">locationID=</span><span class="m">1</span>
        <span class="err">responseID=</span><span class="m">5</span>
    <span class="n">end</span><span class="err"> </span><span class="n">adjointSource</span>
    <span class="err">gridGeometryID=</span><span class="m">7</span>
    <span class="err">mmTolerance=</span><span class="m">0</span><span class="err">.</span><span class="m">01</span>
<span class="n">end</span><span class="err"> </span><span class="n">importanceMap</span>

<span class="n">end</span><span class="err"> </span><span class="n">data</span>
<span class="n">end</span><span class="err"> </span><span class="n">sequence</span>

<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">thick</span><span class="err">]</span>
  <span class="err">value</span> <span class="err">=</span> <span class="m">20</span>
  <span class="err">minimum</span> <span class="err">=</span> <span class="m">10</span>
  <span class="err">maximum</span> <span class="err">=</span> <span class="m">30</span>
  <span class="err">distribution</span> <span class="err">=</span> <span class="err">uniform</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>

<span class="n">read</span><span class="err"> </span><span class="n">variable</span><span class="err">[</span><span class="n">x</span><span class="err">90]</span>
  <span class="err">distribution</span> <span class="err">=</span> <span class="err">expression</span>
  <span class="err">expression</span> <span class="err">=</span> <span class="s">&quot;thick+70&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">variable</span>

<span class="n">end</span><span class="err"> </span><span class="n">case</span>

<span class="n">read</span><span class="err"> </span><span class="n">response</span><span class="err">[</span><span class="n">flux</span><span class="err">]</span>
  <span class="err">type</span> <span class="err">=</span> <span class="err">grep</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;total flux[[:space:]]+:scale.number:&quot;</span>
  <span class="err">regexp</span> <span class="err">=</span> <span class="s">&quot;:scale.number:&quot;</span>
<span class="n">end</span><span class="err"> </span><span class="n">response</span>

<span class="n">end</span>
</pre></div>
</div>
<p>Flux dependence on the shielding thickness is shown in <a class="reference internal" href="#fig6-7-17"><span class="std std-numref">Fig. 113</span></a>.</p>
<div class="figure align-center" id="id88">
<span id="fig6-7-17"></span><a class="reference internal image-reference" href="_images/fig173.png"><img alt="_images/fig173.png" src="_images/fig173.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 113 </span><span class="caption-text">Flux as a function of shielding thickness for sample problem 7.</span><a class="headerlink" href="#id88" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="appendix-a-scale-input-retrieval-engine-siren">
<span id="a"></span><h2>APPENDIX A – SCALE Input Retrieval ENgine (SIREN)<a class="headerlink" href="#appendix-a-scale-input-retrieval-engine-siren" title="Permalink to this headline">¶</a></h2>
<p>SIREN (SCALE Input Retrieval ENgine) provides a hierarchical representation of SCALE
input and enables access to individual input components or sets of related input
parameters. SIREN sorts the contents of supported SCALE input sequences into a
tree structure so that every component in a SCALE input can be accessed using an
XPath designation. The SIREN package is used by the SCALE super-sequence Sampler
to select individual components within an input file, perturb the parameter in
memory, and write the perturbed input to a new file. In this way, components
within an input file can be perturbed without modification to the original input
file, which can be maintained as a read-only file under configuration control
for quality assurance purposes.</p>
<p>To explore the use of SIREN expressions, two utilities are available in the
SCALE bin directory. The utilities are the executables “InputViewer” and
“InputSelector.” The InputViewer utility accepts a SCALE input file and outputs
the XPath designation for each component of that input file. The InputSelector
utility accepts a SCALE input file and a SIREN select statement and then outputs
the part of the input file specified by the SIREN select statement. The
remainder of this section provides practical examples in the use of SIREN select
statements to designate specific components of a SCALE input.</p>
<p>A simple CSAS6 input file, which models a sphere of HEU, is used to show how to
use SIREN select statements to access specific portions of a SCALE input. The
contents of the example CSAS6 input file are shown below.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=csas6</span>
<span class="err">sample</span> <span class="err">problem</span> <span class="m">6</span>  <span class="err">bare</span> <span class="m">93</span><span class="err">.</span><span class="m">2</span><span class="err">%</span> <span class="err">U</span> <span class="err">sphere,</span> <span class="err">eighth</span> <span class="err">sphere</span> <span class="err">w/</span> <span class="err">mirror</span> <span class="err">albedo</span>
<span class="err">v</span><span class="m">7</span><span class="err">-</span><span class="m">238</span>
<span class="n">read</span><span class="err"> </span><span class="n">comp</span>
  <span class="err">uranium</span>  <span class="m">1</span> <span class="err">den=</span><span class="m">18</span><span class="err">.</span><span class="m">76</span> <span class="m">1</span> <span class="m">293</span> <span class="m">92235</span> <span class="m">93</span><span class="err">.</span><span class="m">2</span> <span class="m">92238</span> <span class="m">5</span><span class="err">.</span><span class="m">6</span> <span class="m">92234</span> <span class="m">1</span><span class="err">.</span><span class="m">0</span> <span class="m">92236</span> <span class="m">0</span><span class="err">.</span><span class="m">2</span> <span class="n">end</span>
<span class="n">end</span><span class="err"> </span><span class="n">comp</span>
<span class="n">read</span><span class="err"> </span><span class="n">geometry</span>
  <span class="err">global</span> <span class="err">unit</span> <span class="m">1</span>
    <span class="err">sphere</span> <span class="m">10</span>  <span class="m">8</span><span class="err">.</span><span class="m">741</span>  <span class="err">chord</span> <span class="err">+x=</span><span class="m">0</span><span class="err">.</span><span class="m">0</span>  <span class="err">chord</span>  <span class="err">+y=</span><span class="m">0</span><span class="err">.</span><span class="m">0</span>  <span class="err">chord</span> <span class="err">+z=</span><span class="m">0</span><span class="err">.</span><span class="m">0</span>
    <span class="err">cuboid</span>   <span class="m">20</span>  <span class="m">8</span><span class="err">.</span><span class="m">741</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span> <span class="m">8</span><span class="err">.</span><span class="m">741</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span> <span class="m">8</span><span class="err">.</span><span class="m">741</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>
    <span class="err">media</span>  <span class="m">1</span> <span class="m">1</span> <span class="m">10</span>      <span class="err">vol=</span><span class="m">2797</span><span class="err">.</span><span class="m">5121</span>
    <span class="err">media</span>  <span class="m">0</span> <span class="m">1</span> <span class="m">20</span> <span class="err">-</span><span class="m">10</span>  <span class="err">vol=</span><span class="m">2545</span><span class="err">.</span><span class="m">3424</span>
    <span class="err">boundary</span> <span class="m">20</span>
<span class="n">end</span><span class="err"> </span><span class="n">geometry</span>
<span class="n">read</span><span class="err"> </span><span class="n">bounds</span>
  <span class="err">-fc=mirror</span>
<span class="n">end</span><span class="err"> </span><span class="n">bounds</span>
<span class="n">end</span><span class="err"> </span><span class="n">data</span>
<span class="n">end</span>
</pre></div>
</div>
<p>The InputViewer utility is used to view the contents of the example input file
with their respective XPath designations. The utility accepts the path to the
input file as an argument so that the usage is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ InputViewer inputfile
</pre></div>
</div>
<p>A portion of the output from InputViewer is shown below; this portion
corresponds to the material definition in the example input file. Notice that
each component of the composition has a specific XPath designation. For
instance, the “wtptPair” has several pieces of information (ids for each
component and the weight percent for that component). To gain access to a
specific component, the InputSelector utility is introduced below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/csas6/comps
/csas6/comps/decl(read comp)
/csas6/comps/stdcomp
/csas6/comps/stdcomp/name(uranium)
/csas6/comps/stdcomp/mixture(1)
/csas6/comps/stdcomp/roth
/csas6/comps/stdcomp/roth/decl(den)
/csas6/comps/stdcomp/roth/assign(=)
/csas6/comps/stdcomp/roth/value(18.76)
/csas6/comps/stdcomp/vf(1)
/csas6/comps/stdcomp/temp(293)
/csas6/comps/stdcomp/wtpt_pair
/csas6/comps/stdcomp/wtpt_pair/id(92235)
/csas6/comps/stdcomp/wtpt_pair/wtpt(93.2)
/csas6/comps/stdcomp/wtpt_pair
/csas6/comps/stdcomp/wtpt_pair/id(92238)
/csas6/comps/stdcomp/wtpt_pair/wtpt(5.6)
/csas6/comps/stdcomp/wtpt_pair
/csas6/comps/stdcomp/wtpt_pair/id(92234)
/csas6/comps/stdcomp/wtpt_pair/wtpt(1.0)
/csas6/comps/stdcomp/wtpt_pair
/csas6/comps/stdcomp/wtpt_pair/id(92236)
/csas6/comps/stdcomp/wtpt_pair/wtpt(0.2)
/csas6/comps/stdcomp/term(end)
/csas6/comps/term(end comp)
</pre></div>
</div>
<p>To explore how SIREN select statements are used, the InputSelector
utility is used for a few cases with the example CSAS6 input file.
Suppose the <sup>235</sup>U weight percent needed to be accessed for
perturbation; the SIREN expression to access the <sup>235</sup>U
weight percent is as follows:</p>
<p>Long form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;/csas6/comps/stdcomp/wtpt_pair[id=&quot;92235&quot;]/wtpt&#39;
</pre></div>
</div>
<p>Short form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;///wtpt_pair[id=&quot;92235&quot;]/wtpt&#39;
</pre></div>
</div>
<p>This statement tells SIREN to look for the weight percent with an ID of 92235 in
the weight percent pair. A short form of the select statement (designated by the
triple slash) can be used when there are unique qualities about a component; for
instance, there is only a single material with an ID of 92235, so the weight
percent pair must belong to that material. There are many combinations of select
statements that can point to a specific input component, and the developers
suggest using the InputSelector utility to familiarize oneself with this
capability. The usage of InputSelector is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ InputSelector inputfile quoted_Select_Statement
</pre></div>
</div>
<p>Below is the screen output from the InputSelector with the example
CSAS6 input file and the select statement for the <sup>235</sup>U
weight percent.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---- 1 nodes selected with statement &#39;///wtpt_pair[id=&#39;92235&#39;]/wtpt&#39; ----
1) /csas6/comps/stdcomp/wtpt_pair/wtpt
93.2
</pre></div>
</div>
<p>The output from InputSelector shows that the select statement points
to a single component in the SCALE input, which is indeed the value for the
<sup>235</sup>U weight percent. There are cases where a select statement
points to a portion of the input that has multiple components and the
select statement may need to be refined to point to a specific component.
For instance, the cuboid defined in the geometry section of the input has
multiple dimensions (+x, -x, +y, -y, etc.). By using the select statement
below, the dimensions of the cuboid are shown</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;//cuboid/[id=&quot;20&quot;]/dimensions&#39;
</pre></div>
</div>
<p>The output from using InputSelector with this select statement is shown below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---- 1 nodes selected with statement &#39;//cuboid/[id=&quot;20&quot;]/dimensions&#39; ----
1) /csas6/geometry/global_unit/cuboid/dimensions

8.741 0.0 8.741 0.0 8.741 0.0
</pre></div>
</div>
<p>The output from InputSelector shows six values, which correspond to the
dimensions of the cuboid (+x,  x, +y, -y, +z, -z faces). To select a single
dimension, the select statement should include which component is desired. For
instance, to select the height of the cuboid the select statement becomes:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;//cuboid/[id=&quot;20&quot;]/dimensions/plus_z&#39;
</pre></div>
</div>
<p>In the same way, the radius of the sphere can be selected using the SIREN
expression that identifies the radius of a sphere with an ID of 10:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;//sphere/[id=&quot;10&quot;]/dimensions/r&#39;
</pre></div>
</div>
<p>The output from InputSelector is shown below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---- 1 nodes selected with statement &#39;//sphere/[id=&quot;10&quot;]/dimensions/r&#39; ----
1) /csas6/geometry/global_unit/sphere/dimensions/r

8.741
</pre></div>
</div>
<p>There are scenarios where there is no unique or obvious identifier for a
component. As an example, the media volume can utilize an array index to
retrieve the volume value.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;//media/volume/value&#39;
</pre></div>
</div>
<p>The output from InputSelector illustrates both media’s volume value are selected below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---- 2 nodes selected with statement &#39;//media/volume/value&#39; ----
1) /csas6/geometry/global_unit/media/volume/value
2797.5121
2) /csas6/geometry/global_unit/media/volume/value
2545.3424
</pre></div>
</div>
<p>The printed index (1) can be utilized to narrow the selection.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>‘//media[1]/volume/value’
</pre></div>
</div>
<p>Here the first media is selected and subsequently, the media’s volume value,
removing the selection of the second media entirely. The output from
InputSelector is shown below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---- 1 nodes selected with statement &#39;//media[1]/volume/value&#39; ----
1) /csas6/geometry/global_unit/media/volume/value
2797.5121
</pre></div>
</div>
<p>For the sake of completeness, the following example illustrates selection of
the media’s volume value via the mixture’s value comparator.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;//media[mixture=&quot;1&quot;]/volume/value&#39;
</pre></div>
</div>
<p>This illustrates the first media’s unique mixture component can be used to select the volume for the first media. The output from InputSelector is shown below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>---- 1 nodes selected with statement &#39;//media[mixture=&quot;1&quot;]/volume/value&#39; ----
1) /csas6/geometry/global_unit/media/volume/value

2797.5121
</pre></div>
</div>
<p>The above examples were intended to provide users with an idea of how to use SIREN
select statements to access specific components within a SCALE input. The select
statements are primarily used in cases where the input is to be perturbed by the
Sampler super-sequence, but modification to the original input is not desirable.
The recommended way to ensure that the select statements are correct is to use
the InputSelector utility to check that a select statement points to the correct
input component.</p>
<p>For viewing the input paths, an alternative to the InputViewer command line
utility is available within the Fulcrum graphical user interface (GUI). By
clicking on the Run Button drop-down and selecting “Input Listing” as shown in
<a class="reference internal" href="#fig6-7-18"><span class="std std-numref">Fig. 114</span></a>, the full listing of the current input file is displayed in the
“Messages” box. Also, notice the path is displayed in the bottom left corner for
the input component located at the cursor.</p>
<div class="figure align-center" id="id89">
<span id="fig6-7-18"></span><a class="reference internal image-reference" href="_images/fig183.png"><img alt="_images/fig183.png" src="_images/fig183.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 114 </span><span class="caption-text">Input Listing in Fulcrum.</span><a class="headerlink" href="#id89" title="Permalink to this image">¶</a></p>
</div>
<p>A table of SIREN expressions are as follows.</p>
<span id="tab6-7a-1"></span><table class="docutils align-center" id="id90">
<caption><span class="caption-number">Table 120 </span><span class="caption-text">Expressions for SIREN.</span><a class="headerlink" href="#id90" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/taba1.svg"><img alt="_images/taba1.svg" src="_images/taba1.svg" width="800" /></a>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="appendix-b-expression-operators-and-functions-for-sampler">
<span id="b"></span><h2>APPENDIX B – Expression Operators and Functions for Sampler<a class="headerlink" href="#appendix-b-expression-operators-and-functions-for-sampler" title="Permalink to this headline">¶</a></h2>
<p>The expression engine utilized by Sampler supports all basic mathematical and
logical operators, as well as a number of functions. Logical expressions and
functions evaluate to the number 1 for true, and the number 0 for false.</p>
<span id="tab6-7b-1"></span><table class="docutils align-center" id="id91">
<caption><span class="caption-number">Table 121 </span><span class="caption-text">Expressions for SIREN.</span><a class="headerlink" href="#id91" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><a class="reference internal image-reference" href="_images/tabb1.svg"><img alt="_images/tabb1.svg" src="_images/tabb1.svg" width="800" /></a>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="appendix-c-guidelines-for-running-sampler-in-parallel">
<span id="c"></span><h2>APPENDIX C – Guidelines for Running Sampler in Parallel<a class="headerlink" href="#appendix-c-guidelines-for-running-sampler-in-parallel" title="Permalink to this headline">¶</a></h2>
<p>Sampler calculations consist of three basic steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>generate N perturbed input files and libraries,</p></li>
<li><p>run N independent SCALE jobs, and</p></li>
<li><p>analyze N results sets.</p></li>
</ol>
</div></blockquote>
<p>At this time, the preferred way of performing Sampler calculations is
to use <em>run_cases=no</em> (in the <em>parameters</em> block) and perform step 2
above outside of Sampler, i.e. using scripting or your system’s
queuing system to launch the <em>N</em> SCALE jobs. The
“${OUTBASENAME}.samplerfiles” directory that Sampler creates in step
1 will contain all the perturbed input files. Each of these input
files should be run as a separate SCALE job. When all jobs are
complete, Sampler should be run again (still with <em>run_cases=no</em>).
Sampler will see that all jobs have completed, and perform the
analysis in step 3. The Sampler sample problem 8 is a quick-running
calculation that can be used to test and, if necessary adjust, the
manual 3-step scheme described above on your system.</p>
<p><strong>The internal frameworks for launching SCALE jobs in parallel are
experimental in this release. Users must accept all responsibility
for using these parallel capabilities on their systems.</strong> The
following information is provided for different platforms on which
the parallel capability has been tested.</p>
<p class="centered">
<strong>OpenMP Thread-based Parallelism</strong></p><p>The recommended parallel capability is based on
parallel threads with OpenMP. This capability is available on all platforms
SCALE supports (e.g. Windows, Mac, and Linux) and allows scaling up to the
number of threads on a personal computer/workstation (typically 4 or more on
current machines) or a single node of a Linux cluster (typically 8 to 16 on
current machines). To launch a Sampler calculation with 5 parallel threads, one
would issue the following from the command line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scalerte –r –I 5 –m sample_8.inp
</pre></div>
</div>
<p>This will perform all 3 steps of the Sampler process in sequence, first
generating all the inputs, then using 5 parallel threads to launch jobs (1 for
the main “master” process that organizes the workers, and 4 worker processes
that actually perform the perturbed calculations).</p>
<p class="centered">
<strong>MPI-based Parallelism</strong></p><p>The main limitation of OpenMP’s thread-based parallelism is that it
is limited to a single node in a Linux cluster environment, a common platform
for modern scientific computing. The MPI-based parallelism requires building
SCALE from source with MPI enabled. There is one workaround necessary with the
MPI-enabled Sampler. MPI-enabled Sampler cannot call another MPI-enabled SCALE
module, such as <em>kenovi</em> or <em>xkba</em>. For this reason, if kenovi or xkba (or any other
MPI-parallel sequence) is required in the Sampler calculation, the user must make the serial versions of these executables available to Sampler during calculations, e.g. by copying them into the temporary directories via a =shell command in the input file.</p>
<p>To launch a Sampler calculation with 32 parallel calculations on two nodes with
16 cores each, one would issue the following from the command line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>scalerte –T temp –M machine.txt –N 32 –m sample_8.inp
</pre></div>
</div>
<p>where the machine.txt file contains:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nodeA slots=16
nodeB slots=16
</pre></div>
</div>
<p>where “nodeA” and “nodeB” are the names of nodes recognized by the system. Note that
the temporary directory “temp” must be available to all nodes, such that the
saved results can be copied back after execution. This requires the temp
directory be on a “shared filesystem”, which in turn means that some
input/output (I/O) will be performed over this shared filesystem. If too many
parallel jobs are requested, the system I/O may be swamped by the Sampler file
transfer requests, impacting all users on the system. For modest sized Linux
clusters, a maximum number of parallel jobs of 50 (i.e. –N 50) is recommended,
although for I/O intensive sequences such as TRITON, this may still be too much.
The maximum number of jobs per node should take into account not only the number
of cores on that node, but the memory demands of the SCALE sequences to be
called by Sampler. Ensuring sufficient memory is available may limit the number
of cores per node (“slots”) that should be requested.</p>
<p>Finally, some experience suggests that using the utility “nohup” to detach the main Sampler calculation, e.g. to logout of ssh and have the job continue to run, can cause runs to fail. It is recommended to use alternatives to “nohup” such as “screen” or “disown” to detach the main Sampler calculation from the user’s login session.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Criticality%20Safety%20Overview.html" class="btn btn-neutral float-right" title="Criticality Safety Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tsurfer-appA.html" class="btn btn-neutral float-left" title="TSURFER Appendix A: Sensitivity/Uncertainty Notation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, SCALE developers

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>