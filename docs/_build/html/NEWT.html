

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>NEWT: A New Transport Algorithm for Two-Dimensional Discrete-Ordinates Analysis in Non-Orthogonal Geometries &mdash; SCALE Manual 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SCALE Nuclear Data Libraries" href="Nuclear%20Data%20Libraries%20Overview.html" />
    <link rel="prev" title="XSDRNPM Appendices A and B" href="XSDAppAB.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> SCALE Manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Reactor Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TRITON.html">TRITON: A Multipurpose Transport, Depletion, And Sensitivity and Uncertainty Analysis Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRITONAppABC.html">TRITON Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="Polaris.html">POLARIS - 2D Light Water Reactor Lattice Physics Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="PolarisA.html">SCALE 6.2 Polaris Input Format</a></li>
</ul>
<p class="caption"><span class="caption-text">Depletion, Activation, and Spent Fuel Source Terms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Depletion%2C%20Activation%2C%20and%20Spent%20Fuel%20Source%20Terms%20Overview.html">Depletion, Activation, and Spent Fuel Source Terms Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN.html">Origen: Neutron Activation, Actinide Transmutation, Fission Product Generation, and Radiation Source Term Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html">Origen Data Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#energy-resource">Energy Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#decay-resource-format">Decay Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#fission-yield-resource-format">Fission Yield Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#gamma-resource-format">Gamma Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#origen-end7dec-nuclide-set">ORIGEN “end7dec” Nuclide Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGAMI.html">ORIGAMI: A Code for Computing Assembly Isotopics with ORIGEN</a></li>
<li class="toctree-l1"><a class="reference internal" href="SLIG.html">SCALE/Origen Library Generator (SLIG)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Origenutil.html">ORIGEN Utility Programs</a></li>
</ul>
<p class="caption"><span class="caption-text">Sensitivity and Uncertainty Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Sensitivity%20and%20Uncertainty%20Analysis%20Overview.html">Snesitivity and Uncertainty Analysis Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-1d.html">TSUNAMI-1D:  Control Module for One-Dimensional Cross-Section Sensitivity and Uncertainty</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-1d-appA.html">XSDRNPM Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-3d.html">TSUNAMI-3D: Control Module for Three-Dimensional Cross Section Sensitivity and Uncertainty Analysis for Criticality</a></li>
<li class="toctree-l1"><a class="reference internal" href="sams.html">SAMS: Sensitivity Analysis Module for Scale</a></li>
<li class="toctree-l1"><a class="reference internal" href="sams-appA.html">Sensitivity Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsar.html">TSAR: Tool for Sensitivity Analysis of Reactivity Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-ip.html">TSUNAMI Utility Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-ip-appAB.html">Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsurfer.html">TSURFER: An Adjustment Code to Determine Biases and Uncertainties in Nuclear System Responses by Consolidating Differential Data and Benchmark Integral Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsurfer-appA.html">TSURFER Appendix A: Sensitivity/Uncertainty Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampler.html">Sampler: A Module for Statistical Uncertainty Analysis with Scale Sequences</a></li>
</ul>
<p class="caption"><span class="caption-text">Criticality Safety</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Criticality%20Safety%20Overview.html">Criticality Safety Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS5.html">CSAS5:  Control Module For Enhanced Criticality Safety Analysis Sequences With KENO V.a</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS5App.html">Additional Example Applications of CSAS5</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS6.html">CSAS6:  Control Module for Enhanced Criticality Safety Analysis with KENO-VI</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS6App.html">Additional Example Applications of CSAS6</a></li>
<li class="toctree-l1"><a class="reference internal" href="STARBUCS.html">STARBUCS: A Scale Control Module for Automated Criticality Safety Analyses Using Burnup Credit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sourcerer.html">Sourcerer: Deterministic Starting Source for Criticality Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEVC.html">DEVC: Denovo EigenValue Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="KMART.html">KMART5 and KMART6: Postprocessors for KENO V.A and KENO-VI</a></li>
<li class="toctree-l1"><a class="reference internal" href="K5C5.html">K5toK6 and C5toC6: Input File Conversion Programs for KENO and CSAS</a></li>
</ul>
<p class="caption"><span class="caption-text">Material Specification and Cross Section Processing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Material%20Specification%20and%20Cross%20Section%20Processing%20Overview.html">Material Specification and Cross Section Processing Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProc.html">XSPROC: The Material and Cross Section Processing Module for SCALE</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppA.html">XSProc: Standard Composition Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppB.html">XSProc Standard Composition Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppC.html">Examples of Complete XSProc Input Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdcmp.html">Standard Composition Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="BONAMI.html">BONAMI: Resonance Self-Shielding by the Bondarenko Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="CENTRM.html">CENTRM: A Neutron Transport Code for Computing Continuous-Energy Spectra in General One-Dimensional Geometries and Two-Dimensional Lattice Cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="PMC.html">PMC: A Program to Produce Multigroup Cross Sections Using Pointwise Energy Spectra from CENTRM</a></li>
<li class="toctree-l1"><a class="reference internal" href="PMCAppAB.html">PMC Appendices A and B</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHOPS.html">CHOPS: Module to Compute Pointwise Disadvantage Factors and Produce a Cell-Homogenized CENTRM Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="CRAWDAD.html">CRAWDAD: Module to Produce CENTRM-Formatted Continuous-Energy Nuclear Data Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="MCDancoff.html">MCDancoff Data Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="CAJUN.html">CAJUN: Module for Combining and Manipulating CENTRM Continuous-Energy Libraries</a></li>
</ul>
<p class="caption"><span class="caption-text">Monte Carlo Transport</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Monte%20Carlo%20Transport%20Overview.html">Monte Carlo Transport Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoA.html">Keno Appendix A: KENO V.a Shape Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoB.html">Keno Appendix B: KENO VI Shape Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoC.html">Keno Appendix C: Sample problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Monaco.html">Monaco: A Fixed-Source Monte Carlo Transport Code for Shielding Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Radiation Shielding</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="MAVRIC.html">MAVRIC: Monaco with Automated Variance Reduction using Importance Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="CAAScapability.html">MAVRIC Appendix A: CAAS Capability</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendixb.html">MAVRIC Appendix B: MAVRIC Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendixc.html">MAVRIC Appendix C: Advanced Features</a></li>
</ul>
<p class="caption"><span class="caption-text">Deterministic Transport</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Deterministic%20Transport%20Intro.html">Deterministic Transport Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSD.html">XSDRNPM: A One-Dimensional Discrete-Ordinates Code for Transport Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSDAppAB.html">XSDRNPM Appendices A and B</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">NEWT:  A New Transport Algorithm for Two-Dimensional Discrete-Ordinates Analysis in Non-Orthogonal Geometries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-use-this-manual">How to use this manual</a></li>
<li class="toctree-l3"><a class="reference internal" href="#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="#discrete-ordinates-solution-on-an-arbitrary-grid">Discrete-ordinates solution on an arbitrary grid</a></li>
<li class="toctree-l3"><a class="reference internal" href="#functions-performed">Functions performed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#theory-and-procedures">Theory and Procedures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#boltzmann-transport-equation">Boltzmann transport equation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-step-characteristic-approximation">The step characteristic approximation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-extended-step-characteristic-approach">The Extended Step Characteristic approach</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cell-properties-and-geometries">Cell properties and geometries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#relationships-between-cells">Relationships between cells</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-set-of-characteristic-directions">The set of characteristic directions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#angular-flux-at-a-cell-boundary">Angular flux at a cell boundary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mapping-a-characteristic-vector-into-the-two-dimensional-problem-domain">Mapping a characteristic vector into the two-dimensional problem domain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#neutron-balance-within-a-computational-cell">Neutron balance within a computational cell</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#coarse-mesh-finite-difference-acceleration">Coarse-mesh finite-difference acceleration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assembly-discontinuity-factors">Assembly discontinuity factors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#input-formats">Input Formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview-of-newt-data-blocks">Overview of newt data blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameter-block">Parameter block</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#convergence-and-acceleration-parameters">Convergence and acceleration parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-editing">Output editing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#angular-quadrature">Angular quadrature</a></li>
<li class="toctree-l4"><a class="reference internal" href="#control-options">Control options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#critical-spectrum-options">Critical spectrum options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file-unit-options">File unit options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#material-block">Material Block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#source-block">Source block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collapse-block">Collapse block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geometry-block">Geometry block</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bodies">Bodies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#media-specifications">Media specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geometry-block-examples">Geometry block examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#summary-of-geometry-specifications">Summary of geometry specifications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#boundary-conditions">Boundary conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#boundary-conditions-descriptions">Boundary conditions descriptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boundary-condition-specification">Boundary condition specification</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#general-cross-section-weighting">General cross section weighting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scattering-cross-section-transfer-matrix-weighting">Scattering cross section transfer matrix weighting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#weighting-of-the-collapsed-fission-spectrum-chi">Weighting of the collapsed fission spectrum, <span class="math notranslate nohighlight">\(\chi\)</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#weighting-of-the-number-of-neutrons-per-fission-boldsymbol-v">Weighting of the number of neutrons per fission, <span class="math notranslate nohighlight">\(\boldsymbol{V}\)</span></a></li>
<li class="toctree-l4"><a class="reference internal" href="#weighting-of-n-2n-n-3n-and-n-4n-cross-sections">Weighting of (n,2n), (n,3n), and (n,4n) cross sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#calculation-and-weighting-of-transport-cross-sections">Calculation and weighting of transport cross sections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#array-definition">Array definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#array-types">Array types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pin-power-edits">Pin-power edits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fill-operations">Fill operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples-of-array-definitions">Examples of array definitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#homogenization-block">Homogenization block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id112">Assembly discontinuity factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flux-planes">Flux planes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mixing-table-block">Mixing table block</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples-of-inputs">Examples of Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sample-1">Sample 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-2">Sample 2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sample-3">Sample 3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sample-4">Sample 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-5">Sample 5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description-of-output">Description of Output</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#newt-banner">NEWT banner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#input-summary">Input summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id125">Control options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-options">Output options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#input-output-unit-assignments">Input/output unit assignments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#convergence-control-parameters">Convergence control parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pin-power-edit-requests">Pin-power edit requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geometry-specifications">Geometry specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#homogenization-region-specifications">Homogenization region specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#material-specifications">Material specifications</a></li>
<li class="toctree-l4"><a class="reference internal" href="#derived-parameters">Derived parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#energy-group-structure-listing">Energy group structure listing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quadrature-parameters">Quadrature parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mixture-volumes-listing">Mixture volumes listing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mixing-table-listing">Mixing table listing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nuclide-cross-sections">Nuclide cross sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mixture-cross-sections">Mixture cross sections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#iteration-history">Iteration history</a></li>
<li class="toctree-l3"><a class="reference internal" href="#four-factor-formula">Four-factor formula</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fine-group-balance-tables">Fine-group balance tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#planar-fluxes-and-currents">Planar fluxes and currents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id145">Pin-power edits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#broad-group-collapse">Broad-group collapse</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#broad-group-summary-data">Broad-group summary data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#broad-group-cross-section-data">Broad-group cross section data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#critical-spectrum-edit">Critical spectrum edit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id151">Assembly discontinuity factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#groupwise-form-factors">Groupwise form factors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#homogenized-cross-sections">Homogenized cross sections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#end-of-calculation-banner">End-of-calculation banner</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#postscript-graphics-files">Postscript graphics files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#media-zone-edits">Media zone edits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Nuclear Data Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nuclear%20Data%20Libraries%20Overview.html">SCALE Nuclear Data Libraries</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SCALE Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>NEWT:  A New Transport Algorithm for Two-Dimensional Discrete-Ordinates Analysis in Non-Orthogonal Geometries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/NEWT.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="newt-a-new-transport-algorithm-for-two-dimensional-discrete-ordinates-analysis-in-non-orthogonal-geometries">
<span id="id1"></span><h1>NEWT:  A New Transport Algorithm for Two-Dimensional Discrete-Ordinates Analysis in Non-Orthogonal Geometries<a class="headerlink" href="#newt-a-new-transport-algorithm-for-two-dimensional-discrete-ordinates-analysis-in-non-orthogonal-geometries" title="Permalink to this headline">¶</a></h1>
<ol class="upperalpha simple" start="13">
<li><ol class="upperalpha simple">
<li><p>Jessee, M. D. DeHart <a class="footnote-reference brackets" href="#id158" id="id2">1</a></p></li>
</ol>
</li>
</ol>
<p>ABSTRACT</p>
<p>NEWT (<strong>N</strong>ew <strong>E</strong>SC-based <strong>W</strong>eighting <strong>T</strong>ransport code) is
a multigroup discrete-ordinates radiation transport computer code with
flexible meshing capabilities that allow two-dimensional (2-D) neutron
transport calculations using complex geometric models. The differencing
scheme employed by NEWT, the Extended Step Characteristic approach,
allows a computational mesh based on arbitrary polygons. Such a mesh can
be used to closely approximate curved or irregular surfaces to provide
the capability to model problems that were formerly difficult or
impractical to model directly with discrete-ordinates methods. Automated
grid generation capabilities provide a simplified user input
specification in which elementary bodies can be defined and placed
within a problem domain. NEWT can be used for eigenvalue,
critical-buckling correction, and source calculations and it can be used
to prepare collapsed weighted cross sections in AMPX working library
format.</p>
<p>Like other SCALE modules, NEWT can be run as a standalone module or as
part of a SCALE sequence. NEWT has been incorporated into the SCALE
TRITON control module sequences. TRITON can be used simply to prepare
cross sections for a NEWT transport calculation and then automatically
execute NEWT. TRITON also provides the capability to perform 2-D
depletion calculations, in which the transport capabilities of NEWT are
combined with multiple ORIGEN depletion calculations to perform 2-D
depletion of complex geometries. In the TRITON depletion sequence, NEWT
can also be used to generate lattice-physics parameters and
cross sections for use in subsequent nodal core simulator calculations.
In addition, the SCALE TSUNAMI-2D sequence can be used to perform
sensitivity and uncertainty analysis of 2-D geometries, where NEWT is
used to compute the adjoint flux solution to generate sensitivity
coefficients for <em>k</em><sub>eff</sub> and other responses of interest, with respect
to the cross sections used in the NEWT model.</p>
<p>ACKNOWLEDGMENTS</p>
<p>The author expresses gratitude to B. T. Rearden and S. M. Bowman for
their supervision of the SCALE project and review of the manuscript. The
author acknowledges R. Y. Lee of the U.S. Nuclear Regulatory Commission
(NRC) and A. P. Ulses (formerly NRC) for their support of the
development of NEWT. Appreciation is extended to G. Ilas, B. L.
Broadhead, Deokjung Lee (formerly ORNL), and B. J. Ade for their review
of this or previous versions of the manuscript. The efforts of Z. Zhong
(Argonne National Laboratory), A. P. Ulses (formerly NRC), K. S. Kim, C.
F. Weber, G. Ilas, and K. T. Clarno (Oak Ridge National Laboratory) in
methods development and testing of the code have been invaluable in the
continued evolution and improvement of the code.</p>
<div class="section" id="introduction">
<span id="id3"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>NEWT (<strong>N</strong>ew <strong>E</strong>SC-based <strong>W</strong>eighting <strong>T</strong>ransport code) is
a two-dimensional (2-D) discrete-ordinates transport code developed
based on the Extended Step Characteristic (ESC) approach <a class="bibtex reference internal" href="#dehart-discrete-1992" id="id4">[Deh92]</a> for
spatial discretization on an arbitrary mesh structure. This
discretization scheme makes NEWT an extremely powerful and versatile
tool for deterministic calculations in real-world non-orthogonal problem
domains. The NEWT computer code evolved from the earlier
proof-of-principle CENTAUR code <a class="bibtex reference internal" href="#dehart-discrete-1992" id="id5">[Deh92]</a> and has been developed to run
within SCALE. Thus, NEWT uses AMPX-formatted cross sections processed by
other SCALE modules. If cross sections are properly prepared, NEWT can
be run in stand-alone mode. NEWT can also be used within the TRITON
control module for transport analysis, depletion analysis, and
sensitivity and uncertainty analysis.</p>
<div class="section" id="how-to-use-this-manual">
<span id="id6"></span><h3>How to use this manual<a class="headerlink" href="#how-to-use-this-manual" title="Permalink to this headline">¶</a></h3>
<p>This users’ manual is intended to assist both the novice and the expert
in the application of NEWT for transport analysis. As such, the document
is divided into subsections, each with a specific purpose. Not all
sections will be of value to all users. It is not intended that the user
of this manual read through the manual from start to end. Rather, the
manual is designed to serve as a reference, with each section meeting
different needs. This introductory section has been written to provide a
general overview of the background, nature, functionality, and
applications of NEWT; it should prove of interest to users at all
levels. <a class="reference internal" href="#id10"><span class="std std-ref">Theory and Procedures</span></a> provides detail on the theory of NEWT in terms of
derivations, equations, and relationships used in the NEWT solution.
This information will be of interest to those with a background in
transport methods desiring a comprehensive understanding of the NEWT
solution scheme. However, this information may provide too much detail
or simply not be relevant for the beginning user or someone desiring to
improve or expand an existing model. These users will find <a class="reference internal" href="#id39"><span class="std std-ref">Input Formats</span></a>
to be of more value, where input data requirements and formats are
described in detail, along with examples of each data type. This
information is supplemented by <a class="reference internal" href="#id116"><span class="std std-ref">Examples of Inputs</span></a>, in which complete sample
inputs with descriptions of the features of each model are provided.
<a class="reference internal" href="#id122"><span class="std std-ref">Description of Output</span></a> describes the components of an output listing obtained
from a successful NEWT calculation.</p>
</div>
<div class="section" id="background">
<span id="id7"></span><h3>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h3>
<p>The radiation transport equation, a linearized derivative of the
Boltzmann equation, provides an exact description of a neutral-particle
radiation field in terms of the position, direction of travel, and
energy of every particle in the field. Both stochastic (Monte Carlo
simulation) and deterministic (direct numerical solution) forms of the
transport equation have been developed and are used extensively in
nuclear applications. Each approach has its strengths and weaknesses.
Stochastic approaches are extremely effective for problems with complex
geometries where the calculations of integral quantities, such as
radiation dose and neutron multiplication factors, are desired. However,
calculations to obtain accurate differential information, such as the
neutron flux as a function of space and energy, can be difficult and
inefficient at best and prone to inaccuracies (even if the integral
quantity is correct). Deterministic techniques, such as integral
transport, collision probability, diffusion theory, and
discrete-ordinates methods, are better suited for problems where
differential quantities, such as the neutron flux as a function of
energy or space, are desired. However, integral transport, collision
probability, and diffusion approximations are based on simplifying
assumptions, which can limit their applicability. The discrete-ordinates
approach is a more rigorous approximation to the transport equation but
is typically very limited in its flexibility to describe complex
geometric systems.</p>
<p>Discrete-ordinates approaches are derived from the integro-differential
form of the Boltzmann transport equation, where space, time, and energy
dependencies are normally treated by the use of a finite‑difference
grid, while angular behavior is treated by considering a number of
discrete directions in space. The angular solution is coupled to a
scalar spatial solution via some form of numerical integration. Because
of the direct angular treatment of the discrete-ordinates approach,
angularly dependent distribution functions can be computed; thus, this
approach is the preferred method of solution in many specific
applications where angular anisotropy is important. However, as
indicated earlier, it is often limited in applicability because of the
geometric constraints of the orthogonal grid system associated with the
finite-difference numerical approximation.</p>
</div>
<div class="section" id="discrete-ordinates-solution-on-an-arbitrary-grid">
<span id="id8"></span><h3>Discrete-ordinates solution on an arbitrary grid<a class="headerlink" href="#discrete-ordinates-solution-on-an-arbitrary-grid" title="Permalink to this headline">¶</a></h3>
<p>The ESC approach was developed to obtain a discrete-ordinates solution
in complicated geometries to handle the needs of irregular
configurations. Deterministic solutions to the transport equation
generally calculate a solution in terms of the particle flux; the flux
is the product of particle density and speed and is a useful quantity in
the determination of reaction rates that characterize nuclear systems.
General 2-D <em>xy</em> discrete-ordinates methods perform calculations that
provide four side-averaged fluxes and a cell-averaged flux for each cell
in a rectangular problem grid; iteration is performed to obtain a
converged distribution. This approach is usually termed the
diamond-difference approach. Using the ESC approach, a more flexible and
completely arbitrary problem grid may be defined in terms of completely
arbitrary polygons. Side-averaged fluxes for each polygon in the problem
domain are computed and are used to calculate a cell-averaged flux. This
process is repeated for each cell in the problem domain, and as with the
traditional approach, iteration is performed for convergence. This
geometric flexibility is a significant enhancement to existing
technology, as it provides the capability to model problems that are
currently difficult or impractical to model directly.</p>
</div>
<div class="section" id="functions-performed">
<span id="id9"></span><h3>Functions performed<a class="headerlink" href="#functions-performed" title="Permalink to this headline">¶</a></h3>
<p>NEWT provides multiple capabilities that can potentially be used in a
wide variety of application areas. These include 2-D eigenvalue
calculations, forward and adjoint flux solutions, multigroup flux
spectrum calculations, and cross section collapse calculations. NEWT
provides significant functionality to support lattice-physics
calculations, including assembly cross section homogenization and
collapse, calculation of assembly discontinuity factors (for internal
and reflected assemblies), diffusion coefficients, pin powers, and group
form factors. Used as part of the TRITON depletion sequence, NEWT
provides spatial fluxes, weighted multigroup cross sections, and power
distributions used for multi-material depletion calculations and coupled
depletion and branch calculations needed for lattice-physics analysis.</p>
</div>
</div>
<div class="section" id="theory-and-procedures">
<span id="id10"></span><h2>Theory and Procedures<a class="headerlink" href="#theory-and-procedures" title="Permalink to this headline">¶</a></h2>
<p>This section provides the theoretical basis for the ESC discretization
technique, the NEWT solution algorithm, and cross section processing
procedures used by NEWT. Although this information is not necessary to
be able to use NEWT for transport calculations, it provides a deeper
understanding of the basic operations performed within NEWT.</p>
<div class="section" id="boltzmann-transport-equation">
<span id="id11"></span><h3>Boltzmann transport equation<a class="headerlink" href="#boltzmann-transport-equation" title="Permalink to this headline">¶</a></h3>
<p>The neutron transport equation may be presented in various forms, and
simplifications are often applied to tailor the equation to the
requirements of a specific application. In nuclear engineering
applications, the transport equation is often written in terms of the
angular neutron flux as the dependent variable. The angular neutron flux
is defined as the product of the angular neutron density and the neutron
velocity. The time-independent form of the linear transport equation is
then expressed as <a class="bibtex reference internal" href="#duderstadt-nuclear-nodate" id="id12">[DH76]</a></p>
<div class="math notranslate nohighlight" id="equation-eq9-2-1">
<span class="eqno">(527)<a class="headerlink" href="#equation-eq9-2-1" title="Permalink to this equation">¶</a></span>\[\Omega \cdot \nabla \psi(\mathbf{r}, \Omega, E)+\sigma_{t}(\mathbf{r}, E) \psi(\mathbf{r}, \Omega, E)=Q(\mathbf{r}, \Omega, E) ,\]</div>
<p>where</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(\psi(\mathbf{r}, \Omega, E)\)</span> ≡ angular flux at position per unit volume, in direction <span class="math notranslate nohighlight">\(\Omega\)</span> per unit solid
angle and at energy E per unit energy;</p>
<p><span class="math notranslate nohighlight">\(\sigma_{t}(\mathbf{r}, E)\)</span> ≡ total macroscopic cross section at position <strong>r</strong> and energy E; and</p>
<p>Q ≡ source at position <strong>r</strong> per unit volume, in direction <span class="math notranslate nohighlight">\(\Omega\)</span> per unit solid
angle and at energy E per unit energy.</p>
</div></blockquote>
<p>The source Q is generally composed of three terms:</p>
<ol class="arabic simple">
<li><p>a scattering source,</p></li>
</ol>
<div class="math notranslate nohighlight" id="equation-eq9-2-2">
<span class="eqno">(528)<a class="headerlink" href="#equation-eq9-2-2" title="Permalink to this equation">¶</a></span>\[S(\mathbf{r}, \Omega, E)=\int_{4 \pi} d \Omega^{\prime} \int_{0}^{\infty} d E^{\prime} \sigma_{s}\left(\mathbf{r}, \Omega^{\prime} \rightarrow \Omega, E^{\prime} \rightarrow E\right) \psi\left(\mathbf{r}, \Omega^{\prime}, E^{\prime}\right) ,\]</div>
<p>where</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(\sigma_{s}\left(\mathbf{r}, \Omega^{\prime} \rightarrow \Omega, E^{\prime} \rightarrow E\right)\)</span>Omega`′ to final energy E and direction <span class="math notranslate nohighlight">\(\Omega\)</span>,</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>a fission source,</p></li>
</ol>
<div class="math notranslate nohighlight" id="equation-eq9-2-3">
<span class="eqno">(529)<a class="headerlink" href="#equation-eq9-2-3" title="Permalink to this equation">¶</a></span>\[F(\mathbf{r}, \Omega, E)=\chi(\mathbf{r}, E) \int_{0}^{\infty} d E^{\prime} v\left(\mathbf{r}, E^{\prime}\right) \sigma_{f}\left(\mathbf{r}, E^{\prime}\right) \psi\left(\mathbf{r}, \Omega, E^{\prime}\right) ,\]</div>
<p>where</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(\sigma_{f}\left(\mathbf{r}, E^{\prime}\right)\)</span> ≡ macroscopic fission cross section at position <strong>r</strong> and energy E′ (assumed
to be isotropic),</p>
<p><span class="math notranslate nohighlight">\(v\left(\mathbf{r}, E^{\prime}\right)\)</span> ≡ number of neutrons released per fission event at position <strong>r</strong> and
energy E′,</p>
<p><span class="math notranslate nohighlight">\(\chi(\mathbf{r}, E)\)</span> ≡ fraction of neutrons that are born at <strong>r</strong> and at energy E, and</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>an external or fixed source, S(<strong>r</strong> ,E).</p></li>
</ol>
<p>In general, the transport equation can be difficult to apply and can be
solved analytically only for highly idealized cases. Hence,
simplifications and numerical approximations are often necessary to
apply the equation in engineering applications. Traditional
discrete-ordinates methods are based on a finite-difference
approximation to solve the flux streaming (leakage) term. Such
differencing schemes are intimately tied to the coordinate system in
which the differencing equations are developed, and it becomes difficult
to represent non-orthogonal volumes within that coordinate system. For
example, it is not possible to exactly represent a cylinder in a 2-D
Cartesian coordinate system; one must approximate the cylinder with a
number of rectangular cells. A close approximation can require a large
number of computational cells. However, the ESC approach for
discretizing computational cells allows the use of non-orthogonal
computational cells composed of arbitrary polygons. Using this method,
practically any shape can be represented within a Cartesian grid to a
very close approximation. The ESC approach is discussed in the following
sections.</p>
</div>
<div class="section" id="the-step-characteristic-approximation">
<span id="id13"></span><h3>The step characteristic approximation<a class="headerlink" href="#the-step-characteristic-approximation" title="Permalink to this headline">¶</a></h3>
<p>Efficient application of discrete-ordinates methods is difficult when
dealing with complicated non-orthogonal geometries because of the nature
of finite difference approximations for spatial derivatives. An
alternative to the discrete representation of the spatial variable is
achieved in the method of characteristics, in which the transport
equation is solved analytically along characteristic directions within a
computational cell. The angular flux  is solved along the <em>s</em>-axis,
where this axis is oriented along the characteristic direction <span class="math notranslate nohighlight">\(\Omega\)</span>. Since
only the angular flux in direction <span class="math notranslate nohighlight">\(\Omega\)</span> is of concern, then the streaming
term can be rewritten as</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-4">
<span class="eqno">(530)<a class="headerlink" href="#equation-eq9-2-4" title="Permalink to this equation">¶</a></span>\[\Omega \cdot \nabla \psi(\mathbf{r}, \Omega, E)=\frac{d \psi(s, E)}{d s} .\]</div>
<p>Hence <a class="reference internal" href="#equation-eq9-2-1">(527)</a> can be written in the characteristic form (omitting <em>E</em> for
clarity) as</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-5">
<span class="eqno">(531)<a class="headerlink" href="#equation-eq9-2-5" title="Permalink to this equation">¶</a></span>\[\frac{d \psi(s)}{d s}+\sigma_{t}(s) \psi(\mathrm{s})=Q(s) ,\]</div>
<p>which has a solution of the form <a class="bibtex reference internal" href="#hildebrand-advanced-1976" id="id14">[Hil76]</a></p>
<div class="math notranslate nohighlight" id="equation-eq9-2-6">
<span class="eqno">(532)<a class="headerlink" href="#equation-eq9-2-6" title="Permalink to this equation">¶</a></span>\[\psi(s)=\psi_{0} e^{-\sigma_{t} s}+e^{-\sigma_{t} s} \int_{0}^{s} Q e^{\sigma_{t} s^{\prime}} d s^{\prime} ,\]</div>
<p>where s is the distance along the characteristic direction <span class="math notranslate nohighlight">\(\Omega\)</span>, and
ψ<sub>0</sub> is the known angular flux at <em>s</em>=0. The value for
ψ<sub>0</sub> is given from boundary conditions for known cell sides, and
angular fluxes on unknown sides are computed using Eq. (9.2.6). Methods
for the determination of an appropriate value for ψ<sub>0</sub> and for
evaluation of the integral term vary in different solution
techniques.<sup>4–9</sup> <a class="bibtex reference internal" href="#lewis-j-nodate" id="id15">[LM84]</a><a class="bibtex reference internal" href="#hildebrand-advanced-1976" id="id16">[Hil76]</a><a class="bibtex reference internal" href="#alcouffe-review-1981" id="id17">[AL81]</a><a class="bibtex reference internal" href="#lathrop-spatial-1969" id="id18">[Lat69]</a><a class="bibtex reference internal" href="#alcouffe-computational-1979" id="id19">[ALMJW79]</a><a class="bibtex reference internal" href="#larsen-linear-1981" id="id20">[LA81]</a><a class="bibtex reference internal" href="#lathrop-spatial-1968" id="id21">[Lat68]</a>.
One of the simplest schemes employing the Method of Characteristics is
the Step Characteristic (SC) method developed by Lathrop <a class="bibtex reference internal" href="#alcouffe-review-1981" id="id22">[AL81]</a>. In
this approach, the source Q and macroscopic total cross section σt are
assumed to be constant within a computational cell and the angular flux
is assumed constant on the cell boundaries of incoming direction.
Integration of Eq. <a class="reference internal" href="#equation-eq9-2-6">(532)</a> can be performed to obtain</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-7">
<span class="eqno">(533)<a class="headerlink" href="#equation-eq9-2-7" title="Permalink to this equation">¶</a></span>\[\psi(s)=\psi_{0} e^{-\sigma_{t} s}+\frac{Q}{\sigma_{t}}\left(1-e^{-\sigma_{t} s}\right) .\]</div>
<p><a class="reference internal" href="#fig9-2-1"><span class="std std-numref">Fig. 287</span></a> shows a sample computational cell in which the SC method
can be applied. For a given characteristic direction <span class="math notranslate nohighlight">\(\Omega\)</span>, the angular flux
on any unknown side may be expressed in terms of a suitable average of
fluxes from known sides, which contribute to the unknown side. For the
characteristic direction <span class="math notranslate nohighlight">\(\Omega\)</span> shown in <a class="reference internal" href="#fig9-2-1"><span class="std std-numref">Fig. 287</span></a>, the unknown “top” flux
ψ<sub>T</sub> may be computed as a linearly weighted average of
contributions from known sides ψ<sub>B</sub> and ψ<sub>L</sub>. The fluxes
on each of the two known sides are taken to be constant along the length
of each side, representing the average angular flux in direction <span class="math notranslate nohighlight">\(\Omega\)</span> and
must be specified from external boundary conditions or from a completed
calculation in an adjacent cell.</p>
<p>The set of characteristic directions is chosen from a quadrature set, so
that the resulting angular fluxes may be numerically integrated to
obtain a scalar flux. Knowing the lengths of the sides of a rectangular
cell (∆x and ∆y) and the direction cosines of <span class="math notranslate nohighlight">\(\Omega\)</span> in the <em>x-y</em> plane
(μ and η), a function for the length <em>s</em> can easily be determined. The
solution for from Eq. <a class="reference internal" href="#equation-eq9-2-7">(533)</a> can then be integrated along the length of
each unknown side to determine the average angular flux of the unknown
side. Once the angular flux is known on all four sides, a neutron
balance on the cell can be used to determine the cell’s average angular
flux.</p>
<p>Although the SC method described above is based on rectangular cells,
the derivation of Eq. <a class="reference internal" href="#equation-eq9-2-7">(533)</a> makes no assumptions about the shape of
the cell. It merely requires knowledge of the relationship between cell
edges along the direction of the characteristic. Hence, the method is
not restricted to any particular geometry. Because it is an extension of
the SC approach into generalized cells, the method developed here for
generalized geometries is referred to as the Extended Step
Characteristic (ESC) method.</p>
<div class="figure align-center" id="id159">
<span id="fig9-2-1"></span><a class="reference internal image-reference" href="_images/fig113.png"><img alt="_images/fig113.png" src="_images/fig113.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 287 </span><span class="caption-text">Typical rectangular cell used in the step characteristic approach.</span><a class="headerlink" href="#id159" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="the-extended-step-characteristic-approach">
<span id="id23"></span><h3>The Extended Step Characteristic approach<a class="headerlink" href="#the-extended-step-characteristic-approach" title="Permalink to this headline">¶</a></h3>
<p>The theory of the ESC approach is developed and explained in detail in
<a class="bibtex reference internal" href="#dehart-discrete-1992" id="id24">[Deh92]</a>. However, the work has evolved significantly from that time, most
notably in the elimination of a requirement for non-reentrant polygons
(convex). The following subsections describe the primary equations
applied in the ESC approach as currently applied in NEWT.</p>
<div class="section" id="cell-properties-and-geometries">
<span id="id25"></span><h4>Cell properties and geometries<a class="headerlink" href="#cell-properties-and-geometries" title="Permalink to this headline">¶</a></h4>
<p>The two primary assumptions of the ESC method are that (1) within each
computational cell all properties (i.e., σt and Q) are uniform and
(2) cell boundaries are defined by straight lines. The restriction of a
computational cell to boundaries consisting of a set of straight lines
results in computational cells that are limited to polygons. However, as
will be seen later, no restrictions are placed on the shape of the
polygon or on the number of sides in the polygon. However, the size of
the polygon will be limited. In practical applications, properties are
unlikely to remain constant over significant volumes. Thus this
approach, like many other differencing schemes, is a poor approximation
when cell volumes become too large. Although σt is a material property
and may remain spatially constant, the source term Q, which depends on
the neutron flux, will vary with position. However, since the solution
would become exact in an infinitesimally small cell, it is expected that
the approximation will be reasonable for computational cells in which
the change in the flux (and therefore the source) is small over the
domain of the cell.</p>
<p>As a result of this geometric configuration, each side of a cell can
have one of three possible attributes relative to particle flow in a
given characteristic direction, as illustrated in <a class="reference internal" href="#fig9-2-2"><span class="std std-numref">Fig. 288</span></a>: (1) flow
can enter the cell when crossing a side (as shown by sides E and F in
the figure); (2) flow can exit the cell when crossing a side (sides B
and C); or (3) in a special case, flow may be parallel to the
orientation of a given side (sides A and D). Expressed mathematically,
these relationships become</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-8">
<span class="eqno">(534)<a class="headerlink" href="#equation-eq9-2-8" title="Permalink to this equation">¶</a></span>\[\text { Category } 1: \Omega_{k} \cdot \hat{n}_{i}&lt;0\]</div>
<div class="math notranslate nohighlight" id="equation-eq9-2-9">
<span class="eqno">(535)<a class="headerlink" href="#equation-eq9-2-9" title="Permalink to this equation">¶</a></span>\[\text { Category } 2: \Omega_{k} \cdot \hat{n}_{i}&gt;0\]</div>
<div class="math notranslate nohighlight" id="equation-eq9-2-10">
<span class="eqno">(536)<a class="headerlink" href="#equation-eq9-2-10" title="Permalink to this equation">¶</a></span>\[\text { Category } 1: \Omega_{k} \cdot \hat{n}_{i}=0\]</div>
<p>where <span class="math notranslate nohighlight">\(\hat{n}_{i}\)</span> is a unit vector in the cell-outward direction normal to
side <em>i</em>, and <span class="math notranslate nohighlight">\(\Omega_{k}\)</span> is the <em>k</em><sup>th</sup> discrete element of a set of
characteristic directions. A category 1 side will be termed an
“incoming” side with respect to the direction <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>, and a category 2 side
will be referred to as an “outgoing” side. For simplicity, the
definition of Eq. <a class="reference internal" href="#equation-eq9-2-10">(536)</a> will be included as a special case of
Eq. <a class="reference internal" href="#equation-eq9-2-8">(534)</a> for an incoming side. Thus, Eq. <a class="reference internal" href="#equation-eq9-2-8">(534)</a> can be rewritten as</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-11">
<span class="eqno">(537)<a class="headerlink" href="#equation-eq9-2-11" title="Permalink to this equation">¶</a></span>\[\text { Side } i \text { is incoming with respect to } \Omega_{k}: \Omega_{k} \cdot \hat{n}_{i} \leq 0\]</div>
<div class="math notranslate nohighlight" id="equation-eq9-2-12">
<span class="eqno">(538)<a class="headerlink" href="#equation-eq9-2-12" title="Permalink to this equation">¶</a></span>\[\text { Side } i \text { is outgoing with respect to } \Omega_{k}: \Omega_{k} \cdot \hat{n}_{i}&gt;0\]</div>
<p>To solve for fluxes (flow) on outgoing sides of a cell, one must know fluxes on
all incoming sides. Each incoming side of each cell will be given from a
boundary condition or will be the outgoing side of an adjacent cell.</p>
<div class="figure align-center" id="id160">
<span id="fig9-2-2"></span><a class="reference internal image-reference" href="_images/fig26.png"><img alt="_images/fig26.png" src="_images/fig26.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 288 </span><span class="caption-text">Orientation of the sides of a cell with respect to a given direction vector.</span><a class="headerlink" href="#id160" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="relationships-between-cells">
<span id="id26"></span><h4>Relationships between cells<a class="headerlink" href="#relationships-between-cells" title="Permalink to this headline">¶</a></h4>
<p>In the ESC method, the shape of the computational cell and the form of
the neutron balance differ from that used in traditional
discrete-ordinates methods. Nevertheless, the relationships between
cells are treated essentially as they would be in traditional
approaches. The entire problem domain is mapped in terms of a set of
finite cells. Each side of each cell is adjacent to either an external
boundary condition or another cell. For each discrete direction, cells
are swept in a predetermined order beginning at a known boundary (from a
specified external boundary condition) moving in the given direction.
The precise order of sweep is such that as the solution for one cell is
obtained, the cell provides sufficient boundary conditions for the
solution of an adjacent cell. Hence, cells sharing a given side share
the value of the angular flux on that side. Knowledge of the flux on all
incoming sides of a cell is sufficient to solve for all outgoing sides.
Once the angular flux has been determined for all sides of the cell for
the given direction, it is possible to use a neutron balance to compute
the average value of the angular flux within the cell.</p>
<p>The sweeping of cells continues for a given direction until all cell
fluxes have been calculated. The procedure is then repeated for the next
direction until all directions have been computed. At this point, the
cell average angular fluxes are known for each cell for each direction
used. Numerical quadrature can then be used to determine the average
scalar flux in each cell in the problem domain. The scalar fluxes are
used to determine fission and scattering reaction rates in each cell and
to update the value of the cell average source, Q. The process is
repeated, and the iteration continues until all scalar fluxes converge
to within a specified tolerance.</p>
<p>This approach can be performed assuming a single energy group or any
number of discretized energy groups. The multigroup approach used in the
ESC method is the standard approach used in most multigroup methods and
is independent of the shape of each computational cell. Hence, the
details of the multigroup formalism will be omitted from this
discussion.</p>
</div>
<div class="section" id="the-set-of-characteristic-directions">
<span id="id27"></span><h4>The set of characteristic directions<a class="headerlink" href="#the-set-of-characteristic-directions" title="Permalink to this headline">¶</a></h4>
<p>The characteristic solution to the transport equation gives only the
angular flux in the direction of the characteristic direction vector <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>.
To compute interaction rates within a cell, one must compute scalar
fluxes. In computing the scalar flux from the set of angular fluxes, it
is convenient to choose the set of characteristic directions from an
appropriate quadrature set. Then the set of computed angular fluxes can
be combined with appropriate directional weights and summed to obtain a
scalar flux solution within a cell. Therefore, it is most appropriate to
choose characteristic directions from an established set of base points
and weights. Such quadrature sets that have been developed and used in
numerous earlier discrete- ordinates approaches are used in NEWT. No
restriction is placed on the nature or order of the quadrature set, as
long as it is sufficient to adequately represent the scalar flux from
computed angular fluxes.</p>
</div>
<div class="section" id="angular-flux-at-a-cell-boundary">
<span id="id28"></span><h4>Angular flux at a cell boundary<a class="headerlink" href="#angular-flux-at-a-cell-boundary" title="Permalink to this headline">¶</a></h4>
<p>As in the development of the SC method, as well as most
finite-difference methods, the ESC approach does not explicitly
determine the flux distribution as a function of position along the
sides of a computational cell. Instead, the angular flux on each cell
side is represented in terms of the average angular flux along the
length of the side. This is sufficient to determine the net leakage
across each cell side, which is needed in order to maintain a cell
balance. An average value of the flux for an incoming side must be
specified from a boundary condition or from the prior solution of an
adjacent cell. The average flux along a given outgoing side can be
computed by integrating the flux along the side and dividing by the
length of the side. However, the form of the distribution of the angular
flux on the side must be known to perform this integration. This
distribution can be determined from the properties of the cell and from
the average flux on each of the known incoming sides.</p>
<p>Because the characteristic solution [Eq. <a class="reference internal" href="#equation-eq9-2-6">(532)</a>] allows calculation of
the angular flux at any point <em>s</em> in a single cell given an initial
condition, the exact value of the flux can be computed at any point on
any outgoing side if the flux along each incoming side is known. As an
initial condition, it is assumed that the angular flux in some
characteristic direction is known at some starting point, <em>s</em> = 0
[i.e., ψ(0) = ψ<sub>0</sub>], on an incoming side. To determine the flux at
some point on an outgoing side, one need know only the distance <em>s</em>
measured along a characteristic direction to the appropriate incoming
side. This method can then be expanded to determine a functional form of
the flux for every point on the outgoing side, which can be integrated
to produce the average outgoing flux on the side.</p>
<p>To develop a mathematical relationship between two arbitrary sides of a
cell, one should first consider two arbitrary coplanar line segments in
space whose endpoints each lie on a pair of parallel lines laid in the
direction <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>, as shown in <a class="reference internal" href="#fig9-2-3"><span class="std std-numref">Fig. 289</span></a>. Points B<sub>1</sub> and B<sub>2</sub>
can be considered to be the “projections” of A<sub>1</sub> and
A<sub>2</sub>, respectively, relative to <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>. Because <em>s</em> is the distance
between a point on segment A and its projection on segment B, it can be
seen that <em>s</em> varies linearly in moving from the “beginning” to the
“end” of the pair of segments.</p>
<div class="figure align-center" id="id161">
<span id="fig9-2-3"></span><a class="reference internal image-reference" href="_images/fig36.png"><img alt="_images/fig36.png" src="_images/fig36.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 289 </span><span class="caption-text">Line endpoints for computation of average fluxes.</span><a class="headerlink" href="#id161" title="Permalink to this image">¶</a></p>
</div>
<p>If α is the distance along segment B measured from endpoint B<sub>1</sub>
and B has a total length L, then the distance <em>s</em> between A and B along
direction <span class="math notranslate nohighlight">\(\Omega_{k}\)</span> can be written as a linear function in terms of the
position α:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-13">
<span class="eqno">(539)<a class="headerlink" href="#equation-eq9-2-13" title="Permalink to this equation">¶</a></span>\[s(\alpha)=s_{1}+\left(\frac{s_{2}-s_{1}}{L}\right) \alpha ,\]</div>
<p>where <em>s</em><sub>1</sub> and <em>s</em><sub>2</sub> are related to the distances along
the characteristic direction between A<sub>1</sub>, B<sub>1</sub> and
A<sub>2</sub>, B<sub>2</sub>, respectively. (It is important to note that
the length <em>s</em> is the same as the distance between the endpoints only
when the characteristic vector lies in the plane of the computational
cell. This is not necessarily the case, depending on the choice of
quadrature directions. This situation is discussed in more detail
later.)</p>
<p>If ψ(α) is the angular flux on side B at a distance α from B<sub>1</sub>,
then <span class="math notranslate nohighlight">\(\bar{\psi}_{\mathrm{B}}\)</span>, the average value of ψ on B, is given by</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-14">
<span class="eqno">(540)<a class="headerlink" href="#equation-eq9-2-14" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{B}=\frac{\int_{0}^{L} \psi(s(\alpha)) d \alpha}{\int_{0}^{L} d \alpha} .\]</div>
<p>Equation <a class="reference internal" href="#equation-eq9-2-6">(532)</a>, the solution to the characteristic equation in the
step approximation, can be rewritten in terms of the average known
angular flux on side A</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-15">
<span class="eqno">(541)<a class="headerlink" href="#equation-eq9-2-15" title="Permalink to this equation">¶</a></span>\[\psi_{B}(s)=\left(\bar{\psi}_{A}-Q / \sigma_{t}\right) e^{-\sigma_{t} s}+Q / \sigma_{t} .\]</div>
<p>Inserting Eqs. <a class="reference internal" href="#equation-eq9-2-13">(539)</a> and <a class="reference internal" href="#equation-eq9-2-15">(541)</a> into Eq. <a class="reference internal" href="#equation-eq9-2-14">(540)</a> and simplifying
yields</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-16">
<span class="eqno">(542)<a class="headerlink" href="#equation-eq9-2-16" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{B}=\frac{1}{L} \int_{0}^{L}\left[\left(\bar{\psi}_{A}-Q / \sigma_{t}\right) \exp \left(-\sigma_{t}\left(s_{1}+\left(\frac{s_{2}-s_{1}}{L}\right) \alpha\right)\right)+Q / \sigma_{t}\right] d \alpha .\]</div>
<p>For the special case in which A and B are parallel,
<em>s</em><sub>1</sub> = <em>s</em><sub>2</sub> and the second term in the exponential
drops out. Equation <a class="reference internal" href="#equation-eq9-2-16">(542)</a> can easily be integrated to obtain</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-17">
<span class="eqno">(543)<a class="headerlink" href="#equation-eq9-2-17" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{B}=\left(\bar{\psi}_{A}-Q / \sigma_{t}\right) e^{-\sigma_{t} s_{1}}+Q / \sigma_{t} .\]</div>
<p>In the more general case, <em>s</em><sub>1</sub> ≠ <em>s</em><sub>2</sub>, the result is
slightly more complicated:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-18">
<span class="eqno">(544)<a class="headerlink" href="#equation-eq9-2-18" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{B}=\frac{\left(\bar{\psi}_{A}-Q / \sigma_{t}\right)}{\sigma_{t}\left(s_{2}-s_{1}\right)}\left[e^{-\sigma_{t} s_{1}}-e^{-\sigma_{t} s_{2}}\right]+Q / \sigma_{t} .\]</div>
<p>Equations <a class="reference internal" href="#equation-eq9-2-17">(543)</a> and <a class="reference internal" href="#equation-eq9-2-18">(544)</a> can also be written in a simplified form:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-19">
<span class="eqno">(545)<a class="headerlink" href="#equation-eq9-2-19" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{B}=\beta_{A B} \bar{\psi}_{A}+\left(1-\beta_{A B}\right) Q / \sigma_{t}\]</div>
<p>where</p>
<blockquote>
<div><div class="math notranslate nohighlight">
\[\]</div>
<p>beta_{A B}=left{begin{array}{cc}
frac{e^{-sigma_{t} s_{1}}-e^{-sigma_{t} s_{2}}}{sigma_{t}left(s_{2}-s_{1}right)} &amp; s_{1} neq s_{2} \
e^{-sigma_{t} s_{1}} &amp; s_{1}=s_{2}
end{array}right.</p>
</div></blockquote>
<p>Thus far, this development has considered only the special case where
contributions to side B are the result only of the cell internal source
and a single incoming side (i.e., side A). For an arbitrarily shaped
cell and discrete direction <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>, it is likely that the outgoing side would
receive contributions from two or more incoming sides, as illustrated in
<a class="reference internal" href="#fig9-2-4"><span class="std std-numref">Fig. 290</span></a>, for a cell with three incoming sides (X, Y, and Z)
contributing to the flux on a single outgoing side (B). In such a
situation, the outgoing side can be subdivided into multiple components.
Side B of <a class="reference internal" href="#fig9-2-4"><span class="std std-numref">Fig. 290</span></a> can be represented by three components,
B<sub>X</sub>, B<sub>Y</sub>, and B<sub>Z</sub>, representing contributions
from line segments X, Y, and Z, respectively. The average angular flux
<span class="math notranslate nohighlight">\(\bar{\psi}\)</span> can be computed for each component of side B using
Eq. <a class="reference internal" href="#equation-eq9-2-19">(545)</a>; then <span class="math notranslate nohighlight">\(\bar{\psi}_{B}\)</span>, the average flux for the entire length of
B, can be calculated by the length-weighted average of each component.
In general, for a given side B composed of <em>n</em> components, the average
flux of the side is given by</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-20">
<span class="eqno">(546)<a class="headerlink" href="#equation-eq9-2-20" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{B}=\sum_{i=1}^{n} \frac{\bar{\psi}_{i} i}{L_{B}}\]</div>
<p>where</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(\ell_{i}\)</span> is the length of the projection of the ith side onto B, and</p>
<p><span class="math notranslate nohighlight">\(\bar{\psi}_{i}\)</span> is the average flux computed for segment B<sub>i</sub> due to the
flux on side <em>i</em></p>
</div></blockquote>
<p>Using Eqs. <a class="reference internal" href="#equation-eq9-2-19">(545)</a> and <a class="reference internal" href="#equation-eq9-2-20">(546)</a>, one can compute the average flux on
each of the outgoing sides for a given cell, once the angular flux on
each incoming side is known. At this point, only distances <em>s</em><sub>1</sub>
and <em>s</em><sub>2</sub> and the lengths <span class="math notranslate nohighlight">\(\ell_{i}\)</span> and L need be determined to estimate
fluxes in an iterative process. These can be computed from the geometry
of the cell and the direction <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>.</p>
<div class="figure align-center" id="id162">
<span id="fig9-2-4"></span><a class="reference internal image-reference" href="_images/fig45.png"><img alt="_images/fig45.png" src="_images/fig45.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 290 </span><span class="caption-text">Contributions of multiple incoming sides to an outgoing side.</span><a class="headerlink" href="#id162" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="mapping-a-characteristic-vector-into-the-two-dimensional-problem-domain">
<span id="id29"></span><h4>Mapping a characteristic vector into the two-dimensional problem domain<a class="headerlink" href="#mapping-a-characteristic-vector-into-the-two-dimensional-problem-domain" title="Permalink to this headline">¶</a></h4>
<p>Even in a 2-D x-y system in which the scalar flux is constant with
respect to the z axis, the angular flux has components in the
z direction. Thus, to obtain the scalar flux at a point on the
x-y plane, one must integrate over the unit sphere in all 4π directions
of <span class="math notranslate nohighlight">\(\Omega\)</span>. Recall that the choices of characteristic directions for this model
were selected to be the same as the set of directions composing a
conventional quadrature set. Quadrature sets specified in the
literature <a class="bibtex reference internal" href="#carlson-transport-1970" id="id30">[Car70]</a><a class="bibtex reference internal" href="#carlson-discrete-1965" id="id31">[CL65]</a><a class="bibtex reference internal" href="#lee-discrete-1962" id="id32">[Lee62]</a> and used in other
discrete-ordinates codes <a class="bibtex reference internal" href="#lathrop-twotran-ii-1973" id="id33">[LB73]</a><a class="bibtex reference internal" href="#engle-jr-users-1967" id="id34">[EJ67]</a> are based on a unit
sphere and are usually specified in terms of μ<sub>k</sub> and η<sub>k</sub>,
the respective x and y components of <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>, where is one of a set of discrete
directions composing the quadrature set. Because <span class="math notranslate nohighlight">\(\Omega_{k}\)</span> is a unit vector, <span class="math notranslate nohighlight">\(\xi_{k}\)</span>, the
z component of the direction, is implicit: <span class="math notranslate nohighlight">\(\xi_{k}=\sqrt{1-\mu_{k}^{2}-\eta_{k}^{2}}\)</span>.
However, because of the 2‑D
nature of the problem, the z component is never explicitly used. It is
therefore sufficient to evaluate the angular flux at a finite number of
points in 4π of <span class="math notranslate nohighlight">\(\Omega\)</span> -space in terms of just the μ<sub>k</sub> and η<sub>k</sub>
components of the discrete directions <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>. One must recognize, however,
that the length of the path traveled by particles moving in a direction
out of the x-y plane is always longer than the x-y projection of the
path, by a factor of (μ<sup>2</sup> + η<sup>2</sup>)<sup>–1/2</sup>. Thus, for any
path length <em>s</em>’ measured in the x‑y plane for a given direction <span class="math notranslate nohighlight">\(\Omega_{k}\)</span>, the
true path length traveled is <em>s</em>, where</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-21">
<span class="eqno">(547)<a class="headerlink" href="#equation-eq9-2-21" title="Permalink to this equation">¶</a></span>\[s=\frac{s^{\prime}}{\sqrt{\mu^{2}+\eta^{2}}} .\]</div>
<p>This is illustrated in <a class="reference internal" href="#fig9-2-5"><span class="std std-numref">Fig. 291</span></a>.</p>
<div class="figure align-center" id="id163">
<span id="fig9-2-5"></span><a class="reference internal image-reference" href="_images/fig54.png"><img alt="_images/fig54.png" src="_images/fig54.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 291 </span><span class="caption-text">Relationship between <em>s</em><sub>1</sub> and <em>s</em><sub>2</sub> and
their projections in the x-y plane.</span><a class="headerlink" href="#id163" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="neutron-balance-within-a-computational-cell">
<span id="id35"></span><h4>Neutron balance within a computational cell<a class="headerlink" href="#neutron-balance-within-a-computational-cell" title="Permalink to this headline">¶</a></h4>
<p>Once angular fluxes have been computed for all sides of a cell, it is
necessary to compute the cell-averaged angular flux. To enforce
conservation, a balance condition is applied to the cell. This provides
the equation necessary to determine the average flux in the cell. The
neutron balance for an arbitrary cell in steady state may be expressed
as</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-22">
<span class="eqno">(548)<a class="headerlink" href="#equation-eq9-2-22" title="Permalink to this equation">¶</a></span>\[\begin{split}\left[\begin{array}{c}
\text { net number of } \\
\text { neutrons moving in } \\
\text { direction } \hat{\Omega} \text { escaping } \\
\text { from the cell }
\end{array}\right]+\left[\begin{array}{c}
\text { number of neutrons } \\
\text { removed from the cell } \\
\text { or from direction } \hat{\Omega} \\
\text { by interactions }
\end{array}\right]=\left[\begin{array}{c}
\text { number of } \\
\text { neutrons produced } \\
\text { in the cell moving } \\
\text { in direction } \hat{\Omega}
\end{array}\right]\end{split}\]</div>
<p>or, expressed mathematically,</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-23">
<span class="eqno">(549)<a class="headerlink" href="#equation-eq9-2-23" title="Permalink to this equation">¶</a></span>\[\oint_{s} n \cdot \hat{\Omega}_{k} \psi d S+\sigma_{t} \bar{\psi} V=Q V,\]</div>
<p>where <span class="math notranslate nohighlight">\(n\)</span> is the outward normal direction at each side of the cell and V is
the 2-D volume of the cell. Note that in this context, <em>S</em> represents
the surface area or perimeter of the cell. Hence, for a cell with <em>m</em>
sides, each of the sides having a constant angular flux <span class="math notranslate nohighlight">\(\bar{\psi}_{i}\)</span> and an outward
normal direction <span class="math notranslate nohighlight">\(\mathrm{n}_{i}\)</span>,</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-24">
<span class="eqno">(550)<a class="headerlink" href="#equation-eq9-2-24" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{c e l l}=\frac{Q}{\sigma_{t}}-\frac{1}{\sigma_{t} V} \sum_{i=1}^{m} \bar{\psi}_{i} \int_{S_{i}} \mathrm{n}_{i} \cdot \hat{\Omega}_{k} d S_{i} .\]</div>
<p>Because each cell is restricted to be a polygon, each side in the cell
will be a straight line and <span class="math notranslate nohighlight">\(\mathrm{n}_{i} \cdot \hat{\Omega}_{k}\)</span> will be constant along the length of the
side. Equation <a class="reference internal" href="#equation-eq9-2-24">(550)</a> can then be simplified to obtain</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-25">
<span class="eqno">(551)<a class="headerlink" href="#equation-eq9-2-25" title="Permalink to this equation">¶</a></span>\[\bar{\psi}_{c e l l}=\frac{Q}{\sigma_{t}}-\frac{1}{\sigma_{t} V} \sum_{i=1}^{m} \bar{\psi}_{i}\left(\mathrm{n}_{i} \cdot \hat{\Omega}_{k} \mathrm{~L}_{i}\right) ,\]</div>
<p>where L<sub>i</sub> is the length of the <em>i</em>th side and the term in
parentheses represents a leakage coefficient for the side.</p>
</div>
</div>
<div class="section" id="coarse-mesh-finite-difference-acceleration">
<span id="id36"></span><h3>Coarse-mesh finite-difference acceleration<a class="headerlink" href="#coarse-mesh-finite-difference-acceleration" title="Permalink to this headline">¶</a></h3>
<p>Beyond cell discretization and solution described above for the ESC
approach, the NEWT iterative approach is similar to that used in other
discrete-ordinates methods. Inner iterations are used to solve spatial
fluxes in each energy group to generate updated source terms; outer
iterations use these source terms to converge all energy groups. This
source-iteration approach can be somewhat slow to converge, especially
when significant scattering is present. Hence, it is desirable to apply
some form of acceleration to the iterative solution used by NEWT. To
this end, a coarse-mesh finite-difference acceleration (CMFD) approach
has been added to NEWT. The CMFD formulation uses a simplified
representation of a complex problem, in which selected rectangular
regions are derived from the global NEWT Cartesian grid and homogenized.
The CMFD formulation utilizes coupling correction factors for each
homogenized cell to dynamically homogenize the constituent ESC-based
polygonal cells during the iterative solution process such that the
heterogeneous transport solution can be preserved. Dynamic-group
collapse is also possible with a two-level CMFD formulation in which
alternating multigroup and two-group calculations are performed. By
extending the concept of the equivalence theory to energy and angle, it
is possible to apply a consistent lower-order formulation in the form of
a homogenized pin-cell, few-group, diffusion-like finite-difference
scheme. This simplified lower-order formulation is much less expensive
to solve, and its solution can be used to accelerate the original
higher-order transport solution in NEWT, resulting in much faster
convergence of the fission and scattering source distributions. This
work is described in detail in <a class="bibtex reference internal" href="#zhong-implementation-2008" id="id37">[ZDX+08]</a> and in previous versions of
the NEWT manual.</p>
<p>Although the original implementation of the CMFD acceleration method is
extremely efficient and actively maintained, its use is limited to
rectangular-domain configurations (e.g., square-pitched fuel lattices).
An alternative CMFD acceleration method has been developed to support
triangular- and hexagonal-domain configurations (e.g.,
triangular-pitched fuel lattices such as the VVER or prismatic graphite
models). The new CMFD acceleration method does not require the
coarse-mesh cells to be rectangles but rather arbitrary polygons.
However in the current implementation, the “unstructured” coarse-mesh
cells are still constructed from the global NEWT Cartesian grid.
Therefore, for a hexagonal configuration, interior coarse-mesh cells
will be rectangular shape whereas cells near the boundary will be
triangular or trapezoidal shapes.</p>
<p>The new unstructured CMFD iterative solution scheme is essentially
identical to the original solution scheme; the two methods differ only
in how the lower-order system is solved. Additionally the two-group
acceleration is not employed in the unstructured CMFD method. Input
options for both CMFD methods are described in <a class="reference internal" href="#id41"><span class="std std-ref">Parameter block</span></a>.</p>
</div>
<div class="section" id="assembly-discontinuity-factors">
<span id="id38"></span><h3>Assembly discontinuity factors<a class="headerlink" href="#assembly-discontinuity-factors" title="Permalink to this headline">¶</a></h3>
<p>In nodal multi-assembly or core calculations, lattice transport
solutions are used to generate few-group homogenized cross sections.
These cross sections are in general obtained from single-assembly
transport calculations with zero-current boundary conditions. Generation
of few-group homogenized cross sections for nodal calculations typically
includes the generation of discontinuity factors (i.e., additional
parameters used to preserve both reaction rates and the interface
currents in the homogenization process). The discontinuity of the flux
at an assembly interface that can arise by the use of homogenized
cross sections is illustrated in <a class="reference internal" href="#fig9-2-6"><span class="std std-numref">Fig. 292</span></a>. The so-called
“homogeneous” flux, computed in the nodal calculation, is discontinuous
at the assembly interface, as opposed to the exact “heterogeneous” flux,
computed in the transport calculation, which is continuous at the
assembly interface. The interface condition employed in nodal
calculations between two assemblies (nodes) <em>i</em> and <em>i</em>+1 is given as</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-26">
<span class="eqno">(552)<a class="headerlink" href="#equation-eq9-2-26" title="Permalink to this equation">¶</a></span>\[\phi_{i, \text { homogeneous }}^{+} \cdot F_{i}^{+}=\phi_{i+1, \text { homogeneous }}^{-} \cdot F_{i+1}^{-} ,\]</div>
<p>where <span class="math notranslate nohighlight">\(F_{i}^{+}\)</span> and <span class="math notranslate nohighlight">\(F_{i+1}^{-}\)</span> are assembly discontinuity factors (ADFs) on each side of the
interface between assemblies <em>i</em> and <em>i</em>+1.</p>
<p>The ADF on the assembly interface is defined as the ratio of the
heterogeneous flux <span class="math notranslate nohighlight">\(\phi_{\text {heterogeneous }}\)</span> at that assembly interface to the homogeneous flux
evaluated at the interface, denoted <span class="math notranslate nohighlight">\(\phi_{i, \text { homogeneous }}^{+}\)</span> (or <span class="math notranslate nohighlight">\(\phi_{i+1, \text { homogeneous }}^{-}\)</span>):</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-27">
<span class="eqno">(553)<a class="headerlink" href="#equation-eq9-2-27" title="Permalink to this equation">¶</a></span>\[F_{i}^{+}=\frac{\phi_{\text {heterogeneous }}}{\phi_{i, \text { homogeneous }}^{+}}, F_{i+1}^{-}=\frac{\phi_{\text {heterogeneous }}}{\phi_{i+1, \text { homogeneous }}^{-}} .\]</div>
<p>Fluxes, and therefore ADFs, vary with energy; therefore, few-group
homogenized cross sections are always accompanied by corresponding
few-group ADFs.</p>
<p>In a single-assembly calculation with zero-current boundary conditions,
the heterogeneous flux at each boundary is easily calculated as the
surface-averaged scalar flux on the boundary, whereas the homogenous
flux at each boundary is simply the assembly-averaged flux. Hence, for
each energy group, the ADF is calculated for each boundary as the ratio
of the average flux on that boundary to the average flux across the
assembly.</p>
<p>In other configurations, such as a multi-assembly calculation or an
assembly located on the edge of a core next to the core baffle and
reflector, the ADF calculation requires more effort. For reflector
situations, NEWT applies a simple one-dimensional (1-D) multigroup
diffusion approximation to determine the ADF at the assembly boundary.
In this approximation, it is assumed that the reflector is infinite and
that the scalar flux goes to zero at infinity. The reflector ADF can be
determined analytically using this boundary condition along with the
known surface-averaged current and scalar flux evaluated at the
assembly/reflector interface.</p>
<p>The reflector ADFs computed by NEWT may potentially be different from
the ADFs calculated using the diffusion approximations employed by the
nodal code. Moreover, ADFs computed for multi-assembly or
hexagonal-domain configurations will depend on the nodal method
employed. For these reasons, NEWT supports the option to edit
surface-averaged scalar flux and current values along user-defined line
segments so that appropriate ADFs can be computed directly by the nodal
code. The input options for the single-assembly ADF, reflector ADF, and
arbitrary line-segment edit are discussed in <a class="reference internal" href="#id112"><span class="std std-ref">Assembly discontinuity factors</span></a>.</p>
<div class="figure align-center" id="id164">
<span id="fig9-2-6"></span><a class="reference internal image-reference" href="_images/fig63.png"><img alt="_images/fig63.png" src="_images/fig63.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 292 </span><span class="caption-text">Heterogeneous vs homogeneous fluxes in a multi-assembly solution.</span><a class="headerlink" href="#id164" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="input-formats">
<span id="id39"></span><h2>Input Formats<a class="headerlink" href="#input-formats" title="Permalink to this headline">¶</a></h2>
<p>NEWT input is free form and keyword based, similar in form to the input for many
other modules in the SCALE code package. Input may start with a title card
record, but this line may be omitted if desired; remaining data are supplied in
data blocks. The order of the data blocks is arbitrary (with two exceptions),
and many blocks are optional.  Only one instance of a data block is allowed.</p>
<div class="section" id="overview-of-newt-data-blocks">
<span id="id40"></span><h3>Overview of newt data blocks<a class="headerlink" href="#overview-of-newt-data-blocks" title="Permalink to this headline">¶</a></h3>
<p>The NEWT input deck data blocks are defined by keyword delimiters in the
following form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read keyword        [data]      end keyword
</pre></div>
</div>
<p>Read routines are terminated by the “end <em>keyword</em>” label, and any
intervening carriage returns or line feeds are ignored. Thus, data can
also be entered in this format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read keyword
[data]
[data]
end keyword
</pre></div>
</div>
<p>Within each block, specific control or specification parameters are
input. Each block contains a fixed set of input parameters (also defined
by keyword).</p>
<p>As with other keyword-driven modules within SCALE, lines beginning with
a single quote (‘) in the first column are treated as comments and
ignored.</p>
<p>The keyword name and general contents of each data block are as follows:</p>
<table class="longtable docutils align-center">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Block type</strong></p></td>
<td><p><strong>Recognized
keywords</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>Problem control
parameters</p>
<p><a class="reference internal" href="#id41"><span class="std std-ref">Parameter block</span></a></p>
</td>
<td><p>parameter,
parameters, param,
parm, para</p></td>
<td><p>General problem
parameters—must
follow title card, if
used (optional)</p></td>
</tr>
<tr class="row-odd"><td><p>Material properties</p>
<p><a class="reference internal" href="#id62"><span class="std std-ref">Material Block</span></a></p>
</td>
<td><p>material, materials,
matl</p></td>
<td><p>Assigns
characteristics
(e.g., P<sub>n</sub>
scattering order and
material description)
for each material
ID—must follow
problem control block
or must follow title
card if control block
is omitted (required)</p></td>
</tr>
<tr class="row-even"><td><p>Broad group collapse</p>
<p><a class="reference internal" href="#id64"><span class="std std-ref">Collapse block</span></a></p>
</td>
<td><p>collapse, coll</p></td>
<td><p>Defines broad group
energy ranges to be
created from the
original fine group
library when cross
section collapse is
desired (optional)</p></td>
</tr>
<tr class="row-odd"><td><p>Simple-body geometry</p>
<p><a class="reference internal" href="#id65"><span class="std std-ref">Geometry block</span></a></p>
</td>
<td><p>geometry, geom</p></td>
<td><p>Defines basic grid
structure and all
bodies to be placed
within this structure
(required unless
geometry restart file
is available)</p></td>
</tr>
<tr class="row-even"><td><p>Boundary conditions</p>
<p><a class="reference internal" href="#id91"><span class="std std-ref">Boundary conditions</span></a></p>
</td>
<td><p>bounds, bnds</p></td>
<td><p>Defines boundary
conditions to be
applied on outer
boundaries of global
unit (optional,
default is reflective
on all sides)</p></td>
</tr>
<tr class="row-odd"><td><p>Array specifications</p>
<p><a class="reference internal" href="#id106"><span class="std std-ref">Array definition</span></a></p>
</td>
<td><p>array</p></td>
<td><p>Defines composition
of all arrays (unit
placement within each
array). Each array
placed within the
geometry block must
be defined in the
array block</p></td>
</tr>
<tr class="row-even"><td><p>Homogenization
instructions</p>
<p><a class="reference internal" href="#id111"><span class="std std-ref">Homogenization block</span></a></p>
</td>
<td><p>homog, hmog, homo</p></td>
<td><p>Defines mixtures to
be flux weighted and
homogenized in the
preparation of a
homogenized cross
section library
(optional)</p></td>
</tr>
<tr class="row-odd"><td><p>Assembly
discontinuity factors</p>
<p><a class="reference internal" href="#id112"><span class="std std-ref">Assembly discontinuity factors</span></a></p>
</td>
<td><p>adf</p></td>
<td><p>Assigns type and
location of planes at
which assembly
discontinuity factors
(ADFs) are calculated
(optional)</p></td>
</tr>
<tr class="row-even"><td><p>Flux plane</p>
<p><a class="reference internal" href="#id114"><span class="std std-ref">Flux planes</span></a></p>
</td>
<td><p>flux</p></td>
<td><p>Allows definition of
an x- or y-axis line
(plane) for which
average fluxes are
computed and printed
(optional)</p></td>
</tr>
<tr class="row-odd"><td><p>Mixing table</p>
<p><a class="reference internal" href="#id115"><span class="std std-ref">Mixing table block</span></a></p>
</td>
<td><p>mixtable, mixt</p></td>
<td><p>Mixing table
specification
(optional)</p></td>
</tr>
<tr class="row-even"><td><p>Source definition</p>
<p><a class="reference internal" href="#id63"><span class="std std-ref">Source block</span></a></p>
</td>
<td><p>src, source</p></td>
<td><p>Defines particle
source strength for
use in source
calculations</p></td>
</tr>
</tbody>
</table>
<p>Each of the following subsections describes the parameters associated
with a specific data block, lists default values (if available), and
describes meaning of the parameter and its effect on a NEWT calculation.</p>
</div>
<div class="section" id="parameter-block">
<span id="id41"></span><h3>Parameter block<a class="headerlink" href="#parameter-block" title="Permalink to this headline">¶</a></h3>
<p><strong>Parameter Block keyword = param, parm, para, parameter, or
parameters</strong></p>
<p>The Parameter block contains problem control parameters and must come
immediately after the title card if one is used. Valid parameter
specifications are described below. For each keyword, allowable values
are listed in parentheses, and the default (if any) is listed in
brackets. Input that can take an arbitrary integer value is indicated by
an <em>IN</em>; similarly, any parameter that can take an arbitrary
real/floating point value is indicated by <em>RN</em> as the allowable value.
However, note that SCALE read routines do allow input of integers for
real numbers, and vice versa; the number will be converted accordingly.
The order of the parameters within the block is arbitrary, and may be
skipped if a default value is desired for that parameter. Control
parameters are set in the order in which they are input; this means that
the same parameter may be listed multiple times, but only the final
value is used.</p>
<div class="section" id="convergence-and-acceleration-parameters">
<span id="id42"></span><h4>Convergence and acceleration parameters<a class="headerlink" href="#convergence-and-acceleration-parameters" title="Permalink to this headline">¶</a></h4>
<p><strong>epseigen=</strong>(<em>RN</em>) — Convergence criterion for <em>k</em><sub>eff</sub>. [0.0001]</p>
<p><strong>epsinner=</strong>(<em>RN</em>) — Spatial convergence criterion for inner
iterations. [0.0001]</p>
<p><strong>epsouter=</strong>(<em>RN</em>) — Spatial convergence criterion for outer
iterations. [0.0001]</p>
<p><strong>epsthrm=</strong>(<em>RN</em>) — Spatial convergence criterion for
thermal-upscattering iterations, if enabled. [same value as
<strong>epsouter</strong>]</p>
<p><strong>epsilon=</strong>(<em>RN</em>) — Simultaneously sets all (spatial and eigenvalue)
convergence criteria to the same value. [uses individual defaults]</p>
<p><strong>converg</strong>=(<em>cell/mix</em>) — Sets the region within which convergence
testing is applied. Use of <em>cell</em> will force converged scalar fluxes in
every computation cell, while <em>mix</em> will relax convergence such that
averaged scalar fluxes within a mixture are converged. The latter is
useful for mixtures in which fluxes become very small—large reflectors
or near a vacuum BC. [cell]</p>
<p><strong>therm</strong>=(<em>yes/no</em>) — Enables/disables thermal-upscattering
iterations. [yes]</p>
<p><strong>inners=</strong>(<em>IN</em>) — Maximum number of inner iterations in an energy
group. [5]</p>
<p><strong>therms=</strong>(<em>IN</em>) — Maximum number of thermal-upscattering iterations,
if enabled. [2]</p>
<p><strong>outers=</strong>(<em>IN</em>) — Maximum number of outer iterations. NEWT will stop
with an error code if more than <em>outers</em> outer iterations are required
for convergence. [250]</p>
<p><strong>inrcvrg</strong>=(<em>yes/no</em>) — If inrcvrg=yes, NEWT will continue outer
iterations until all convergence criteria are met. If inrcvrg=no, NEWT
will stop whenever outer iteration and <em>k</em><sub>eff</sub> convergence criterion
are met, regardless of the convergence of inner or thermal-upscattering
iterations. [no]</p>
<p><strong>cmfd=</strong>(<em>no/rect/yes/part</em>) — CMFD acceleration option. If cmfd=no,
CMFD acceleration is not employed. If cmfd=rect, the CMFD method is
employed. The original NEWT CMFD method can be applied only to
rectangular-domain configurations. If cmfd=yes, the unstructured CMFD
method is employed. The new unstructured CMFD method can be applied to
rectangular-, triangular-, and hexagonal- domain configurations. If
cmfd=part, an alternative version of the unstructured CMFD method is
employed and uses a “partial-current” acceleration scheme.
Alternatively, users can use cmfd=0/1/2/3 for no, rect, yes, and part,
respectively. [no]</p>
<p><strong>cmfd2g=</strong>(<em>yes/no</em>) — Enables/disables the second-level two-group
CMFD accelerator within the CMFD solver. This parameter has an effect
only when cmfd=rect is set. [yes]</p>
<p><strong>accel=</strong>(<em>yes/no</em>) — Enables/disables source (<em>k</em><sub>eff</sub>)
acceleration. This parameter is automatically disabled if unstructured
CMFD is employed (cmfd=yes or cmfd=part). [yes]</p>
<p><strong>xcmfd</strong>=(<em>IN),</em> <strong>ycmfd</strong>=(<em>IN),</em> <strong>xycmfd</strong>=(<em>IN)</em> —
These inputs specify the number of fine-mesh cells in the global NEWT
grid per coarse-mesh cell. These options are used only when CMFD
acceleration is enabled. The parameter <em>xcmfd</em> specifies the number
fine-mesh cells per coarse-mesh cell in the x‑direction. Likewise,
<em>ycmfd</em> specifies the number of fine-mesh cells per coarse-mesh cell in
the y‑direction. The parameter <em>xycmfd</em> simultaneously sets <em>xcmfd</em> and
<em>ycmfd</em> to the same value. In a special case for rectangular-domain
configurations in which the entire domain is completely filled by a
square-type array (see <a class="reference internal" href="#id106"><span class="std std-ref">Array definition</span></a>), <em>xycmfd=0</em> sets the coarse mesh
based on the size of the array elements. [1]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Default convergence parameters are recommended for general analysis.
Larger convergence criteria are useful for debugging if shorter run time
is desired over solution accuracy. Smaller convergence criteria are
recommended for generating reference solutions or benchmark
calculations.</p>
<p>CMFD acceleration should be applied whenever possible. The CMFD method
with second-level 2-group acceleration should be applied for
rectangular-domain configurations [e.g., light water reactor (LWR)
assembly models (<em>**cmfd=rect*</em><em>), by default</em><strong>cmfd2g=yes</strong><em>].
The unstructured CMFD method should be applied for triangular- or
hexagonal-domain configurations (</em><strong>cmfd=yes</strong><em>). If NEWT detects an
unstable CMFD condition, a warning message is printed and NEWT continues
with CMFD disabled. NEWT may also provide a terminating error message if
improper selection of the coarse mesh is detected. Internal
investigation has shown that the coarse mesh should be approximately the
same size as the unit cell used in the model. For LWR assembly models, a
fine mesh of 4 x 4 is recommended for the square-pitched unit cell,
implying that</em><strong>xycmfd</strong><em>should be 4 only if the global unit has a
mesh. If individual meshes are used in each unit definition, then the
global unit coarse-mesh cells should be sized based on the unit cell
size and, therefore, xycmfd=1 should be used. The values
of</em><strong>xcmfd</strong><em>and</em><strong>ycmfd</strong><a href="#id43"><span class="problematic" id="id44">*</span></a>do not have to be a common factor of
the number of fine-mesh cells in a given direction (NEWT will make the
last coarse-mesh cell smaller than the other coarse-mesh cells), but it
is highly recommended.</p>
<p>Users can gauge solution convergence by the outer iteration edit as it
is printed to the terminal window (<em>**echo=yes*</em><a href="#id45"><span class="problematic" id="id46">*</span></a>, see below). One
can terminate a calculation prematurely (via the Control-C option on
most platforms) if convergence or iteration parameters need to be
modified.</p>
<p>The TRITON control module supports a sensitivity and uncertainty
analysis sequence TSUNAMI-2D (See TRITON chapter, section S/U Analysis
Sequences (TSUNAMI-2D, TSUNAMI-2DC)). TSUNAMI-2D calculations require
NEWT to be run in both forward mode and adjoint mode. In adjoint mode,
CMFD acceleration is not currently supported and NEWT automatically
disables its use if*<strong>cmfd=yes</strong><em>,</em><strong>=rect</strong><em>,
or</em><strong>=part</strong><a href="#id47"><span class="problematic" id="id48">*</span></a>. In adjoint mode with defined fixed source [i.e.,
generalized perturbation theory (GPT) analysis], it is observed that
tighter convergence and iteration parameters are needed to properly
remove fundamental mode contamination. (For more details, see SAMS
chapter: Generalized Perturbation Theory.) To facilitate the CMFD
options and larger convergence criteria for the forward calculations as
well as smaller convergence criteria for GPT adjoint calculations, the
following parameters are also available.</p>
</div>
<p><strong>gptepsinner=</strong>(<em>RN</em>) — Spatial convergence criterion for inner
iterations in GPT analysis. [0.0001]</p>
<p><strong>gptepsouter=</strong>(<em>RN</em>) — Spatial convergence criterion for outer
iterations in GPT analysis. [0.001]</p>
<p><strong>gptepsthrm=</strong>(<em>RN</em>) — Spatial convergence criterion for
thermal-upscattering iterations, if enabled, in GPT analysis. [same
value as <strong>gptepsouter</strong>]</p>
<p><strong>gptsepsilon=</strong>(<em>RN</em>) — Simultaneously sets all spatial convergence
criteria to the same value in GPT analysis. [uses individual defaults]</p>
<p><strong>gpttherm</strong>=(<em>yes/no</em>) — Enables/disables thermal-upscattering
iterations in GPT analysis. [yes]</p>
<p><strong>gptinners=</strong>(<em>IN</em>) — Maximum number of inner iterations in an energy
group in GPT analysis. [500]</p>
<p><strong>gpttherms=</strong>(<em>IN</em>) — Maximum number of thermal-upscattering
iterations, if enabled, in GPT analysis. [10]</p>
<p><strong>gptouters=</strong>(<em>IN</em>) — Maximum number of outer iterations in GPT
analysis. NEWT will stop with an error code if more than <em>outers</em> outer
iterations are required for convergence. [2000]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Default values for GPT convergence may change with future releases, as
more experience is gained and user feedback is received. If the GPT
calculation is not converging because of fundamental mode contamination,
it is recommended that convergence criteria be decreased and/or inner
and thermal-upscattering iteration limits be increased. If the solution
convergence is slow,*<strong>gptinners</strong><em>can potentially be decreased.
Again, it is highly recommended that</em><strong>echo=yes</strong><a href="#id49"><span class="problematic" id="id50">*</span></a>be used to monitor
speed of convergence.</p>
</div>
</div>
<div class="section" id="output-editing">
<span id="id51"></span><h4>Output editing<a class="headerlink" href="#output-editing" title="Permalink to this headline">¶</a></h4>
<p><strong>drawit=</strong>(<em>yes/no</em>) — Create a PostScript file showing the grid
structure determined from input. Two files are created—the first showing
the grid structure and the second showing the material placement.
(Features and use of this simple graphics capability are described
further in <a class="reference internal" href="#id156"><span class="std std-ref">Postscript graphics files</span></a>) [no]</p>
<p><strong>echo=</strong>(<em>yes/no</em>) — During the iteration phase of execution, output
is generated at the beginning of each outer iteration. This same
information can be printed to SCALE message file (.msg) during iteration
by setting echo=yes. [no]</p>
<p><strong>prtbalnc</strong>=<em>(yes/no)</em> — Flag indicating whether or not balance
tables for fine-group mixtures should be printed. [no]</p>
<p><strong>prtbroad=</strong>(<em>yes/no/1d</em>) — Flag indicating whether or not broad
group cross sections should be printed in problem output. The <em>1d</em>
option indicates that 2-D scattering tables are not to be printed. This
flag has no effect if collapse=no is specified. [no]</p>
<p><strong>prthmmix=</strong>(<em>yes/no</em>) — Flag indicating whether or not homogenized
mixture macroscopic cross sections should be printed in problem output.
Homogenized cross sections are printed only if Homogenization Block is
provided (<a class="reference internal" href="#id111"><span class="std std-ref">Homogenization block</span></a>). [yes]</p>
<p><strong>prtflux</strong><em>=(yes/no)</em> — Create a PostScript plot file showing flux
distribution for each energy group in problem. If an energy collapse is
performed, a second plot file is generated for the fluxes of the
collapsed group structures. [no]</p>
<p><strong>prtmxsec=</strong>(<em>yes/no/1d</em>) — Flag indicating whether or not mixture
macroscopic cross sections should be printed in problem output. The <em>1d</em>
option indicates that 2-D scattering tables are not to be printed. [no]</p>
<p><strong>prtmxtab=</strong>(<em>yes/no</em>) — Flag indicating whether or not the input
mixing table should be printed in problem output. [no]</p>
<p><strong>prtxsec=</strong>(<em>yes/no/1d</em>) — Flag indicating whether or not input
microscopic cross sections should be printed in problem output. The <em>1d</em>
option indicates that 2-D scattering tables are not to be printed. [no]</p>
<p><strong>timed=</strong>(yes/no) — Turns on printing of iteration timing and CPU use
data. [no]</p>
<p><strong>det=</strong>(<em>IN</em>) — Specifies the mixture used to represent a local power
range monitor (LPRM) and/or Traversing In-core Probe (TIP) detector
located within a fuel lattice. The mixture must also be included in a
homogenization block in order to obtain detector cross sections. [has no
default]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>With the exception of*<strong>prthmmix</strong><em>, all output edit options are
disabled unless requested by the user. The output edits are disabled by
default to minimize the size of the output. The</em><strong>drawit</strong><em>option is
recommended to generate PostScript plots of the model grid structure and
material placement. As previously mentioned,
the</em><strong>echo</strong><em>and</em><strong>timed</strong><em>options are recommended to monitor
solution convergence. If the timed option is enabled, each line in the
outer iteration edit will be longer than 80 characters. Therefore, it is
recommended that Windows users should increase the Command Window size
from 80 characters to 132</em> characters.</p>
</div>
</div>
<div class="section" id="angular-quadrature">
<span id="id52"></span><h4>Angular quadrature<a class="headerlink" href="#angular-quadrature" title="Permalink to this headline">¶</a></h4>
<p><strong>sn=</strong>(<em>2/4/6/8/10/12/14/16</em>) — Order of Sn level symmetric
quadrature set. [6]</p>
<p><strong>nazim</strong>=(<em>IN</em>) — Number of equally spaced azimuthal directions in
a product quadrature set. Used in tandem with <em>npolar</em> keyword (both
must be specified). Total number of angles in the product quadrature set
is the product of <em>nazim</em> and <em>npolar</em>. [No default. If not specified,
level symmetric quadrature default is used.]</p>
<p><strong>npolar</strong>=(<em>IN</em>) — Number of polar angles in a product quadrature
set (determined using a Gauss-Legendre polynomial). Used in tandem with
<em>nazim</em> keyword (both must be specified). Total number of angles in the
product quadrature set is the product of <em>nazim</em> and <em>npolar</em>. [No
default. If not specified, level symmetric quadrature default is used.]</p>
<p><strong>dgauss=</strong>(yes/no) — Enables/disables use of double Gauss-Legendre
product quadrature set. If disabled, single Gauss-Legendre product
quadrature sets are used. [no]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If both level symmetric quadrature sets and product quadrature sets are
requested, the level symmetric quadrature set is to be used. Level
symmetric quadrature sets are recommended for general analysis. If
reflective boundary conditions are desired for hexagonal-domain
configurations, product quadrature sets must be used and nazim must be a
multiple of 3. If reflective boundary conditions are desired for
triangular-domain configurations, product quadrature sets must be used
and*<strong>nazim</strong><a href="#id53"><span class="problematic" id="id54">*</span></a>must be an odd number.</p>
</div>
</div>
<div class="section" id="control-options">
<span id="id55"></span><h4>Control options<a class="headerlink" href="#control-options" title="Permalink to this headline">¶</a></h4>
<p><strong>adjoint=</strong>(<em>yes/no</em>) — This keyword specifies either a forward
(adjoint=no) or adjoint (adjoint=yes) calculation. [no]</p>
<p><strong>forward=</strong>(<em>yes/no</em>) — This keyword specifies either a forward
(forward=yes) or adjoint (forward=no) calculation. If adjoint and
forward are both specified, NEWT uses the last specification. [yes]</p>
<p><strong>gpt=</strong>(<em>yes/no</em>) — This keyword specifies whether this is a GPT
adjoint calculation. The <em>gpt</em> keyword is active only for adjoint
calculations. [no]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The TRITON control module automatically sets the values for forward,
adjoint, and gpt keywords; therefore, they can typically be omitted from
the Parameter Block. Default values are recommended unless running
stand-alone NEWT adjoint calculations.</p>
</div>
<p><strong>run=</strong>(<em>yes/no</em>) — A run=no calculation will perform all setup
calculations normally performed before beginning iterations and then
will stop. It is useful for debugging input and obtaining plots of the
input geometry. Run=yes will perform a complete calculation. [yes]</p>
<p><strong>premix=</strong>(<em>yes/no</em>) — This flag indicates whether the cross section
library contains microscopic (premix=no) or macroscopic (premix=yes)
cross sections. In essence, it creates a mixing table with a mixture
fraction of 1.0 for each mixture on the library. Other mixing tables are
ignored. The premixed cross section option is active only for
stand-alone NEWT calculations. [no]</p>
<p><strong>kguess=</strong>(<em>RN</em>) — Initial guess at eigenvalue for an eigenvalue
calculation. This parameter may be entered but is not used if a source
calculation is performed or a restart file is used to determine the
initial guess. [1.0]</p>
<p><strong>restart=</strong>(<em>yes/no</em>) — If restart=yes is specified, NEWT will open
file <em>restart_newt</em> and read scalar fluxes and fission rates, enabling a
restart from the point at which a previous calculation ended. The file
<em>restart_newt</em> is always written by NEWT at the end of every successful
calculation. The code assumes that all geometry is unchanged from the
previous calculation but does allow restart with a different angular
quadrature set and P<sub>n</sub> scattering coefficients. A low-order
solution can be used to accelerate a higher-order solution by restarting
using the converged flux of the lower-order solution. [no]</p>
<p><strong>savrest=</strong>(<em>yes/no</em>) — Determines whether or not a geometry restart
file <em>worf</em> is written at the end of a calculation. If written, it will
overwrite any existing geometry restart file. [yes]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The default values of savrest and kguess are recommended. The TRITON
control module automates generation and reuse of the geometry restart
file, as well as the initial guess of the eigenvalue. Keywords run,
premix, and restart can generally be omitted unless the following
conditions are applicable:</p>
<ul class="simple">
<li><p>TRITON T-NEWT sequence calculation or stand-alone NEWT calculation
with user-supplied restart file, restart=yes.</p></li>
<li><p>Stand-alone NEWT calculation with user-supplied premixed cross
section file, premix=yes.</p></li>
<li><p>Interested only in performing setup calculations to debug input and
generate geometry plots, run=no, and/or PARM=CHECK in the TRITON
sequence input.</p></li>
</ul>
</div>
<p><strong>solntype</strong>=(keff/b1/src) — Specifies solution mode type: keff is
eigenvalue, b1 is eigenvalue mode followed by a buckling correction, and
src is fixed source (no eigenvalue calculation). Fixed source
calculations require additional data for the source specification (see
Materials and Source data blocks in <a class="reference internal" href="#id62"><span class="std std-ref">Material Block</span></a> and <a class="reference internal" href="#id63"><span class="std std-ref">Source block</span></a>). [keff]</p>
<p><strong>collapse=</strong>(<em>yes/no</em>) — If collapse=yes is specified, a
flux-weighted collapse is performed by material number; cross sections
for each nuclide in each material in the problem are collapsed to a
specified (or default) group structure based on the average flux in that
material. If collapse=yes, NEWT will look for the <em>collapse</em> parameter
block; if not found, NEWT will generate cross sections based on the
original group structure. If a Homogenization block is present, then
collapse is always set to yes. [no]</p>
<p><strong>saveangflx=</strong>(<em>yes/no</em>) — Option to save angular flux solution. The
angular flux is saved to a binary file used in the TSUNAMI-2D sequence
of the TRITON control module. Because the angular flux can require
significant file storage, it is not saved by default. The angular flux
solution can and should be saved for TSUNAMI-2D calculations to generate
more accurate sensitivity coefficients. [no]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Keyword threads should be omitted in favor of the SCALE command line–I
option. Keywords solntype, collapse, and saveangflx should be omitted
unless the following conditions are applicable.</p>
<ul class="simple">
<li><p>For homogenized few-group cross section generation for nodal
calculations, solntype* <a href="#id56"><span class="problematic" id="id57">*</span></a>should be b1. This option will perform a
critical spectrum calculation, which will be folded into cross
section homogenization calculation. The critical spectrum is also
folded into the generation of ADFs and reaction rates for
depletion calculations.</p></li>
<li><p>Generation of a new collapsed cross section library, collapse=yes.</p></li>
<li><p>For TSUNAMI-2D calculations, saveangflx=yes.</p></li>
</ul>
</div>
<div class="section" id="geometry-processing-options">
<span id="id58"></span><h5>Geometry processing options<a class="headerlink" href="#geometry-processing-options" title="Permalink to this headline">¶</a></h5>
<p><strong>combine</strong>=(<em>yes/no</em>) — Automatic grid generation can result in
very small grid cells in some locations. Setting parameter combine to
<em>yes</em> performs automatic combination of smaller grid cells into adjacent
neighbor of same material, if possible. Combine is automatically set to
<em>no</em> if CMFD is enabled; this setting cannot be overridden. [no]</p>
<p><strong>clearint</strong>=(<em>yes/no</em>) — Grid generation option that removes the
global NEWT grid if a local unit grid is supplied. (For meshing options,
see the <em>boundary</em> keyword in the Geometry block description in
<a class="reference internal" href="#id65"><span class="std std-ref">Geometry block</span></a>) By default, clearint is set to yes, which means the
global grid is removed if local grids are provided. If CMFD acceleration
is enabled, clearint is set to no, which means both the global grid and
optional local grids are used. [yes]</p>
<p><strong>grid_tol=</strong>(<em>RN</em>) — Tolerance used in determining if polygon
vertices are numerically identical during NEWT grid generation.
[0.000001]</p>
<p><strong>cell_tol=</strong>(<em>RN</em>) — Tolerance used in determining if polygon
vertices are numerically identical during NEWT cell generation.
[0.000001]</p>
<p><strong>line_tol=</strong>(<em>RN</em>) — Tolerance used in determining if polygon
vertices are numerically identical during NEWT line generation.
[1.0e-10]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The default values for all geometry-processing keywords are recommended
and can be omitted. For problems with very fine mesh, tighter grid and
cell tolerances should be applied. For problems that terminate with a
ray-tracing error (i.e., tracer error), tighter grid and cell tolerances
should be applied.</p>
</div>
</div>
</div>
<div class="section" id="critical-spectrum-options">
<span id="id59"></span><h4>Critical spectrum options<a class="headerlink" href="#critical-spectrum-options" title="Permalink to this headline">¶</a></h4>
<p><strong>useb1</strong>=(<em>yes/no</em>) —Turns on/off the use of the B1 approximation
to determine the critical spectrum. If useb1 is set to no, the P1
approximation is used. [yes]</p>
<p><strong>b2=</strong>(<em>RN</em>) — Material buckling factor, in units of 1/cm<sup>2</sup>.
[0.0]</p>
<p><strong>height=</strong>(<em>RN</em>) — Height (transverse dimension) in centimeters. Used
in a geometric buckling correction to calculate leakage normal to the
plane of the input 2-D model. Keywords <strong>dz=</strong> and <strong>deltaz=</strong> are
equivalent. When set to zero (default), no buckling correction is
performed. [0.0]</p>
<p><strong>bf=</strong>(<em>RN</em>) — Twice the extrapolation distance multiplier used to
determine the geometric buckling correction. [1.420892]</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If critical spectrum corrections are to be applied, the default values
listed above are recommended along with <strong>solntype=b1</strong>. In this
option, NEWT will search for the material buckling value such that the
homogenized infinite-medium system is critical. NEWT currently uses the
B1 approximation as the default. If the P1 approximation is preferred,
useb1should be set to no. The infinite-medium B1 (or P1) buckling search
is performed in the energy group structure as the original model.</p>
<p>Alternatively, the user can supply the material buckling value using
the b2 keyword, and specifying the B1 (default) or P1
approximation ( <strong>useb1=no</strong> ). In this
case, <strong>solntype</strong> should be set to <strong>keff</strong>.</p>
<p>Alternatively, if the user knows the transverse dimension, a geometry
buckling factor can be applied, derived from the
user-defined <strong>height</strong> and extrapolation distance
term <strong>bf</strong> as the following:</p>
<p><span class="math notranslate nohighlight">\(B_{g}^{2}=\left(\frac{\pi}{H+z / \sigma_{t r}}\right)^{2}\)</span></p>
<p>In this formula, H is keyword height, z is keyword bf, and <span class="math notranslate nohighlight">\(\sigma_{t r}\)</span> is the
collapsed, homogenized macroscopic transport cross section.</p>
</div>
</div>
<div class="section" id="file-unit-options">
<span id="id60"></span><h4>File unit options<a class="headerlink" href="#file-unit-options" title="Permalink to this headline">¶</a></h4>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is highly recommended that the file unit options below be omitted or
that default values be used. Alternate file unit values are acceptable
for stand-alone NEWT calculations, but changing their values may
adversely impact other SCALE modules if NEWT is invoked through a SCALE
sequence.</p>
</div>
<p><strong>hmoglib=</strong>(<em>IN, 0&lt;IN&lt;100</em>) — This input value specifies the unit
number to which a collapsed and homogenized cross section library is
written if homogenization instructions are provided (ft*IN*f001). [13]</p>
<p><strong>mixtab=</strong>(<em>IN, 0&lt;IN&lt;100</em>) — NEWT is able to use a mixing table
prepared by SCALE (which may be generated using the T-XSEC sequence).
The value of <em>IN</em> defines the filename that NEWT will try to locate to
read mixing data (i.e., mixtab=92 will cause NEWT to seek the file named
ft92f001). This is the default filename produced by the T-XSEC sequence.
Alternatively, a mixing table may be specified in NEWT input in the
<em>read mixtable</em> block; if such a mixing table is supplied, the value of
<em>mixtab</em> is ignored. [92]</p>
<p><strong>wtdlib=</strong>(<em>IN, 0&lt;IN&lt;100</em>) — This input value specifies the unit
number to which a collapsed cross section library is written if
<em>collapse=yes</em> is specified (ft*IN*f001). <em>IN</em> must be positive and
less than 100. [30]</p>
<p><strong>xnlib=</strong>(<em>IN, 0&lt;IN&lt;100</em>) — This number indicates the filename
containing cross sections prepared in a problem-dependent AMPX working
library format. The input xnlib=<em>IN</em> will cause NEWT to open file
ft<em>IN</em>f001. This is the only method for providing cross sections as
input for NEWT <a class="bibtex reference internal" href="#hildebrand-advanced-1976" id="id61">[Hil76]</a>.</p>
<p>Examples of input for the parameter block are given below. Note that the
two inputs are functionally identical. In the first example, parameters
are specified, while in the second example, the input is structured
differently and takes advantage of default values.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read parm
  solnmode=keff adjoint=no run=yes prtflux=no prtbroad=yes
  mixtab=92 xnlib=4 wtdlib=30 collapse=yes accel=yes sn=6
  outers=100 epsinner=1.0e-4 epsouter=1.0e-4 epseigen=1.0e-5
  kguess=1.34 restart=no prtxsec=yes prtmxsec=yes prtmxtab=yes
end parm

read parm collapse=yes outers=100 epseigen=1.0e-5 kguess=1.34
prtxsec=yes prtmxsec=yes prtbroad=yes end parm
</pre></div>
</div>
</div>
</div>
<div class="section" id="material-block">
<span id="id62"></span><h3>Material Block<a class="headerlink" href="#material-block" title="Permalink to this headline">¶</a></h3>
<p><strong>Material block keyword = matl, material, materials</strong></p>
<p>The Material block is always required. Material data must be specified
for each mixture used in the calculation. The general format of the
Material block is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>READ materials
      mix=M pn=N srcid=I com=’embedded comment’ end
END materials
</pre></div>
</div>
<p>where</p>
<blockquote>
<div><p>M = mixture ID;</p>
<p>N = P<sub>n</sub> order for scattering in mixture M (by default, N is 1);</p>
<p>I = Source ID number (the source description for each source ID number
is given in the Source block).</p>
</div></blockquote>
<p>Up to 80 characters of text may be entered after <em>com=</em>, delimited by
single quotes (‘) or double quotes (‘’). A mixture specification is
required for each mixture used in the NEWT calculation. The order of the
keywords in each specification is unimportant, and only the mix= keyword
is required; however, each mixture specification <strong>must</strong> be terminated
by the <strong>end</strong> keyword.</p>
<p>A sample Material block is provided below for three different mixtures.
Each mixture is specified in a different manner to illustrate different
input formats. In this example, P3 scattering is applied in mixture 3,
and water and P1 are applied in the other mixtures. The pn= keyword is
omitted for mixture 1. The com= keyword is omitted for mixture 2.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>READ materials
  mix=3  pn=3  com=&#39;water&#39; end
  mix=1  com=&#39;3.0 enriched fuel&#39; end
  mix=2  pn=1  end
END materials
</pre></div>
</div>
<p>Consider this same set of mixtures but with a fixed source identified by source
ID 100 in mixture 1. This specification could be written as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>READ materials
  mix=3  pn=3  com=&#39;water&#39; end
  com=&#39;3.0 enriched fuel&#39; mix=1  pn=1 srcid=100 end
  pn=1  mix=2 end
END materials
</pre></div>
</div>
</div>
<div class="section" id="source-block">
<span id="id63"></span><h3>Source block<a class="headerlink" href="#source-block" title="Permalink to this headline">¶</a></h3>
<p><strong>Source block keyword=source, src</strong></p>
<p>The Source block contains source strength specifications associated with
a given source ID. The source is assigned to a mixture via the srcid=
keyword in the Material block (<a class="reference internal" href="#id62"><span class="std std-ref">Material Block</span></a>). Data are input using a
keyword-based format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>READ source
      id=I typ=T com=’embedded comment’ src=X end
END source
</pre></div>
</div>
<p>where</p>
<blockquote>
<div><p>I = Source ID number,</p>
<p>T = Source type,</p>
<p>X = List of source strength values, according to type T.</p>
</div></blockquote>
<p>Up to 80 characters of text may be entered after <em>com=</em>, delimited by
single quotes (‘). The comment string is optional—the remaining
parameters are required. Currently, only two source types are supported;
the definition of X depends on the source type.</p>
<p>Source type 0 (<em>typ=0</em>): A single value of X is supplied—this source
strength is placed in all energy groups.</p>
<p>Source type 1 (<em>typ=1</em>): <em>G</em> values of X are supplied, one value for
each energy group. FIDO-type repeat command is supported.</p>
<p>An example of a source specification for two different sources is the
following.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>READ source
      id=1 typ=1 com=’44-g fuel source’ src=0.44 0.32 0.25 0.01 40r0.0 end
      id=5 typ=0 src=0.001 end
END source
</pre></div>
</div>
<p>The Material block is used to associate a given source definition with a
given mixture. The same source may be placed in multiple mixtures. For
generalized adjoint calculations—which require a fixed source derived
for the generalized response of interest (see <em>Generalized Perturbation
Theory</em> in the SAMS chapter)—the TRITON control sequence automatically
prepares the NEWT Source block.</p>
</div>
<div class="section" id="collapse-block">
<span id="id64"></span><h3>Collapse block<a class="headerlink" href="#collapse-block" title="Permalink to this headline">¶</a></h3>
<p><strong>Collapse block keyword = coll, collapse</strong></p>
<p>The Collapse block contains the broad (collapsed) group assignment for
each energy group in the original input group structure. Broad group
assignments must be contiguous. A FIDO-type repeat factor is allowed.
For example, given that a calculation is performed using a
44-energy-group library, in which it is desired to collapse the first
9 groups into a single group, the second 17 groups into a second broad
group, and the remaining 18 groups into a third group, either of the
following could be used.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read collapse
1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2
2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3
end collapse

read coll 9r1 17r2 18r3 end coll
</pre></div>
</div>
<p>If a collapsing operation is requested, then upon the completion of the
transport iteration, NEWT performs a collapsing operation on all
cross sections for all mixtures in the problem. Cross sections are flux
weighted using the average flux in the mixture in which each nuclide
resides and saved in an AMPX working-format library at the unit
specified by the <em>wtdlib=</em> parameter (default=30). Collapsed, or “broad
group,” cross sections may also be printed by setting the parameter
<em>prtbroad=yes</em> (default=no). Note that the energy boundaries of the
collapsed cross section are always a subset of the boundaries of the
parent library. Cross sections may not be collapsed to arbitrary energy
boundaries.</p>
</div>
<div class="section" id="geometry-block">
<span id="id65"></span><h3>Geometry block<a class="headerlink" href="#geometry-block" title="Permalink to this headline">¶</a></h3>
<p><strong>Geometry block keyword = geom, geometry</strong></p>
<p>The Geometry block is always required. This data block contains
geometric descriptions for all bodies included in the model. NEWT
geometry input is performed based on the SCALE Generalized Geometry
Package (SGGP) paradigm employed in the KENO-VI Monte Carlo code within
SCALE. Those familiar with SGGP as applied in KENO-VI will find the new
format very familiar; however, they will quickly realize that the NEWT
geometry package contrasts most sharply with the 3-D implementation in
KENO‑VI because NEWT is a 2-D code. Hence, third dimension (z-axis)
specifications are omitted, along with other inherently 3-D bodies
supported by KENO-VI. Two other more subtle differences are seen:
(1) users must specify the underlying grid structure associated with
each <em>unit</em>, and (2) curved surfaces (e.g., cylinders) are approximated
as N-sided polygons, with user control. Details on these differences are
described in the following subsections and illustrated in examples.</p>
<p>The SGGP approach for model development is combinatorial in nature.
Hence, intersections are allowed, and the user is given enormous
flexibility to specify, translate, rotate, and combine bodies to create
complex configurations. However, the novice user must first focus on the
basics of model development, as outlined in this subsection. Sample
inputs are provided in <a class="reference internal" href="#id116"><span class="std std-ref">Examples of Inputs</span></a> to demonstrate the development of
more complicated models.</p>
<p>Geometric arrangements in NEWT are based on a fundamental building block
called a unit. Different units can be arranged in an array. <a class="reference internal" href="#fig9-2-7"><span class="std std-numref">Fig. 293</span></a>
illustrates a simple unit and an array of such units. Arrays of units
can be contained inside larger units, and in principle, any level of
nesting can be achieved. Within a unit, various shapes can be specified,
each representing some geometrically distinct medium. In every geometry
specification, a single global unit, which forms the outer boundary for
the entire problem, must be specified.</p>
<p>Note that in the models pictured in <a class="reference internal" href="#fig9-2-7"><span class="std std-numref">Fig. 293</span></a>, bodies are laid within
a Cartesian grid. This is a hallmark of any NEWT model—the body
specifications combined with an underlying grid structure are used to
define a computational grid in which the NEWT ESC solution algorithm is
applied. <a class="reference internal" href="#fig9-2-8"><span class="std std-numref">Fig. 294</span></a> illustrates the grid structure associated with the
array example above. The model consists of a set of arbitrary polygons
used to spatially discretize the bodies of interest. The underlying
Cartesian mesh may be specified for any unit; a Cartesian mesh <strong>must</strong>
be specified for the global unit. The mesh for the global unit is the
primary mesh for the entire problem and is often referred to as the base
grid, whereas the mesh for constituent units within the global unit
constitutes localized refinement and may be referred to as the local, or
unit, grid.</p>
<p>The NEWT geometry block consists of specifications for a set of basic
building blocks known as units. A <em>unit</em> is defined as a collection of
shapes, one of which must be defined as the unit boundary. A complete
unit specification consists of a header and three distinct components:</p>
<ol class="arabic simple">
<li><p><strong>Bodies:</strong> shapes, holes, or array placements that define the bodies
within the unit;</p></li>
<li><p><strong>Media</strong> specifications that define the material content
(composition) of the various shapes; and</p></li>
<li><p><strong>Boundary</strong> definition that defines the extent of the unit and its
associated grid structure.</p></li>
</ol>
<a class="reference internal image-reference" href="_images/fig7-1.png"><img alt="_images/fig7-1.png" class="align-center" src="_images/fig7-1.png" style="width: 500px;" /></a>
<div class="figure align-center" id="id165">
<span id="fig9-2-7"></span><a class="reference internal image-reference" href="_images/fig7-2.png"><img alt="_images/fig7-2.png" src="_images/fig7-2.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 293 </span><span class="caption-text">A simple unit (top) and an array of units (bottom).</span><a class="headerlink" href="#id165" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id166">
<span id="fig9-2-8"></span><a class="reference internal image-reference" href="_images/fig83.png"><img alt="_images/fig83.png" src="_images/fig83.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 294 </span><span class="caption-text">Computational grid structure in a NEWT model.</span><a class="headerlink" href="#id166" title="Permalink to this image">¶</a></p>
</div>
<p>Every unit begins with a header consisting of the keyword <em>unit</em>
followed by a unique integer label (<em>unit_id)</em> that serves to identify
the unit:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit unit_id
</pre></div>
</div>
<p>The header is followed by a complete unit description consisting of the
three components described above; each of these components of the unit
specification is described in the following subsections. In every NEWT
model, one unit must be defined as the <em>global unit</em>. This unit defines
the global coordinate system for the entire problem, and all other units
(if any) must fit within the global unit. Specification of the global
unit is accomplished simply with the format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>global unit unit_id
</pre></div>
</div>
<p>The global unit may occur anywhere in the list of units. If only one
unit is defined in an input, it must be identified as the global unit.</p>
<p>As indicated earlier, the geometry block consists of a list of one or
more units. Each unit is terminated by the beginning of another unit or
by the end of the geometry block. Conceptually, a geometry block will
have the following structure:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read geom
global unit 1
(unit specifications)
unit 2
(unit specifications)
unit 3
(unit specifications)
…
unit 10
(unit specifications)
end geom
</pre></div>
</div>
<p>The unit numbers are arbitrary and can occur in any order, although they
must be unique; they serve simply as labels.</p>
<p>The remainder of this section describes the various components of units.</p>
<div class="section" id="bodies">
<span id="id66"></span><h4>Bodies<a class="headerlink" href="#bodies" title="Permalink to this headline">¶</a></h4>
<p>Every unit contains a set of body specifications in terms of (1) basic
<em>shapes</em> that are placed directly within a unit; (2) one or more arrays,
each of which is defined elsewhere and placed within a unit with an
<em>array placement</em> operator; and (3) holes. Units <strong>must</strong> contain at
least one <em>shape</em> specification, which is used to define the spatial
boundaries of the unit. Additional shape specifications may be used as
needed. Holes and/or array placements are optional; there is no
theoretical limit on the number of each that may be used within a unit.</p>
<div class="section" id="shapes">
<span id="id67"></span><h5>Shapes<a class="headerlink" href="#shapes" title="Permalink to this headline">¶</a></h5>
<p>Shapes are simple predefined bodies. NEWT currently supports six shapes:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>cylinder,</p></li>
<li><p>cuboid,</p></li>
<li><p>hexprism,</p></li>
<li><p>rhexprism (rotated hexprism),</p></li>
<li><p>wedge, and</p></li>
<li><p>polygon.</p></li>
</ol>
</div></blockquote>
<p>The names of these shapes are generally associated with 3-D bodies but
are used in NEWT to be consistent with KENO-VI nomenclature. In NEWT, a
cylinder is equivalent to a circle, a cuboid is equivalent to a
rectangle, a hexprism is equivalent to a hexagon, and a wedge is
equivalent to a triangle.</p>
<p>Because the SGGP is combinatorial in nature, intersection and overlap of
shapes is permitted. For this reason, no specific mixture is associated
with each shape. Combinatorial logic allows a fraction of a shape to be
filled with one mixture, while the remainder or another fraction thereof
may be assigned a different mixture. This is discussed further in the
section <strong>Media Specifications</strong> in the description of <em>media</em>
assignment (<a class="reference internal" href="#id82"><span class="std std-ref">Media specifications</span></a>).</p>
<p>Each shape is specified by name, an associated body identification
(<em>body_id</em>) number, and dimensioning data. The <em>body_id</em> number is
arbitrary but must be unique within each unit. Specific formats for each
shape are provided below.</p>
</div>
<div class="section" id="cylinder">
<span id="id68"></span><h5>Cylinder<a class="headerlink" href="#cylinder" title="Permalink to this headline">¶</a></h5>
<p>Cylinder</p>
<p>The cylinder specification has the following format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cylinder  body_id  radius  [modifier_list]
</pre></div>
</div>
<p>where radius is the radius of the circle. The circle will be centered at
(0,0). The modifier list is an optional set of operations that may be
performed on each shape. One of the modifiers allowed is the <em>origin</em>
modifier, which lets one translate the origin of a shape to a different
location. Modifier commands are described later in this section.</p>
</div>
<div class="section" id="cuboid">
<span id="id69"></span><h5>Cuboid<a class="headerlink" href="#cuboid" title="Permalink to this headline">¶</a></h5>
<p>The cuboid specification has the following format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cuboid  body_id  xmax, xmin, ymax, ymin  [modifier_list]
</pre></div>
</div>
<p>where (x<sub>min</sub>, y<sub>min</sub>) and (x<sub>max</sub>, y<sub>max</sub>)
represent the lower-left and upper-right vertices of a rectangle on a
Cartesian coordinate system. Note that the cuboid is explicitly placed
by its coordinates; no translation is required (or allowed).</p>
</div>
<div class="section" id="hexprism-and-rhexprism">
<span id="id70"></span><h5>Hexprism and rhexprism<a class="headerlink" href="#hexprism-and-rhexprism" title="Permalink to this headline">¶</a></h5>
<p>Both hexprisms are specified in a manner identical to that of a
cylinder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hexprism body_id  radius  [modifier_list]
rhexprism  body_id  radius  [modifier_list]
</pre></div>
</div>
<p>where <em>radius</em> is the inner/minor radius of the hexagon. A standard
hexagon (<em>hexprism)</em> is oriented with vertices at the top and bottom, as
illustrated in <a class="reference internal" href="#fig9-2-9"><span class="std std-numref">Fig. 295</span></a>. A rotated hexagon (<em>rhexprism</em>) is oriented
with vertices on the left and right sides, as illustrated in
<a class="reference internal" href="#fig9-2-10"><span class="std std-numref">Fig. 296</span></a>. Both types of hexprisms, like cylinders, are by default
placed with their origins at (0,0). However, like cylinders, they can
also be translated in space via the <em>origin</em> translation command.</p>
<div class="figure align-center" id="id167">
<span id="fig9-2-9"></span><a class="reference internal image-reference" href="_images/fig93.png"><img alt="_images/fig93.png" src="_images/fig93.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 295 </span><span class="caption-text">Orientation of a standard hexprism.</span><a class="headerlink" href="#id167" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id168">
<span id="fig9-2-10"></span><a class="reference internal image-reference" href="_images/fig103.png"><img alt="_images/fig103.png" src="_images/fig103.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 296 </span><span class="caption-text">Orientation of a rotated hexprism.</span><a class="headerlink" href="#id168" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="wedge">
<span id="id71"></span><h5>Wedge<a class="headerlink" href="#wedge" title="Permalink to this headline">¶</a></h5>
<p>A wedge, or triangle, specification has the following format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>wedge  body_id  xbase xpt ypt [modifier_list]
</pre></div>
</div>
<p>where the vertices of the shape are defined as (0,0), (x<sub>base</sub>,0),
and (x<sub>pt</sub>,y<sub>pt</sub>). Thus, one side always lies on the x-axis.
The modifiers <em>origin</em> and <em>rotate</em> may be used to position and orient
the triangle in the problem domain. <a class="reference internal" href="#fig9-2-11"><span class="std std-numref">Fig. 297</span></a> illustrates placement
of a wedge using these parameters.</p>
<div class="figure align-center" id="id169">
<span id="fig9-2-11"></span><a class="reference internal image-reference" href="_images/fig114.png"><img alt="_images/fig114.png" src="_images/fig114.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 297 </span><span class="caption-text">Initial positioning of the wedge body.</span><a class="headerlink" href="#id169" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="polygon">
<span id="id72"></span><h5>Polygon<a class="headerlink" href="#polygon" title="Permalink to this headline">¶</a></h5>
<p>The polygon specification has the following format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>polygon  body_id  x0, y0, x1, y1, ..., xN, yN, x0, y0
</pre></div>
</div>
<p>where (x<sub>i</sub>, y<sub>i</sub>) are the polygon vertices (the first and
last pair in this list refer to the same vertex). Note that the polygon
is explicitly placed by its coordinates; no translation is required (or
allowed).</p>
</div>
<div class="section" id="example-of-shape-specifications">
<span id="id73"></span><h5>Example of shape specifications<a class="headerlink" href="#example-of-shape-specifications" title="Permalink to this headline">¶</a></h5>
<p>Use of shapes within a unit can be illustrated with a simple example.
Consider a unit, arbitrarily labeled with <em>unit_id</em>=10, containing a
cuboid and two cylinders. Each shape is given a unique (but arbitrary)
<em>body_id</em>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 10
cuboid   11   3.0   -5.0   1.0   -2.0
cylinder 12   0.8
cylinder 13   0.6
</pre></div>
</div>
<p>The cuboid is explicitly placed by its coordinates; the two cylinders
will by default be placed at (0,0). Use of the <em>origin</em> command to
relocate cylinders is introduced below. <a class="reference internal" href="#fig9-2-12"><span class="std std-numref">Fig. 298</span></a> illustrates the
body placement that occurs for the given example.</p>
<div class="figure align-center" id="id170">
<span id="fig9-2-12"></span><a class="reference internal image-reference" href="_images/fig123.png"><img alt="_images/fig123.png" src="_images/fig123.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 298 </span><span class="caption-text">Body placement for two cylinders and a cuboid.</span><a class="headerlink" href="#id170" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="shape-modifier-commands">
<span id="id74"></span><h5>Shape modifier commands<a class="headerlink" href="#shape-modifier-commands" title="Permalink to this headline">¶</a></h5>
<p>Modifier commands are provided as a means to perform specific functions
relative to the input shape. The five available modifier commands and
the shapes to which they may be applied are listed here:</p>
<blockquote>
<div><p><em>origin</em> — translation of center bodies (cylinders, hexprisms,
rhexprisms);</p>
<p><em>rotate</em> — rotation of bodies with respect to the transverse axis
(all);</p>
<p><em>chord</em> — removal of a portion of a body with x-plane and y-plane
cuts (cylinders, hexprisms, rhexprisms);</p>
<p><em>com</em> — addition of a comment to a specific shape (all);</p>
<p><em>sides</em> — number of sides used to approximate a circle (cylinder,
default is 12).</p>
</div></blockquote>
<p>The format for each of these commands follows.</p>
</div>
<div class="section" id="origin">
<span id="id75"></span><h5>ORIGIN<a class="headerlink" href="#origin" title="Permalink to this headline">¶</a></h5>
<p>The <em>origin</em> modifier is used to translate the origin of a cylinder or
hexprism from the default origin of (0,0) to some other location. It has
the format</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>origin x=xnew y=ynew
</pre></div>
</div>
<p>where (x<sub>new</sub>, y<sub>new</sub>) is the new center of the shape. The
modifier <em>origin</em> may not be applied to cuboids, as the location of a
cuboid is explicitly set by its shape specification. If not specified,
each ordinate is set to zero, such that</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>origin x=5
</pre></div>
</div>
<p>is equivalent to</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>origin x=5 y=0 .
</pre></div>
</div>
<p>For example, consider a cuboid whose lower-left and upper-right corners are
located at (0,0) and (1,1), respectively. If one places a cylinder with radius
0.3 in the center of this box [i.e., centered at (0.5, 0.5)], this would be
specified as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 1
cuboid 10 1.0 0.0 1.0 0.0
cylinder 20 0.3 origin x=0.5 y=0.5
</pre></div>
</div>
<p>This configuration is illustrated in <a class="reference internal" href="#fig9-2-13"><span class="std std-numref">Fig. 299</span></a>.</p>
<div class="figure align-center" id="id171">
<span id="fig9-2-13"></span><a class="reference internal image-reference" href="_images/fig133.png"><img alt="_images/fig133.png" src="_images/fig133.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 299 </span><span class="caption-text">Relocation (translation) of a cylinder using origin.</span><a class="headerlink" href="#id171" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="rotate">
<span id="id76"></span><h5>Rotate<a class="headerlink" href="#rotate" title="Permalink to this headline">¶</a></h5>
<p>The <em>rotate</em> body modifier is used to rotate a body around its geometric
center. It can be applied to any body type, but rotation of a cylinder
has no real meaning. The format of the <em>rotate</em> modifier is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rotate a1=A
</pre></div>
</div>
<p>where <em>A</em> is the angle of rotation, in degrees, in a counterclockwise
direction. All bodies lie in the (x,y) plane, with rotation around the
z-axis, but with respect to the centroid of the body. Rotation always
occurs <strong>before</strong> translation (via <em>origin</em>), irrespective of the order
of <em>rotate</em> and <em>origin</em> commands in the modifier list for a body.
KENO-VI allows rotation about the x and y axes as well, through a2= and
a3=; however, only rotation about the z axis is permitted in NEWT.</p>
<p>As an example, consider a 1 by 1 cm cuboid centered at (0,0), place a
smaller 0.5  by 0.5 cm cuboid inside it, and rotate it 30 degrees
clockwise.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 1
cuboid 10 0.5 -0.5  0.5 -0.5
cuboid 10 0.25 -0.25  0.25 -0.25 rotate a1=-30
</pre></div>
</div>
<div class="figure align-center" id="id172">
<span id="fig9-2-14"></span><a class="reference internal image-reference" href="_images/fig143.png"><img alt="_images/fig143.png" src="_images/fig143.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 300 </span><span class="caption-text">Rotation of a cuboid.</span><a class="headerlink" href="#id172" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference internal" href="#fig9-2-14"><span class="std std-numref">Fig. 300</span></a> illustrates the configuration generated using this
specification. Note that clockwise rotation was performed by specifying
a negative angle. In this case, the centroid of the inner cuboid
coincides with (0,0); however, the same geometric rotation would have
occurred if the bodies had not been centered at (0,0).</p>
</div>
<div class="section" id="chord">
<span id="id77"></span><h5>Chord<a class="headerlink" href="#chord" title="Permalink to this headline">¶</a></h5>
<p>The <em>chord</em> modifier is used to remove a portion of a body. It provides
for horizontal and/or vertical cuts on a body, with the portion of the
body on a specified side of that body discarded. Chords may be applied
to cylinders or hexprisms but may not be applied to cuboids. (Such
“cuts” may be explicitly defined in the body definition.) The format of
the specification combines the selection of the plane (horizontal or
vertical cut), location of the plane, and the portion of the body to be
retained, all in one terse modifier.</p>
<p>The four possible chord specifications for a body are as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>chord +x=xplane
chord +y=yplane
chord -x=xplane
chord -y=yplane
</pre></div>
</div>
<p>where <em>xplane</em> and <em>yplane</em> are the ordinates on the x and y axes,
respectively. The sign on x and y indicates the portion of the body to
be retained after the cut. A plus (+) sign indicates that the portion of
the body in the positive (increasing x or y) direction should be kept,
and a minus (–) sign indicates that the portion of the body in the
negative direction of the cut plane (decreasing x or y) direction is
retained. Chords are applied <strong>after</strong> any translation (<em>origin</em>) or
rotation (<em>rotate</em>) modifier operations. Multiple chords may be
specified for a single body to obtain multiple cuts. The keyword <em>chord</em>
<strong>must</strong> precede each specification.</p>
<p>The use of chords is best illustrated by example. <a class="reference internal" href="#fig9-2-15"><span class="std std-numref">Fig. 301</span></a> through
<a class="reference internal" href="#fig9-2-18"><span class="std std-numref">Fig. 304</span></a> show unit body descriptions with various chord
specifications.</p>
<div class="figure align-center" id="id173">
<span id="fig9-2-15"></span><a class="reference internal image-reference" href="_images/fig152.png"><img alt="_images/fig152.png" src="_images/fig152.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 301 </span><span class="caption-text">Example of chord +x behavior.</span><a class="headerlink" href="#id173" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id174">
<span id="fig9-2-16"></span><a class="reference internal image-reference" href="_images/fig161.png"><img alt="_images/fig161.png" src="_images/fig161.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 302 </span><span class="caption-text">Example of chord -y behavior.</span><a class="headerlink" href="#id174" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id175">
<span id="fig9-2-17"></span><a class="reference internal image-reference" href="_images/fig171.png"><img alt="_images/fig171.png" src="_images/fig171.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 303 </span><span class="caption-text">Use of two chords to create a quarter-cylinder body.</span><a class="headerlink" href="#id175" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id176">
<span id="fig9-2-18"></span><a class="reference internal image-reference" href="_images/fig181.png"><img alt="_images/fig181.png" src="_images/fig181.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 304 </span><span class="caption-text">Use of four chords on a cylinder to create a square body.</span><a class="headerlink" href="#id176" title="Permalink to this image">¶</a></p>
</div>
<p>In <a class="reference internal" href="#fig9-2-15"><span class="std std-numref">Fig. 301</span></a>, a chord is placed at x=0 and the positive portion
relative to the chord (x &gt;0) is retained because +x mode is specified.
Since the cylinder is centered at (0, 0), this chord cuts the cylinder
in half and retains the right half of the cylinder. The unit in
<a class="reference internal" href="#fig9-2-16"><span class="std std-numref">Fig. 302</span></a> uses the same cylinder but with a chord cutting at the
plane located at y=0. The bottom half (y &lt; 0) is kept because –y is
specified.</p>
<p><a class="reference internal" href="#fig9-2-17"><span class="std std-numref">Fig. 303</span></a> is somewhat more complicated but represents perhaps the
most common use of chords in lattice models. In this case, it is
desired to create a one-quarter cylinder located in the bottom right
quadrant of a cuboid. A 1 by 1 cm square cuboid is centered at (0, 0),
and a cylinder is placed at
(0.5, –0.5), which is the lower right-hand corner of the cuboid. Since
we are interested only in the portion of the cylinder within the
cuboid, we choose to keep the top (+x) and left (–y) portions of the
cylinder. This requires two separate chord modifiers. (Each chord
specifies only one cutting plane.) Additionally, because the cylinder
was relocated to a new origin, the chords are specified such that the
cuts go through the new origin.</p>
<p>Note that there is no requirement that a chord cut through the origin of
a body. <a class="reference internal" href="#fig9-2-18"><span class="std std-numref">Fig. 304</span></a> illustrates the use of four chords to set four
cutting planes. A 0.5 cm cylinder is specified centered within the unit
cuboid. All four of the four permitted cutting planes are specified. We
have effectively created a cuboid by retaining the portion of the
cylinder above (+y) the xz plane located at y= –0.25, below (–y) the
plane at y=+0.25, to the right (+x) of the yz plane at x= –0.25, and to
the left (–x) of the plane located at x=+0.25. There is, of course, a
much more direct means to create a cuboid—this example is provided only
for illustrative purposes.</p>
<p>For guidance on how to cut a cylinder at an oblique angle, refer to
<a class="reference internal" href="#id80"><span class="std std-ref">Holes</span></a>.</p>
</div>
<div class="section" id="com">
<span id="id78"></span><h5>Com<a class="headerlink" href="#com" title="Permalink to this headline">¶</a></h5>
<p>The <em>com</em> modifier is a means to label specific bodies. It is provided
primarily for consistency with KENO‑VI. At this time, NEWT simply reads
and then ignores <em>com</em> data. It can, however, be used as a means to help
annotate an input listing. The format for the <em>com</em> modifier is as
follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>com=”comment string”
</pre></div>
</div>
<p>where <em>“comment string”</em> is any text description of up to 132
characters, delimited by single (′) or double quotes (″). For example,
the input description of <a class="reference internal" href="#fig9-2-18"><span class="std std-numref">Fig. 304</span></a> is shown here with comments added
via <em>com</em> modifiers.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 10
cuboid 1   0.5 -0.5 0.5 -0.5 com=”unit cuboid centered at (0,0)”
cylinder 2 0.5 com=”cylinder with four chords”
  chord -x=0.25 chord +x=-0.25
  chord -y=0.25 chord +y=-0.25
</pre></div>
</div>
</div>
<div class="section" id="sides">
<span id="id79"></span><h5>Sides<a class="headerlink" href="#sides" title="Permalink to this headline">¶</a></h5>
<p>The <em>sides</em> modifier applies only to cylinders and is unique to NEWT
(i.e., it is not used in KENO-VI). Because NEWT’s solution grid is based
on arbitrary polygons, all cells must be straight sided. Hence, the
curved surfaces of a cylinder are approximated as an N-sided regular
polygon. By default, N=12. The <em>sides</em> operator allows the user to
override the default. The format is very simple:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sides=N
</pre></div>
</div>
<p>where N is the number of sides desired for the full cylinder. In
general, a 12-sided polygon provides an adequate approximation of a
cylinder. Use of additional sides will create a cylinder that has a
smoother appearance and increase the computational effort required to
solve the cells associated with the cylinder.</p>
<p><a class="reference internal" href="#fig9-2-19"><span class="std std-numref">Fig. 305</span></a> shows a model built with three nested cylinders inside a
unit cuboid. Cylinder 10 is the innermost cylinder, with no <em>sides</em>
modifier; hence, it uses the default 12-sided approximation. The second
cylinder is specified with sides=16; the refinement in this
approximation is seen in the figure. Finally, cylinder 30 is specified
with 40 sides—this is visually a very close approximation to a cylinder.</p>
<div class="figure align-center" id="id177">
<span id="fig9-2-19"></span><a class="reference internal image-reference" href="_images/fig191.png"><img alt="_images/fig191.png" src="_images/fig191.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 305 </span><span class="caption-text">Use of the sides modifier for cylinders.</span><a class="headerlink" href="#id177" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="holes">
<span id="id80"></span><h5>Holes<a class="headerlink" href="#holes" title="Permalink to this headline">¶</a></h5>
<p>The next level of complexity within a <em>unit</em> is provided through the use
of a <em>hole</em> specification. The <em>hole</em> specification is simply a means by
which one unit may be placed within another unit. In some instances, a
well-defined set of structures, assembled as a <em>unit</em>, needs to be
placed within a larger unit. NEWT provides two methods to do this—holes
and arrays. Arrays are used to place a unit (or a number of similar
units) in a regular repeating pattern within an enclosing unit. A
<em>hole</em>, on the other hand, is a means to place a single unit. This is
often used when units being placed do not have a regular repeating
pattern.</p>
<p>The format for a <em>hole</em> specification within a unit is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hole unit_id [modifier_list]
</pre></div>
</div>
<p>where <em>unit_id</em> is the identification number for the unit that is being
placed within the current unit. (A unit cannot be placed within itself.)
Unlike the shapes described earlier, holes do not have a distinct
identification number of their own—they are simply a mechanism to place
a unit defined elsewhere.</p>
<p>By default, the <em>hole</em> operator places the origin of the new unit at the
origin (0,0) of the current unit. The <em>origin</em> modifier may also be used
with a <em>hole</em> specification to position the placed unit at a location
other than (0,0) of the current unit. However, placement of the body is
<strong>always</strong> relative to the origin of the original unit, which can be
defined in a number of different ways.</p>
<p>Holes are also associated with a particular shape. Hole specifications
must immediately follow the shape into which they are being placed.
Holes redefine the boundaries of a shape by figuratively cutting holes
in that shape into which units are placed. When mixtures are defined for
a given shape (through media specifications, described below), the
mixture is placed throughout the region, except in the space excluded by
the hole placements.</p>
<p>The <em>rotate</em> modifier can also be applied to a hole, as can the <em>com</em>
modifier. However, <em>chord</em> specifications cannot be used to remove a
portion of a hole. To construct a cylinder that is cut at an oblique
angle, users should construct a cylinder that is cut by a chord and then
use the <em>hole</em> operator combined with the <em>origin</em> and <em>rotate</em>
modifiers to place and rotate the unit to the desired position and
orientation. This can be particularly useful in hexagonal or triangular
geometries.</p>
<p>As an example, consider a unit, unit_id=1, consisting of two concentric
cylinders, and a second unit, consisting of two concentric cuboids.
Descriptions for these two units are given below. Note that these are
incomplete unit specifications; other components of the unit
specification have not yet been introduced. However, for the purposes of
this example, incomplete unit specification will suffice.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 1
cylinder  12   0.8
cylinder  13   0.6

unit 2
cuboid 12 0.8 -0.8 0.8 -0.8
cuboid 13 0.6 -0.6 0.6 -0.6
</pre></div>
</div>
<p>Now suppose that we wished to place two of the unit 1 cells and one of
the unit 2 cells inside unit 3, with unit 2 rotated by 45°. We can
define a cuboid as unit 3 and place the units 1 and 2 inside the cuboid
using <em>hole</em> specifications:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 3
cuboid 10 4.5 0.0 4.5 0.0
hole 1 origin x=1.3 y=1.3
hole 1 origin x=1.3 y=3.3
hole 2 origin x=3.1 y=2.3 rotate a1=45
</pre></div>
</div>
<p>In this example, a square cuboid is defined such that its lower-left
corner is situated at (0,0). Three hole operations are used: the first
to place unit 1 at (1.3, 1.3), the second to place another instance of
unit 1 2 cm above the first, at (1.3, 3.3). Lastly, unit 2 is placed
inside unit 3 at (3.1, 2.3) and then rotated 45°. <a class="reference internal" href="#fig9-2-20"><span class="std std-numref">Fig. 306</span></a>
illustrates how such a unit would appear.</p>
<div class="figure align-center" id="id178">
<span id="fig9-2-20"></span><a class="reference internal image-reference" href="_images/fig201.png"><img alt="_images/fig201.png" src="_images/fig201.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 306 </span><span class="caption-text">Unit placement within a unit using holes.</span><a class="headerlink" href="#id178" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="array-placement">
<span id="id81"></span><h5>Array placement<a class="headerlink" href="#array-placement" title="Permalink to this headline">¶</a></h5>
<p>As indicated in the previous section, arrays are a method for arranging
one or more units within another unit. Arrays specifications are
typically used when units are placed in a repeating pattern. While the
<em>hole</em> specification is used to place different units within a given
unit, the array placement specification is used to place an <em>array</em>
within a unit<em>.</em></p>
<p>All arrays are specified (declaration of size, type, and fill) in the
array data block, as described in <a class="reference internal" href="#id106"><span class="std std-ref">Array definition</span></a>. The array placement
operator is used to locate an array within a unit. The format for the
array placement operator is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>array arrayid body_id place i j xij yij
</pre></div>
</div>
<p>where <em>arrayid</em> is the identification number assigned to the array in
the array data block and <em>body_id</em> is the identification number of the
<em>shape</em> into which the array is placed. The remainder of the array
placement operator is used to fix the position of the array within the
body, identified by <em>body_id</em>. A general discussion of this concept
follows, after which the actual placement of the array is described.</p>
<p>Arrays are defined by two dimensioning parameters—the number of rows and
the number of columns. Each element of an array is filled by a unit;
each unit has its own local coordinate system. In other words, one unit
may have the origin (0,0) in its local coordinate system defined as the
lower-left corner while another unit may have its origin defined at its
geometric center. The array itself has no coordinate system; it is
simply a list of relative positions of units, defined by their
row/column position. The <em>place</em> directive of the array placement
operator is used to locate the array within the body into which it is
being placed.</p>
<p>In the <em>place</em> directive, <em>i</em> represents the column (counting from left
to right) and <em>j</em> represents the row (counting from bottom to top) of a
specific element of the array. The coordinate system of that specific
unit is used to set the position of the entire array. The coordinates
<em>xij</em> and <em>yij</em> represent the location in the current unit where the
array is to be placed. Placement occurs by situating the origin of the
unit in column i, row j at coordinate (x:sub:<cite>ij</cite>,y<sub>ij</sub>).
Placement of arrays within a unit is best understood through examples.
Consider three (partial) unit specifications, as defined and illustrated
in <a class="reference internal" href="#fig9-2-21"><span class="std std-numref">Fig. 307</span></a>.</p>
<div class="figure align-center" id="id179">
<span id="fig9-2-21"></span><a class="reference internal image-reference" href="_images/fig212.png"><img alt="_images/fig212.png" src="_images/fig212.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 307 </span><span class="caption-text">Example of units to be placed in an array.</span><a class="headerlink" href="#id179" title="Permalink to this image">¶</a></p>
</div>
<p>Unit 1 is a simple 1  by 1 cm cuboid with its origin located at its
bottom-left corner; unit 2 is a similar-sized cuboid but with its origin
located at its geometric center and with a cylinder centered in it; and
unit 3 is identical to unit 1 but with a cylinder centered in it.
Units 2 and 3 are identical in structure but use a different local
coordinate system.</p>
<p>Now assume an array has been defined in the array data block and
assigned <em>arrayid</em>=50. The relative positions of the units are shown
in <a class="reference internal" href="#fig9-2-22"><span class="std std-numref">Fig. 308</span></a>; unit 3 is located in row 1, column 1.</p>
<p>We desire to place this array within a unit 4, a 2 by 2 cm cuboid with
its lower-left corner located at (0,0). Because there are four different
array positions, this array has four possible placements:</p>
<div class="figure align-center" id="id180">
<span id="fig9-2-22"></span><a class="reference internal image-reference" href="_images/fig222.png"><img alt="_images/fig222.png" src="_images/fig222.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 308 </span><span class="caption-text">Layout of units in array 50.</span><a class="headerlink" href="#id180" title="Permalink to this image">¶</a></p>
</div>
<p>For the first example, the unit located in row 1, column 1 (i.e.,
unit 3) is placed such that its origin (its lower-left corner) is
located at (0,0), which is the origin of unit 4. For the second example,
the unit located in column 2, row 1, is placed such that its local
origin, which is in the center of the unit, is located at x=1.5, y=0.5
in the coordinate system of unit 4.</p>
</div>
</div>
<div class="section" id="media-specifications">
<span id="id82"></span><h4>Media specifications<a class="headerlink" href="#media-specifications" title="Permalink to this headline">¶</a></h4>
<p>A unit is only partially specified by its constituent bodies. At this
point, no composition has been associated with the various regions of
the problem nor has the outer boundary of the unit been defined. This
section provides information on the use of <em>media</em> specifications to
define the contents of each shape that has been defined.</p>
<p>Each shape statement defines a basic shape, with optional modifiers,
which represents a spatial region within the unit. Assignment of
compositions to regions is performed via <em>media</em> specifications.</p>
<p>As discussed earlier in the introduction to shapes, input processing in
the SGGP is combinatorial. This permits intersection of shapes, and
different compositions (or media) may be assigned to different portions
of intersecting bodies.</p>
<p>The format of a media specification is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>media  materialid  bias_placeholder  reg_def_vector
</pre></div>
</div>
<p>where <em>materialid</em> is the composition number being placed in this entry,
<em>bias_placeholder</em> is a simple placeholder that is required but not
used, and <em>reg_def_vector</em> is the region definition vector used to
define the shape or shapes to which the mixture is assigned.</p>
<p>The <em>bias_placeholder</em> is used to be as consistent as possible with
KENO-VI input. KENO-VI allows the user to assign biases within the media
assignments to improve the Monte Carlo solution performance. Biases have
no meaning in NEWT, so the field has no meaning. In KENO-VI, if no
special biasing is desired, a value of 1 is assigned. If it is desired
to move models between NEWT and KENO-VI format, a placeholder value of 1
is recommended. However, the value itself has no meaning within NEWT; it
is simply read and ignored. (This may change in a future release.)</p>
<p>The region definition vector is used to describe the location of the
composition within the current unit. This is done by providing a list of
shapes for which the media is either “inside” or “outside.” The sense of
the media with respect to a shape is specified by listing the shape
number with a negative sign if “outside” and with a positive (or no)
sign when the media is placed “inside” the shape.</p>
<p>Consider a simple cylinder inside a cuboid. Assume composition 1 is to
be placed inside the cylinder and composition 2 outside the cylinder but
inside the cuboid. The shape and media specifications could have the
following format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 1
cylinder 10 0.5
cuboid 20 1.0 -1.0 1.0 -1.0
media 1 1 10
media 2 1 20 -10
</pre></div>
</div>
<p>In the above example, the first media record places mixture 1 inside all
of shape 10 (the cylinder). The second media entry places mixture 2 in
all regions that are outside shape 10 but inside shape 20. Note also
that a bias placeholder value of 1 is used in each media statement.</p>
<p>It is necessary to specify media for all regions of the unit. If any
regions remain unassigned, NEWT will stop with an error message. If the
second record had been omitted, regions outside the cylinder would be
unspecified and the code would stop. Note also that if the second media
statement had read only</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>media 2 1 20
</pre></div>
</div>
<p>then composition 2 would have been placed inside all of cuboid 20,
including inside the cylinder 10. The fact that the contents of 10 have
already been specified is ignored. The above statement directs the code
to put mixture 2 everywhere inside the boundaries of the cuboid.</p>
<p>Each region definition vector combines all specifications with a logical
AND. In other words, the second media record in “<code class="docutils literal notranslate"><span class="pre">media</span> <span class="pre">2</span> <span class="pre">1</span> <span class="pre">20</span></code>” places
composition 2 in all regions that are simultaneously outside shape 10
<strong>and</strong> inside shape 20. Separate media specifications are required to
place a composition in two independent shapes. The following represents
a cuboid with two nonintersecting cylinders.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 1
cylinder 10 0.4 origin x=0.5
cylinder 20 0.4 origin x=1.5
cuboid 30 2.0 0.0 1.0 -1.0
media 1 1 10
media 1 1 20
media 2 1 30 -10 -20
</pre></div>
</div>
<p>A media statement is necessary to place composition 1 inside shape 10; a
similar statement is necessary to place composition 1 inside shape 20.
Finally, all space inside cuboid 30 but outside both 10 and 20 is filled
with composition 2. If one attempted to fill both 10 and 20 with
composition 1 in a single media record, for example,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>media 1 1 10 20
</pre></div>
</div>
<p>then an error would occur. The code would attempt to place composition 1
in all space that is simultaneously within shape 10 <strong>and</strong> within shape
20—and no such space exists.</p>
<p>A more common example is the configuration of a fuel pin
(composition 1), gas gap (composition 2), clad (composition 3), and
moderator (composition 4) in a lattice. Consider a pin in a hexagonal
lattice:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 1
cylinder 10 0.4
cylinder 20 0.41
cylinder 30 0.5
hexprism 40 0.8
media 1 1 10
media 2 1 20 -10
media 3 1 30 -20
media 4 1 40 -30
</pre></div>
</div>
<p>In this example, for the hexagonal moderator region outside the clad, it
is sufficient to specify that mixture 4 is inside 40 <strong>and</strong> outside 30.
Although it is true that the moderator is also outside shapes 10 and 20,
it is not necessary to specify this. Logically, since 10 and 20 are
inside 30, then everything outside 30 must be outside 10 and outside 20.
The use of a hexprism in this example is irrelevant. If the outer body
had been a cuboid, the result would have been the same.</p>
<p>As a final example, consider a unit with intersecting bodies. It becomes
possible to assign a unique composition to each intersection of shapes
(<a class="reference internal" href="#fig9-2-23"><span class="std std-numref">Fig. 309</span></a>).</p>
<div class="figure align-center" id="id181">
<span id="fig9-2-23"></span><a class="reference internal image-reference" href="_images/fig231.png"><img alt="_images/fig231.png" src="_images/fig231.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 309 </span><span class="caption-text">Media assignments in overlapping regions.</span><a class="headerlink" href="#id181" title="Permalink to this image">¶</a></p>
</div>
<p>In this model, cylinder 10 is on the right, 20 is the lower left, and 30
is the upper left. Media 1, placed inside cylinder 10 but outside 20 and
30, is represented by the partially filled right-hand side of the right
cylinder. The central region of the unit is filled with composition 4
and represents all areas that are simultaneously within shapes 10, 20,
and 30. The outermost region is everything that is inside 40, but
outside 10, 20, and 30.</p>
<p>Media statements apply only to shapes, and only to those shapes within
the unit. Holes and array specifications are used to define placement of
one or more units in which media have already been specified in the
corresponding unit definitions. Like shape statements, media statements
may occur in any order. However, if one region is erroneously assigned
two different compositions in two different media statements, the code
will allow this and will proceed with the calculation. The last
specification for a shape will always take precedence. Thus, it is
important that newly developed models be visually inspected using
mixture plots (files named “<em>.newtmatl.ps”) created using *drawit=yes</em>
in the parameter block.</p>
<div class="section" id="unit-boundary">
<span id="id83"></span><h5>Unit boundary<a class="headerlink" href="#unit-boundary" title="Permalink to this headline">¶</a></h5>
<p>The final section of a unit description is the <em>boundary</em> specification.
This input record serves two purposes: to specify the shape that defines
the outer bounds of the unit, and hence the shape of the unit, and
(optionally) to specify the underlying grid associated with the unit.
The format of the boundary specification is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>boundary  body_id  [x-discretization y-discretization]
</pre></div>
</div>
<p>where <em>body_id</em> is the identification number for the body that is to
serve as the unit boundary. The <em>x‑discretization</em> and
<em>y-discretization</em> terms are integers (≥2) that specify the number of
rectangular cells to be placed in the unit in the x-direction and
y-direction, respectively. A grid specification is <strong>required</strong> for the
global unit but is optional for other units. If a grid is specified for
a grid other than the global unit, that grid replaces the base grid. (An
exception to this principle is discussed later.)</p>
<p>In general, grid refinement should be such that cell sizes are on the
order of or smaller than a mean free path for a neutron. Grid spacing
can be easily varied in order to converge on the parameter of interest.
Global factors, such as a system eigenvalue, can tolerate a relatively
coarse grid. However, if fluxes are known to vary rapidly in space, then
a more refined grid may be necessary. NEWT does provide the ability to
locally refine a grid structure so that detail can be modeled where
needed, without having to pay the computational penalty of refining the
grid everywhere. NEWT does place one limit on grid refinement: every
shape, hole, or array placed within a unit must be intersected by at
least one gridline. The grid may be locally defined or part of the
global grid, but it must intersect each body at least once. Thus, if
small geometric shapes are modeled, a detailed grid structure is
generally necessary.</p>
<p>Examples of boundary specifications follow, as parts of partial unit
specifications. Media descriptions are omitted for simplicity.
Accompanying figures illustrate the grid structure(s) associated with
each specification. <a class="reference internal" href="#fig9-2-24"><span class="std std-numref">Fig. 310</span></a> shows a single (global) unit with a 2
by 2 base grid. Cuboid 10 serves as the boundary for the unit. This
represents the minimum grid structure that can be specified for a unit.
<a class="reference internal" href="#fig9-2-25"><span class="std std-numref">Fig. 311</span></a> shows a more complex configuration in which a unit defined
with a 5 by 5 grid is placed in the center of a larger enclosing unit,
specified to have a 3 by 3 grid. Note that because the first unit has
its own (local) grid, the underlying grid structure is removed in favor
of the local grid structure. The grid is applied to the boundary shape
of the unit, which is cuboid 10.</p>
<p><a class="reference internal" href="#fig9-2-26"><span class="std std-numref">Fig. 312</span></a> shows a similar structure; however, the cuboid was removed
from unit 1 and the outer hexprism was defined as the unit boundary.
Note that the grid structure applied to the nonrectangular body is the
same as the one that would be assigned for a cuboid with the same minima
and maxima in x and y directions. <a class="reference internal" href="#fig9-2-27"><span class="std std-numref">Fig. 313</span></a> illustrates the grid
structure that would be applied to the same model as was used in the
previous figure but with CMFD acceleration enabled. Because CMFD is
normally applied to a coarse mesh defined by the base global grid
(unless xycmfd=0), the global grid is always retained when CMFD
acceleration is used. Finally, <a class="reference internal" href="#fig9-2-28"><span class="std std-numref">Fig. 314</span></a> illustrates the use of a
base grid only. In this case, no grid structure is assigned for unit 1;
the bodies are inlaid but are adapted to the base global grid structure.</p>
<div class="figure align-center" id="id182">
<span id="fig9-2-24"></span><a class="reference internal image-reference" href="_images/fig241.png"><img alt="_images/fig241.png" src="_images/fig241.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 310 </span><span class="caption-text">Unit with 2 by 2 grid in a simple pin-cell model.</span><a class="headerlink" href="#id182" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id183">
<span id="fig9-2-25"></span><a class="reference internal image-reference" href="_images/fig261.png"><img alt="_images/fig261.png" src="_images/fig261.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 311 </span><span class="caption-text">Unit with 5 by 5 grid inset into unit with 3 by 3 grid.</span><a class="headerlink" href="#id183" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id184">
<span id="fig9-2-26"></span><a class="reference internal image-reference" href="_images/fig261.png"><img alt="_images/fig261.png" src="_images/fig261.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 312 </span><span class="caption-text">Effect of boundary grid specification on noncuboidal unit placed as a hole within a larger unit.</span><a class="headerlink" href="#id184" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id185">
<span id="fig9-2-27"></span><a class="reference internal image-reference" href="_images/fig27.png"><img alt="_images/fig27.png" src="_images/fig27.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 313 </span><span class="caption-text">Effect of coarse-mesh finite-difference acceleration on grid structure.</span><a class="headerlink" href="#id185" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id186">
<span id="fig9-2-28"></span><a class="reference internal image-reference" href="_images/fig28.png"><img alt="_images/fig28.png" src="_images/fig28.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 314 </span><span class="caption-text">Use of base grid without localized grid specification.</span><a class="headerlink" href="#id186" title="Permalink to this image">¶</a></p>
</div>
<p>The following section provides examples of complete geometry specifications for
various models, including bodies, media, and boundary specifications.  Each will
include one or more uses or boundary specifications for units.</p>
</div>
</div>
<div class="section" id="geometry-block-examples">
<span id="id84"></span><h4>Geometry block examples<a class="headerlink" href="#geometry-block-examples" title="Permalink to this headline">¶</a></h4>
<p>The following three subsections present geometry block examples to show
how various models may be assembled. Each listing is described briefly
and is followed by a figure showing the NEWT grid structure generated
for each set of geometry instructions.</p>
<div class="section" id="simple-pin-cell">
<span id="id85"></span><h5>Simple pin cell<a class="headerlink" href="#simple-pin-cell" title="Permalink to this headline">¶</a></h5>
<p>The following geometry block (<a class="reference internal" href="#fig9-2-29"><span class="std std-numref">Fig. 315</span></a>) shows the specifications
necessary to define a single pin-cell. The model is reduced to a ¼ cell
to take advantage of symmetry. Mixture 1 is fuel, mixture 2 is fill gas,
mixture 3 is clad, and mixture 4 is moderator. Features of this model
include the use of chords to obtain ¼ cylinders and the specification of
20 sides for each cylinder (five sides for a ¼ cylinder).</p>
<div class="figure align-center" id="id187">
<span id="fig9-2-29"></span><a class="reference internal image-reference" href="_images/fig29.png"><img alt="_images/fig29.png" src="_images/fig29.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 315 </span><span class="caption-text">Geometry model for infinite-lattice pin cell with fuel, gap, clad, and moderator.</span><a class="headerlink" href="#id187" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="hexagonal-assembly">
<span id="id86"></span><h5>Hexagonal assembly<a class="headerlink" href="#hexagonal-assembly" title="Permalink to this headline">¶</a></h5>
<p>The geometry block below (<a class="reference internal" href="#fig9-2-30"><span class="std std-numref">Fig. 316</span></a>) is used to describe a hexagonal
fuel assembly within a hexagonal shroud. Each cylinder is placed
individually, followed by a series of media statements that fill each
cylinder. The hexagonal moderator area is surrounded by a hexagonal
shroud of cladding material. Note that NEWT allows only cuboid and
hexprisms as outer boundaries for the global unit. This model could also
have been assembled with a unit definition for a set of cylinders, which
could then be placed in the global unit using holes or by defining a
single pin cell and placing it using an array.</p>
<div class="figure align-center" id="id188">
<span id="fig9-2-30"></span><a class="reference internal image-reference" href="_images/fig30.png"><img alt="_images/fig30.png" src="_images/fig30.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 316 </span><span class="caption-text">Geometry model of hexagonal fuel assembly.</span><a class="headerlink" href="#id188" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="advanced-candu-reactor-acr-700-assembly">
<span id="id87"></span><h5>Advanced CANDU reactor ACR-700 assembly<a class="headerlink" href="#advanced-candu-reactor-acr-700-assembly" title="Permalink to this headline">¶</a></h5>
<p>This example of a geometry block (<a class="reference internal" href="#fig9-2-31"><span class="std std-numref">Fig. 317</span></a>) is included to illustrate the complexity of design that
is possible through the use of simple bodies, units, and holes. The
ACR-700 design cannot be modeled using an array because pins are not
placed in a repeating lattice pattern. Features of this example include
use of holes; use of noncuboidal units placed in holes; and localized
pin-cell grid refinement by (1) decreased mesh size in fuel elements
(three outer rings) and (2) increased radial discretization (central
pin).</p>
<div class="figure align-center" id="id189">
<span id="fig9-2-31"></span><a class="reference internal image-reference" href="_images/fig311.png"><img alt="_images/fig311.png" src="_images/fig311.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 317 </span><span class="caption-text">ACR-700 fuel assembly model.</span><a class="headerlink" href="#id189" title="Permalink to this image">¶</a></p>
<div class="legend">
<p>(continued from <a class="reference internal" href="#fig9-2-31"><span class="std std-numref">Fig. 317</span></a>)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hole 1
hole 2  origin x=-1.56318 y= 0.75279
hole 2  origin x=-0.38607 y= 1.69150
hole 2  origin x= 1.08176 y= 1.35648
hole 2  origin x= 1.73500
hole 2  origin x= 1.08176 y=-1.35648
hole 2  origin x=-0.38607 y=-1.69150
hole 2  origin x=-1.56318 y=-0.75279
hole 3 origin x=-2.99790 y= 0.68425
hole 3 origin x=-2.40413 y= 1.91723
hole 3 origin x=-1.33419 y= 2.77048
hole 3 origin            y= 3.07500
hole 3 origin x= 1.33419 y= 2.77048
hole 3 origin x= 2.40413 y= 1.91723
hole 3 origin x= 2.99790 y= 0.68425
hole 3 origin x= 2.99790 y=-0.68425
hole 3 origin x= 2.40413 y=-1.91723
hole 3 origin x= 1.33419 y=-2.77048
hole 3 origin x= 0.00000 y=-3.07500
hole 3 origin x=-1.33419 y=-2.77048
hole 3 origin x=-2.40413 y=-1.91723
hole 3 origin x=-2.99790 y=-0.68425
hole 4 origin x=-4.33602 y= 0.65355
hole 4 origin x=-3.95075 y= 1.90258
hole 4 origin x=-3.21443 y= 2.98256
hole 4 origin x=-2.19250 y= 3.79752
hole 4 origin x=-0.97575 y= 4.27506
hole 4 origin x= 0.32769 y= 4.37274
hole 4 origin x= 1.60202 y= 4.08188
hole 4 origin x= 2.73400 y= 3.42833
hole 4 origin x= 3.62306 y= 2.47016
hole 4 origin x= 4.19019 y= 1.29250
hole 4 origin x= 4.38500
hole 4 origin x= 4.19019 y=-1.29250
hole 4 origin x= 3.62306 y=-2.47016
hole 4 origin x= 2.73400 y=-3.42833
hole 4 origin x= 1.60202 y=-4.08188
hole 4 origin x= 0.32769 y=-4.37274
hole 4 origin x=-0.97575 y=-4.27506
hole 4 origin x=-2.19250 y=-3.79752
hole 4 origin x=-3.21443 y=-2.98256
hole 4 origin x=-3.95075 y=-1.90258

hole 4 origin x=-4.33602 y=-0.65355
cylinder   501  5.8169 sides=20
cylinder   502  7.55   sides=24
cylinder   503  7.8    sides=24
media     13  1  500
media      5  1 501 -500
media      6  1 502 -501
media      7  1 503 -502
media      8  1 100 -503
boundary  100 50 50
end geom
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="summary-of-geometry-specifications">
<span id="id88"></span><h4>Summary of geometry specifications<a class="headerlink" href="#summary-of-geometry-specifications" title="Permalink to this headline">¶</a></h4>
<p>This section is provided as a quick reference for geometry statements.
Details and examples of the usage of each geometry specification are
provided in previous subsections of this manual. For each definition,
the lists of permitted modifiers are listed.</p>
<div class="section" id="unit-definition-statements">
<span id="id89"></span><h5>Unit definition statements<a class="headerlink" href="#unit-definition-statements" title="Permalink to this headline">¶</a></h5>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[global] unit   unit_id
</pre></div>
</div>
<p>The <em>unit</em> statement is used to initiate the definition of each unit
used. <em>unit_id</em> is an integer identification label for the unit and must
be unique. One (and only one) global unit is required in each geometry
model. Modifiers: none.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cuboid  body_id  xmax xmin ymax ymin [modifier_list]
</pre></div>
</div>
<p>The <em>cuboid</em> statement is used to define a rectangular shape. <em>body_id</em>
is the integer identification label for the cuboid and must be unique
within the unit it is used. The rectangle is defined such that the
coordinates (x<sub>min</sub>, y<sub>min</sub>) and (x<sub>max</sub>,
y<sub>max</sub>) represent the lower-left and upper-right vertices of the
cuboid. Modifiers: <em>rotate, com</em>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>cylinder body_id  radius [modifier_list]
</pre></div>
</div>
<p>The <em>cylinder</em> statement defines a circle with integer label <em>body_id</em>
and radius <em>radius</em>, placed with its center at the origin (0,0) of the
unit. Modifiers: <em>origin, rotate, chord, sides, com</em>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hexprism  body_id  radius [modifier_list]
</pre></div>
</div>
<p>The <em>hexprism</em> statement defines a standard hexagon with integer label
<em>body_id</em> and inscribed radius <em>radius</em>, placed with its center at the
origin (0,0) of the unit. A standard hexagon has vertices located on
north (top) and south (bottom) regions of the shape. Modifiers: <em>origin,
rotate, chord, sides, com.</em></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rhexprism  body_id  radius [modifier_list]
</pre></div>
</div>
<p>The <em>rhexprism</em> statement defines a rotated hexagon with integer label
<em>body_id</em> and inscribed radius <em>radius</em>, placed with its center at the
origin (0,0) of the unit. A rotated hexagon has vertices located on east
(right) and west (left) regions of the shape. Modifiers: <em>origin,
rotate, chord, sides, com.</em></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>wedge  body_id  xbase xpt ypt [modifier_list]
</pre></div>
</div>
<p>The <em>wedge</em> statement defines a triangle with integer label <em>body_id</em>
placed with a vertex at (0,0), a vertex at (x<sub>base</sub>,0), and a
vertex at (x<sub>pt</sub>,y<sub>pt</sub>). Modifiers: <em>origin, rotate, com.</em></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>array arrayid body_id place i j xij yij  [modifier_list]
</pre></div>
</div>
<p>The <em>array</em> placement statement specifies the placement of an array with
identification number <em>arrayid</em> (defined in the array data block),
within shape <em>body_id</em>. If the <em>place</em> statement is used, the array
element located in row <em>i</em> (counted from the bottom) and column <em>j</em>
(counted from the left) is placed such that its origin is located at
spatial coordinate (<em>xij</em>, <em>yij</em>) of the unit in which it is placed.
Modifiers: <em>com</em>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>hole unit_id [modifier_list]
</pre></div>
</div>
<p>The <em>hole</em> statement is used to place a different unit identified by
label <em>unit_id</em> within the current unit. The origin of the unit being
placed will be located at the origin of the current unit but can be
repositioned using the <em>origin</em> modifier. Modifiers: <em>origin, rotate,
com</em>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>media  materialid  bias_placeholder  reg_def_vector
</pre></div>
</div>
<p>The <em>media</em> statement assigns material properties associated with
mixture index <em>materialid</em> to a shape region defined within a unit. The
<em>bias_placeholder</em> term is not currently used but is retained for
consistency with KENO-VI; typically it is assigned a value of 1.
<em>reg_def_vector</em> is the region definition vector and assigns the mixture
placement relative to shapes within the unit. If the index is positive,
the shape region is included in the material assignment; if negative, it
is excluded. Modifiers: none.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>boundary  body_id  [x-discretization y-discretization]
</pre></div>
</div>
<p>The <em>boundary</em> statement is used to define the outer boundary of the
unit, corresponding to the outer bounds of the shape <em>body_id</em> within
the unit. This shape must exist and must contain all other bodies
associated with the unit. The <em>x-discretization</em> and <em>y-discretization</em>
terms are integers (≥2) that specify the number of cells to be placed in
the unit in the x-direction and y-direction, respectively. A grid
specification is required for the global unit but is optional for other
units. Modifiers: none.</p>
</div>
<div class="section" id="geometry-modifiers">
<span id="id90"></span><h5>Geometry modifiers<a class="headerlink" href="#geometry-modifiers" title="Permalink to this headline">¶</a></h5>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>origin x=xnew y=ynew
</pre></div>
</div>
<p>Used to relocate the origin of cylinders, hexprisms, rhexprisms, and
holes to new co-ordinate (x<sub>new</sub>, y<sub>new</sub>). The default (if
not specified) is to place the origin of the body at (0, 0).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>rotate  a1=A
</pre></div>
</div>
<p>Causes a body to be rotated by an angle of <em>A</em> degrees
(counterclockwise) around its origin. It can be applied to holes and all
basic shapes; the default is 0 degrees.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>chord  ±x=xplane
chord  ±y=yplane
</pre></div>
</div>
<p>Chords are used to truncate a shape at the line x=<em>chord</em> (or
y=<em>chord</em>). Multiple chord commands are allowed, but only one line
(either in x- or y-direction) is specified for each. If the negative
keyword ‘–x’ (or ‘–y’) appears, then the part of the shape to the left
of (below) the chord cut is retained. Similarly, if the positive keyword
(‘+x’ or ‘+y’) is used, then the portion of the shape to the right of or
above the chord is retained. Chords may be applied to cylinders,
hexprisms, and rhexprisms only.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sides=N
</pre></div>
</div>
<p>For use with the cylinder statement, the <em>sides</em> modifier specifies the
number of sides on the regular polygon used to approximate the cylinder.
Its default is N = 12. The radius of the polygon is adjusted such that
the area of the polygon matches the area of the cylinder it is
approximating. The <em>sides</em> modifier is unique to NEWT and is not used by
KENO-VI.</p>
</div>
</div>
</div>
<div class="section" id="boundary-conditions">
<span id="id91"></span><h3>Boundary conditions<a class="headerlink" href="#boundary-conditions" title="Permalink to this headline">¶</a></h3>
<p>The <em>geometry data</em> block is generally followed by the <em>bounds</em> data
block, in which boundary conditions for the sides of the bounding shape
in the global array are specified. NEWT supports the use of cuboid,
hexprism, and wedge shapes to define outer boundaries. This results in
the need to specify up to 6 surface boundaries, on up to 8 spatial
orientations. In other words, a cuboid will have boundaries on +x, ‑x,
+y, and –y faces. A regular hexprism will have boundaries on +x and -x
faces; it will also have boundaries on the four sloped sides of the hex.
In order to identify the sense of sides for specification of boundary
conditions, NEWT applies an eight-point compass nomenclature. The four
permitted rectangular boundary surfaces are identified as +x, -x, +y,
and –y, corresponding to east (E), west (W), north (N), and south (S)
faces, as illustrated in <a class="reference internal" href="#fig9-2-32"><span class="std std-numref">Fig. 318</span></a> Sloped (non-rectangular) surfaces
are identified as +x+y, +x‑y, -x-y, and –x+y, for northeast (NE),
southeast (SE), southwest (SW), and northwest (NW) surfaces. No
assumptions are made on the slope of the various non-rectangular
surfaces; for the bodies available within NEWT, it is not possible to
have more than one surface in each octant.</p>
<div class="figure align-center" id="id190">
<span id="fig9-2-32"></span><a class="reference internal image-reference" href="_images/fig321.png"><img alt="_images/fig321.png" src="_images/fig321.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 318 </span><span class="caption-text">Two-dimensional boundary condition surface orientations.</span><a class="headerlink" href="#id190" title="Permalink to this image">¶</a></p>
</div>
<p>Currently, full specification of boundary conditions is permitted only
when the boundary body for the global unit is a cuboid. Only white and
vacuum boundary conditions are permitted on non-rectangular surfaces.</p>
<p>Boundary conditions therefore may only be specified for the ±x and
±y faces of a boundary cuboid. Four boundary conditions are currently
supported:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>reflective (default),</p></li>
<li><p>white,</p></li>
<li><p>vacuum, and</p></li>
<li><p>periodic.</p></li>
</ol>
</div></blockquote>
<p>Albedo boundary conditions are not yet supported but will be available
in a future release. Additional information on the meaning of each
boundary condition type is provided in the following section.</p>
<div class="section" id="boundary-conditions-descriptions">
<span id="id92"></span><h4>Boundary conditions descriptions<a class="headerlink" href="#boundary-conditions-descriptions" title="Permalink to this headline">¶</a></h4>
<p>Boundary conditions are mathematical approximations used to describe the
behavior of neutrons when they cross a problem boundary. Typically,
transport methods provide for reflective (or mirror), white, vacuum, or
periodic boundary conditions. The following subsections describe and
illustrate these four types of boundary conditions.</p>
<div class="section" id="reflective-boundary-condition">
<span id="id93"></span><h5>Reflective boundary condition<a class="headerlink" href="#reflective-boundary-condition" title="Permalink to this headline">¶</a></h5>
<p>For the reflective boundary condition, the incoming angular flux is set
equal to the outgoing angular flux in the direction corresponding to
mirror or specular reflection. As shown in <a class="reference internal" href="#fig9-2-33"><span class="std std-numref">Fig. 319</span></a>, a given
quantity of neutrons leaving a boundary (dotted line) in a particular
direction will be returned (solid line of same color) to the system with
the same quantity but at a mirrored angle to the initial leakage
direction.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the following figures, a dashed arrow indicates neutrons
leaving the system while a solid arrow represents those returning to the
system. The length of the arrow is proportional to the number of
neutrons; therefore, longer arrows represent more neutrons than do
shorter arrows.</p>
</div>
<div class="figure align-center" id="id191">
<span id="fig9-2-33"></span><a class="reference internal image-reference" href="_images/fig331.png"><img alt="_images/fig331.png" src="_images/fig331.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 319 </span><span class="caption-text">Reflective boundary condition.</span><a class="headerlink" href="#id191" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="white-boundary-condition">
<span id="id94"></span><h5>White boundary condition<a class="headerlink" href="#white-boundary-condition" title="Permalink to this headline">¶</a></h5>
<p>For the white boundary condition, the incoming angular fluxes are each
set equal to a single value chosen such that the net flow across the
boundary is zero. The white boundary provides isotropic return (solid
lines) at a boundary (<a class="reference internal" href="#fig9-2-34"><span class="std std-numref">Fig. 320</span></a>).</p>
<div class="figure align-center" id="id192">
<span id="fig9-2-34"></span><a class="reference internal image-reference" href="_images/fig341.png"><img alt="_images/fig341.png" src="_images/fig341.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 320 </span><span class="caption-text">White boundary condition.</span><a class="headerlink" href="#id192" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="vacuum-boundary-condition">
<span id="id95"></span><h5>Vacuum boundary condition<a class="headerlink" href="#vacuum-boundary-condition" title="Permalink to this headline">¶</a></h5>
<p>A vacuum boundary condition means that no neutrons will reenter the
boundary. Thus, any neutron exiting the system through a boundary with a
vacuum boundary condition is permanently lost to the system. This
condition is illustrated in <a class="reference internal" href="#fig9-2-35"><span class="std std-numref">Fig. 321</span></a>.</p>
<div class="figure align-center" id="id193">
<span id="fig9-2-35"></span><a class="reference internal image-reference" href="_images/fig351.png"><img alt="_images/fig351.png" src="_images/fig351.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 321 </span><span class="caption-text">Vacuum boundary condition.</span><a class="headerlink" href="#id193" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="periodic-boundary-condition">
<span id="id96"></span><h5>Periodic boundary condition<a class="headerlink" href="#periodic-boundary-condition" title="Permalink to this headline">¶</a></h5>
<p>For the periodic boundary condition, the incoming angular flux on a
boundary is set equal to the outgoing angular flux on the opposite
boundary. <a class="reference internal" href="#fig9-2-36"><span class="std std-numref">Fig. 322</span></a> shows the leakage leaving each boundary (dotted
lines) being returned at the same quantity and angle on the opposite
boundary (solid line of same color). When the periodic boundary
condition is used, it must be applied to both opposing boundaries.</p>
<div class="figure align-center" id="id194">
<span id="fig9-2-36"></span><a class="reference internal image-reference" href="_images/fig361.png"><img alt="_images/fig361.png" src="_images/fig361.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 322 </span><span class="caption-text">Periodic boundary condition.</span><a class="headerlink" href="#id194" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="boundary-condition-specification">
<span id="id97"></span><h4>Boundary condition specification<a class="headerlink" href="#boundary-condition-specification" title="Permalink to this headline">¶</a></h4>
<p>The standard format for boundary condition specifications is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read bounds
-x=west_BC  +x=east_BC  -y=south_BC  +y=north_BC
+x+y=northeast_BC   +x-y=southeast_BC
-x+y=northwest_BC   -x-y=southwest_BC
end bounds
</pre></div>
</div>
<p>where <em>west_BC, east_BC, south_BC, north_BC, northeast_BC, southeast_BC,
northwest_BC, southwest_BC</em> are each one of the eight possible boundary
condition options. The name of the boundary condition requires only the
number of leading characters required to make the name unique. For this
set, the first letter is sufficient; that is, +x=v, +x=vac +x=vacu, and
+x=vacuum are all equivalent and specify a vacuum (zero return) boundary
condition on the right side of the global cuboid.</p>
<p>In keeping with KENO-VI, multiple shortcuts exist to simplify the
specification. For example, a single boundary condition can be assigned
to all four sides simultaneously with the <em>all=</em> specifier:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read bounds
all=refl
end bounds
</pre></div>
</div>
<p>All KENO-VI boundary face keywords that do not reference the z-dimension
are allowed and are listed in <a class="reference internal" href="#tab9-2-1"><span class="std std-numref">Table 316</span></a>.</p>
<span id="tab9-2-1"></span><table class="docutils align-center" id="id195">
<caption><span class="caption-number">Table 316 </span><span class="caption-text">Boundary condition specifiers accepted by NEWT.</span><a class="headerlink" href="#id195" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Keyword</strong></p></th>
<th class="head"><p><strong>Boundary edge</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>+x, +xb</p></td>
<td><p>East (right)</p></td>
</tr>
<tr class="row-odd"><td><p>-x, -xb</p></td>
<td><p>West (left)</p></td>
</tr>
<tr class="row-even"><td><p>+y, +yb</p></td>
<td><p>North (top)</p></td>
</tr>
<tr class="row-odd"><td><p>-y, -yb</p></td>
<td><p>South (bottom)</p></td>
</tr>
<tr class="row-even"><td><p>all, xyf, yxf</p></td>
<td><p>All boundaries</p></td>
</tr>
<tr class="row-odd"><td><p>+xy, +yx, +fc</p></td>
<td><p>East (right) + north (top)</p></td>
</tr>
<tr class="row-even"><td><p>-xy, -yx, -fc</p></td>
<td><p>West (left) + south (bottom)</p></td>
</tr>
<tr class="row-odd"><td><p>xfc</p></td>
<td><p>West (left) + east (right)</p></td>
</tr>
<tr class="row-even"><td><p>yfc</p></td>
<td><p>North (top) + south (bottom)</p></td>
</tr>
<tr class="row-odd"><td><p>+x+y</p></td>
<td><p>Northeast (top right)</p></td>
</tr>
<tr class="row-even"><td><p>-x+y</p></td>
<td><p>Southeast (bottom right)</p></td>
</tr>
<tr class="row-odd"><td><p>-x-y</p></td>
<td><p>Southwest (bottom left)</p></td>
</tr>
<tr class="row-even"><td><p>-x+y</p></td>
<td><p>Northwest (top left)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="general-cross-section-weighting">
<span id="id98"></span><h3>General cross section weighting<a class="headerlink" href="#general-cross-section-weighting" title="Permalink to this headline">¶</a></h3>
<p>NEWT performs cross section weighting by mixture and optionally by
homogenization zone (<a class="reference internal" href="#id111"><span class="std std-ref">Homogenization block</span></a>). Weighting is always used in
conjunction with an energy collapse. Cross section weighting is
performed over a spatial and energy domain; the resulting average
(weighted) cross sections will preserve all reaction rates in the
collapsed cross section set; that is,</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-28">
<span class="eqno">(554)<a class="headerlink" href="#equation-eq9-2-28" title="Permalink to this equation">¶</a></span>\[\sigma_{G}^{i}=\frac{\int_{r} N^{i}(r) d r \int_{G} \sigma^{i}(E, r) W(E, r) d E}{\int_{r} N^{i}(r) d r \int_{G} W(E, r) d E} ,\]</div>
<p>where</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(\sigma_{G}^{i}\)</span> ≡ average (weighted) cross section in energy group <em>G</em> for
nuclide <em>I</em>,</p>
<p><span class="math notranslate nohighlight">\(N^{i}(r)\)</span> ≡ number density of nuclide <em>i</em> in region <em>r</em>,</p>
<p><span class="math notranslate nohighlight">\(W(E, r)\)</span> ≡ the weighting function within region <em>r,</em></p>
<p><span class="math notranslate nohighlight">\(\sigma^{i}(E, r)\)</span> ≡ the cross section from the input library for nuclide <em>i</em> in
region <em>r</em>.</p>
</div></blockquote>
<p>Within NEWT, each collapsing region is the spatial region or regions in
which a given mixture is placed. Hence, for most of the cross section
types, an average cross section for the mixture associated with the
spatial domain <em>r</em> (which may include one or more defined regions
occupied by that mixture) is calculated by weighting the original
problem-specific cross section data for that mixture using as a
weighting function the neutron spectrum calculated within spatial domain
<em>r</em>.</p>
<p>In practice, the integration of <a class="reference internal" href="#equation-eq9-2-28">(554)</a> is performed as a simple
summation over all cells <em>j</em> within region <em>r</em>:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-29">
<span class="eqno">(555)<a class="headerlink" href="#equation-eq9-2-29" title="Permalink to this equation">¶</a></span>\[\sigma_{i, G}=\frac{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} \sigma_{g, j}^{i} W_{g, j}}{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} W_{g, j}} .\]</div>
<p>Because any region <em>r</em> is defined as the sum of all spatial regions
containing a given mixture, is constant everywhere within <em>r</em>.</p>
<p>All multigroup cross sections and related data present on the AMPX
library are weighted using appropriate weighting functions. For most
basic cross sections, the multigroup flux obtained from the transport
solution is the appropriate weighting function and <span class="math notranslate nohighlight">\(W_{g, r}\)</span> in <a class="reference internal" href="#equation-eq9-2-29">(555)</a>
becomes <span class="math notranslate nohighlight">\(\phi_{g, r}\)</span>. However, special cross sections and data need special
treatment, as described in the following sections.</p>
<div class="section" id="scattering-cross-section-transfer-matrix-weighting">
<span id="id99"></span><h4>Scattering cross section transfer matrix weighting<a class="headerlink" href="#scattering-cross-section-transfer-matrix-weighting" title="Permalink to this headline">¶</a></h4>
<p>In weighting scattering cross sections, the form of the weighting is
slightly more complex:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-30">
<span class="eqno">(556)<a class="headerlink" href="#equation-eq9-2-30" title="Permalink to this equation">¶</a></span>\[\sigma_{s, G \rightarrow G^{\prime}}^{i}=\frac{\int_{r} N^{i}(r) d r \int_{G} W(E, r) d E \int_{G^{\prime}} \sigma^{i}\left(E \rightarrow E^{\prime}, r\right) d E^{\prime}}{\int_{r} N^{i}(r) d r \int_{G} W(E, r) d E} ,\]</div>
<p>or, in multigroup format,</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-31">
<span class="eqno">(557)<a class="headerlink" href="#equation-eq9-2-31" title="Permalink to this equation">¶</a></span>\[\sigma_{s, G \rightarrow G^{\prime}}^{i}=\frac{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} W_{g, r} \sum_{g^{\prime} \in G^{\prime}} \sigma^{i}\left(g \rightarrow g^{\prime}\right)}{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} W_{g, r}} .\]</div>
<p>In general, the scalar flux, <em>ϕ</em><sub>g,r</sub> is the appropriate weighting
function for scattering cross sections:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-32">
<span class="eqno">(558)<a class="headerlink" href="#equation-eq9-2-32" title="Permalink to this equation">¶</a></span>\[\sigma_{G}^{i}=\frac{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} \sigma_{g, r}^{i} \phi_{g, r}}{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} \phi_{g, r}} .\]</div>
<p>This is an approximation for the higher order moments (<em>l</em> &gt; 0) of the
scattering cross sections, which should be more properly weighted using
the <em>l</em>th moment of the flux instead of the 0th moment (scalar) flux
as used in Eq. <a class="reference internal" href="#equation-eq9-2-32">(558)</a>. However, because flux moments are generally
both positive and negative, NEWT performs higher-order-moment scattering
cross section weighting using the positive scalar flux.</p>
</div>
<div class="section" id="weighting-of-the-collapsed-fission-spectrum-chi">
<span id="id100"></span><h4>Weighting of the collapsed fission spectrum, <span class="math notranslate nohighlight">\(\chi\)</span><a class="headerlink" href="#weighting-of-the-collapsed-fission-spectrum-chi" title="Permalink to this headline">¶</a></h4>
<p>Weighting is not required for collapsing a fission spectrum vector; the
format for a collapsed fission spectrum (χ<sub>G</sub>) is a very
straightforward summation of the fission spectra in energy groups <em>g</em>
spanning the energy domain of the collapsed energy group <em>G</em>:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-33">
<span class="eqno">(559)<a class="headerlink" href="#equation-eq9-2-33" title="Permalink to this equation">¶</a></span>\[\chi_{G}=\sum_{g \in G} \chi_{g} .\]</div>
</div>
<div class="section" id="weighting-of-the-number-of-neutrons-per-fission-boldsymbol-v">
<span id="id101"></span><h4>Weighting of the number of neutrons per fission, <span class="math notranslate nohighlight">\(\boldsymbol{V}\)</span><a class="headerlink" href="#weighting-of-the-number-of-neutrons-per-fission-boldsymbol-v" title="Permalink to this headline">¶</a></h4>
<p>Accurate weighting of <span class="math notranslate nohighlight">\(v\)</span> in an energy and space domain requires weighting
by the fission rate; that is,</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-34">
<span class="eqno">(560)<a class="headerlink" href="#equation-eq9-2-34" title="Permalink to this equation">¶</a></span>\[W(E, r)=\sigma_{\text {fission }}^{i}(E, r) \phi(E, r) .\]</div>
<p>Hence, for <span class="math notranslate nohighlight">\(v\)</span>, Eq. <a class="reference internal" href="#equation-eq9-2-32">(558)</a> has the form</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-35">
<span class="eqno">(561)<a class="headerlink" href="#equation-eq9-2-35" title="Permalink to this equation">¶</a></span>\[v_{G}^{i}=\frac{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} v_{g}^{i} \sigma_{f i s s i o n, g, r}^{i} \phi_{g, r}}{N_{r}^{i} \sum_{j \in r} \sum_{g \in G} \sigma_{f i s s i o n, g, r}^{i} \phi_{g, r}} .\]</div>
</div>
<div class="section" id="weighting-of-n-2n-n-3n-and-n-4n-cross-sections">
<span id="id102"></span><h4>Weighting of (n,2n), (n,3n), and (n,4n) cross sections<a class="headerlink" href="#weighting-of-n-2n-n-3n-and-n-4n-cross-sections" title="Permalink to this headline">¶</a></h4>
<p>In creating AMPX weighted libraries with NEWT, all data on the original
library are collapsed and written to a collapsed working-format library,
for each reaction type and for each nuclide. Therefore, each of the
(n,*X*n) libraries is collapsed independently using Eq. <a class="reference internal" href="#equation-eq9-2-29">(555)</a> and
is written on the weighted library.</p>
<p>However, during NEWT transport calculations, NEWT computes and stores a
single effective (n,2n) reaction rate, determined as the weighted sum of
the individual reactions:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-36">
<span class="eqno">(562)<a class="headerlink" href="#equation-eq9-2-36" title="Permalink to this equation">¶</a></span>\[\sigma_{n, 2 n}^{\text {effective }}=\sigma_{n, 2 n}+2 \sigma_{n, 3 n}+3 \sigma_{n, 4 n} .\]</div>
<p>The (n,2n) reaction rates reported in NEWT output are those computed for
the effective cross section. The effective (n,2n) cross section is not
saved to the weighted library.</p>
</div>
<div class="section" id="calculation-and-weighting-of-transport-cross-sections">
<span id="id103"></span><h4>Calculation and weighting of transport cross sections<a class="headerlink" href="#calculation-and-weighting-of-transport-cross-sections" title="Permalink to this headline">¶</a></h4>
<p>Transport cross sections are processed in a different manner from other
cross sections. The transport cross section does not represent a purely
measurable quantity. Introduced within the P<sub>1</sub> (diffusion)
approximation to the neutron transport equation, it attempts to preserve
a flux gradient in addition to reaction rate information. Hence, the
magnitude of a microscopic transport cross section is affected by both
the physics properties of the nuclide in question and the geometrical
attributes of the spatial domain where the nuclide resides and the other
nuclides present in the same vicinity.</p>
<p>Consistent with XSDRNPM, NEWT provides two options to generate a
microscopic transport cross section—based on the “consistent” and
“inconsistent” methods for solving the P<sub>l</sub> transport equations.
These approximations are referred to as the “outscatter” and “inscatter”
approximations because of the nature of the equations used.</p>
<div class="section" id="outscatter-approximation-inconsistent-method">
<span id="id104"></span><h5>Outscatter approximation (inconsistent method)<a class="headerlink" href="#outscatter-approximation-inconsistent-method" title="Permalink to this headline">¶</a></h5>
<p>In the outscatter approximation, the following assumption is made for
the transport cross section in group <em>g</em>:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-37">
<span class="eqno">(563)<a class="headerlink" href="#equation-eq9-2-37" title="Permalink to this equation">¶</a></span>\[\sigma_{t r}^{g}=\sigma_{t}^{g}-\bar{\mu}^{g} \sigma_{s}^{g} ,\]</div>
<p>where σ<sub>t</sub><sup>g</sup> and σ<sub>s</sub><sup>g</sup> are the total and
scattering cross section in group <em>g</em>,</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-38">
<span class="eqno">(564)<a class="headerlink" href="#equation-eq9-2-38" title="Permalink to this equation">¶</a></span>\[\bar{\mu}^{g}=\frac{\sigma_{s, 1}^{g}}{3 \sigma_{s, 0}^{g}}\]</div>
<p>and</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-39">
<span class="eqno">(565)<a class="headerlink" href="#equation-eq9-2-39" title="Permalink to this equation">¶</a></span>\[\sigma_{s, N}^{g}=\sum_{g^{\prime}} \sigma_{s, N}\left(g \rightarrow g^{\prime}\right) .\]</div>
<p>Note that the <span class="math notranslate nohighlight">\(\sigma_{s, N}\left(g \rightarrow g^{\prime}\right)\)</span> terms are the P<sub>N</sub> coefficients of the scattering
matrix, hence the origin of the term “outscatter.”</p>
</div>
<div class="section" id="inscatter-approximation-consistent-method">
<span id="id105"></span><h5>Inscatter approximation (consistent method)<a class="headerlink" href="#inscatter-approximation-consistent-method" title="Permalink to this headline">¶</a></h5>
<p>In the “consistent” P<sub>1</sub> approximation of the transport equation,
the transport cross section is defined as</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-40">
<span class="eqno">(566)<a class="headerlink" href="#equation-eq9-2-40" title="Permalink to this equation">¶</a></span>\[\sigma_{t r}(E)=\sigma_{t}(E)-\frac{1}{3 J(E)} \int_{0}^{\infty} \sigma_{s, 1}\left(E^{\prime} \rightarrow E\right) J\left(E^{\prime}\right) d E^{\prime}\]</div>
<p>where <em>J</em> is the neutron current and <span class="math notranslate nohighlight">\(\sigma_{s, 1}\)</span> is the first moment (P<sub>1</sub>
coefficient) of the scattering transfer matrix.</p>
<p>If one multiplies Eq. <a class="reference internal" href="#equation-eq9-2-40">(566)</a> by J(E), integrates over group <em>g</em>, and
converts to a group-averaged form by dividing by <span class="math notranslate nohighlight">\(\int_{g} J(E) d E\)</span>, the following
expression is derived:</p>
<div class="math notranslate nohighlight" id="equation-eq9-2-41">
<span class="eqno">(567)<a class="headerlink" href="#equation-eq9-2-41" title="Permalink to this equation">¶</a></span>\[\sigma_{t r}^{g}=\sigma_{t}^{g}-\frac{1}{3 J_{g}} \sum_{g^{\prime}} \sigma_{s, 1}\left(g^{\prime} \rightarrow g\right) J_{g^{\prime}} .\]</div>
<p>This is the “inscatter” approximation. It is consistent because the
transport values are explicitly derived from the P<sub>0</sub> and
P<sub>1</sub> equations.</p>
</div>
<div class="section" id="weighting-function-for-transport-cross-section">
<h5>Weighting function for transport cross section<a class="headerlink" href="#weighting-function-for-transport-cross-section" title="Permalink to this headline">¶</a></h5>
<p>Internal investigations have shown that transport cross sections
computed using the “outscatter” approximation are more robust in
subsequent nodal core calculations as compared with transport cross
sections computed using the “inscatter approximation.” NEWT computes
transport cross sections using the outscatter approximation and
collapses the cross section with the scalar flux.</p>
</div>
</div>
</div>
<div class="section" id="array-definition">
<span id="id106"></span><h3>Array definition<a class="headerlink" href="#array-definition" title="Permalink to this headline">¶</a></h3>
<p>Any arrays specified in unit definitions within the <em>read geom</em> block
are defined in terms of form and content in the <em>read array</em> data block.
The block has the form shown below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read array
ara=arrayid  nux=nx  nuy=ny  typ=aratype  [pinpow=yes/no]
fill i1 i2 i3 i4 … iN end fill
…
end array
</pre></div>
</div>
<p>where <em>arrayid</em> is a unique integer identifier for the array, <em>nx</em> is
the number of array elements moving left to right (i.e., columns), and
<em>ny</em> is the number of array elements moving from bottom to top
(i.e., rows). The type of array is indicated by <em>aratype</em> (e.g., square,
hexagonal). The optional parameter <em>pinpow</em> may be specified as either
<em>yes</em> or <em>no</em> (default is no) and is used to enable/disable pin power
edits for units within the array. The <em>fill</em>…<em>end fill</em> specifier
set is used to input the elements of the array. A total of <em>N *entries
are required, where *N</em> = nx*ny.</p>
<p>Each of these portions of the array definition statement is described in
more detail below.</p>
<div class="section" id="array-types">
<span id="id107"></span><h4>Array types<a class="headerlink" href="#array-types" title="Permalink to this headline">¶</a></h4>
<p>NEWT supports arrays of cuboids, hexprisms, and rotated hexprism
elements. Four different array types may be selected. <a class="reference internal" href="#tab9-2-2"><span class="std std-numref">Table 317</span></a> lists
the supported array types and corresponding element types. The array
type given in the first column lists the keyword associated with each
type, as used in the typ= specifier; in some cases, multiple keywords
are associated with a specific array type. The element type in the
second column provides the boundary shape that can be used in the given
array type. For example, a cuboidal (square) array may only be filled
with cuboidal units.</p>
<span id="tab9-2-2"></span><table class="docutils align-center" id="id196">
<caption><span class="caption-number">Table 317 </span><span class="caption-text">NEWT array types with corresponding element types.</span><a class="headerlink" href="#id196" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 56%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Array type</strong></p></th>
<th class="head"><p><strong>Element type</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Cuboidal, square</p></td>
<td><p>Cuboid</p></td>
</tr>
<tr class="row-odd"><td><p>Hexagonal, triangular</p></td>
<td><p>Hexprism</p></td>
</tr>
<tr class="row-even"><td><p>Shexagonal</p></td>
<td><p>Hexprism</p></td>
</tr>
<tr class="row-odd"><td><p>Rhexagonal</p></td>
<td><p>Rhexprism</p></td>
</tr>
</tbody>
</table>
<p>All arrays are filled in a 2-D <em>i, j</em> pattern, with <em>i</em> varying from 1
to <em>nux</em> and <em>j</em> varying from 1 to <em>nuy</em>. All <em>nux*nuy</em> elements of
each array must be filled. <a class="reference internal" href="#fig9-2-37"><span class="std std-numref">Fig. 323</span></a> illustrates the layout of a
conceptual 4 by 4 cuboidal array, showing the row/column index for each
element of the array. <a class="reference internal" href="#fig9-2-38"><span class="std std-numref">Fig. 324</span></a> shows the row/column designation for
a 4 by 4 hexagonal array. Because of the shape of a hexprism, the array
itself is staggered. However, the row/column numbering is simple to
understand.</p>
<p>The stacked hexagon (shexagon) layout, as shown in <a class="reference internal" href="#fig9-2-39"><span class="std std-numref">Fig. 325</span></a>, was
developed to simply allow an alternate placement algorithm for
hexprisms. Any model that can be specified with <em>typ=hexagonal</em> can also
be specified with <em>type=shexagonal</em>; the choice of which form to use is
simply one of user preference. It is important to note that beginning
with row 3, units will be placed in a physical location different from
that of the hexagonal layout when the shexagonal layout is used.</p>
<p>Finally, the rotated hexprism (rhexprism) array is pictured in
<a class="reference internal" href="#fig9-2-40"><span class="std std-numref">Fig. 326</span></a>. This array is intended to facilitate placement of
rhexprisms. The numbering of cells is somewhat irregular because of the
staggered rows, but it is easy to follow if one is aware of the fill
pattern as illustrated in the figure. Note that the layout of a
rhexagonal array can be replicated exactly using a hexagonal or
rhexagonal array, placed in a hole, and rotated 90°. Thus, the type of
hexprism-based array used can always be tailored to the preferences of
the user and all can be used to create the same model.</p>
<p>It is often the case, especially for hexagonal-type arrays, that one
does not need to fill all array positions. While the array fill
procedure does require that all positions be filled, NEWT provides a
mechanism to fill a position with a null unit, effectively skipping that
position. This is discussed further under Fill Operations.</p>
<div class="figure align-center" id="id197">
<span id="fig9-2-37"></span><a class="reference internal image-reference" href="_images/fig37.png"><img alt="_images/fig37.png" src="_images/fig37.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 323 </span><span class="caption-text">Layout of a 4 by 4 cuboidal array.</span><a class="headerlink" href="#id197" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id198">
<span id="fig9-2-38"></span><a class="reference internal image-reference" href="_images/fig38.png"><img alt="_images/fig38.png" src="_images/fig38.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 324 </span><span class="caption-text">Layout of a 4 by 4 hexagonal array.</span><a class="headerlink" href="#id198" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id199">
<span id="fig9-2-39"></span><a class="reference internal image-reference" href="_images/fig39.png"><img alt="_images/fig39.png" src="_images/fig39.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 325 </span><span class="caption-text">Layout of a 4 by 4 stacked hexagonal (shexagonal) array.</span><a class="headerlink" href="#id199" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id200">
<span id="fig9-2-40"></span><a class="reference internal image-reference" href="_images/fig40.png"><img alt="_images/fig40.png" src="_images/fig40.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 326 </span><span class="caption-text">Layout of a 4 by 4 rotated hexagonal (rhexagonal) array.</span><a class="headerlink" href="#id200" title="Permalink to this image">¶</a></p>
</div>
<p>Although all elements of cuboidal arrays <strong>must</strong> be cuboids, they need
not be the same size. Elements of each row must have the same height but
may have varying widths. Similarly, elements of each column must be of a
single common width but may vary in height. Less flexibility is
available in hex-based arrays, because of their very nature. Hexagonal
and stacked hexagonal arrays may contain only hexprisms, and all must be
of the same outer size (although unit contents may vary as needed).
Rotated hexagonal arrays likewise are limited to rhexprisms with a
single boundary size.</p>
</div>
<div class="section" id="pin-power-edits">
<span id="id108"></span><h4>Pin-power edits<a class="headerlink" href="#pin-power-edits" title="Permalink to this headline">¶</a></h4>
<p>In lattice-physics calculations, it is often necessary to obtain a
pin-power edit showing the power produced in each fuel pin cell. NEWT
uses the array functionality to define pin cells. When <em>pinpow=yes</em> is
specified, an extra edit is produced that gives the normalized pin power
in each pin cell. A pin cell is defined as any element within the array
that contains a fissionable nuclide. Pin powers are normalized such that
the average of all fuel-bearing array elements is 1.0. Array elements
such as burnable poison rods or water holes, which produce no <em>fission</em>
power, are not included in the power normalization process. The <em>pinpow</em>
functionality is not available for hexagonal, shexagonal, or rhexagonal
lattices.</p>
<p>Output provides an edit of each assembly for which <em>pinpow=yes</em> is
specified. In addition, a final edit is provided for the entire system,
normalized to all fuel cells in all arrays for which <em>pinpow=ye</em>s is
specified.</p>
<p>Pin-power edits are shown in the description of output in <a class="reference internal" href="#id122"><span class="std std-ref">Description of Output</span></a>.</p>
</div>
<div class="section" id="fill-operations">
<span id="id109"></span><h4>Fill operations<a class="headerlink" href="#fill-operations" title="Permalink to this headline">¶</a></h4>
<p>The final section of an array specification is the <em>fill</em> list.
Delimited by <em>fill</em> and <em>end fill</em> keywords, NEWT expects a list of
N=nux*nuy unit numbers, specifying the unit to be placed at each array
position. Arrays are filled left to right, starting at the bottom
left-hand corner and moving up a row after all columns in the current
row are filled. In other words, any of the 4 × 4 arrays in the figures
above would be filled in the following order: (1,1), (2,1), (3,1),
(4,1), (1,2), (2,2), (3,2), (4,2), (1,3), (2,3), (3,3), (4,3), (1,4),
(2,4), (3,4), (4,4).</p>
<p>The list of elements used to fill an array consists of unit numbers.
Each unit used in the fill list must be defined in the geometry block
and must be of the shape and size required for the array type and
position. However, NEWT provides the ability to fill an array location
with a null unit, which in essence skips the current array location.
This is accomplished simply by entering unit number “0” (a “null” unit)
at the location to be skipped.</p>
</div>
<div class="section" id="examples-of-array-definitions">
<span id="id110"></span><h4>Examples of array definitions<a class="headerlink" href="#examples-of-array-definitions" title="Permalink to this headline">¶</a></h4>
<p>Consider a simple 3 × 3 square array with array ID 10, with unit 1 to be
placed in the center of the array, surrounded by unit 2 cells. Such a
specification would take the following form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ara=10 nux=3 nuy=3 type=cuboidal fill 2 2 2 2 1 2 2 2 2 end fill
</pre></div>
</div>
<p>This may also be written spanning several lines to help visualize the layout:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ara=10 nux=3 nuy=3 type=cuboidal fill
2 2 2
2 1 2
2 2 2 end fill
</pre></div>
</div>
<p>Note that the array is being filled from the bottom so that the actual unit
layout is inverted relative to the fill description. A fill specification that
places unit 1 at the top center position in this array would be input as
follows, where the second-to-last entry in the list is placed in the horizontal
center of the top row.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ara=10 nux=3 nuy=3 type=cuboidal fill
2 2 2
2 1 2
2 1 2 end fill
</pre></div>
</div>
<p>Arrays may be nested within arrays. Each array must be placed in a unit, but a
unit containing an array may be placed within another array. The following
example demonstrates the use of nested arrays, along with the use of a null
unit.</p>
<p>In this example, we define two units containing cells, a unit containing a
smaller array and a global unit containing a larger array:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unit 1
&#39;0.5/0.6 cm radius pin
cylinder 30 0.5 sides=20
cylinder 20 0.6 sides=20
cuboid 10 4p0.75
media 1 1 30
media 2 1 20 -30
media 3 1 10 -20
boundary 10 3 3

      unit 2
&#39;0.25/0.3 cm radius pin
cylinder 30 0.25 sides=8
cylinder 20 0.3 sides=8
cuboid 10 4p0.375
media 1 1 30
media 2 1 20 -30
media 3 1 10 -20
boundary 10 3 3

&#39;small array
unit 3
cuboid 10 1.5 0 1.5 0
array 1 10 place 1 1 0.375 0.375
media 3 1 10
boundary 10 5 5       &#39;large array
global unit 4
cuboid 10 3.0 0.0 3.0 0.0
array 2 10 place 1 1 0.75 0.75
media 3 1 10
boundary 10 5 5
</pre></div>
</div>
<p>Now, in a <em>read array</em> block, we define array 1, a 2 by 2 array filled
with unit 2 cells, and array 2, filled with two unit 1 cells, one unit 3
cell (containing array 1), and one null unit:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read array
ara=1 nux=2 nuy=2 typ=cuboidal
fill 2 2
     2 2 end fill
&#39;
ara=2 nux=2 nuy=2 typ=cuboidal
fill 1 3
     0 1 end fill
end array
</pre></div>
</div>
<p>When assembled, the model would appear as shown in <a class="reference internal" href="#fig9-2-41"><span class="std std-numref">Fig. 327</span></a>. Note
that local grids override the global grid in each array location but
that the global grid is seen where the null unit is placed.</p>
<div class="figure align-center" id="id201">
<span id="fig9-2-41"></span><a class="reference internal image-reference" href="_images/fig411.png"><img alt="_images/fig411.png" src="_images/fig411.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 327 </span><span class="caption-text">Example of nested arrays and a null unit specification.</span><a class="headerlink" href="#id201" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="homogenization-block">
<span id="id111"></span><h3>Homogenization block<a class="headerlink" href="#homogenization-block" title="Permalink to this headline">¶</a></h3>
<p><strong>Homogenization block keyword = homog, hmog, homo</strong></p>
<p>As discussed earlier, NEWT can be used to collapse cross sections to a
reduced broad-group format. The cross sections produced from this
operation are written as microscopic cross sections for each nuclide in
each mixture. NEWT also provides the ability to produce macroscopic
weighted cross sections homogenized over one or more mixtures.
Homogenized cross sections are created using the collapsing energy
structure defined in the collapse data block or the original library’s
group structure if no collapsing instructions are provided.
Flux-weighted collapsed cross sections are combined with number
densities and added such that reaction rates in homogenized materials
are conserved.</p>
<p>Within the homogenization block, multiple homogenization records are
permitted, and the same mixtures may be repeated in different records.
Each record provides a recipe defining the mixtures to be homogenized.
Homogenization records have the following form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Homogenized     Mixture           List of         end
Mixture ID     Description    Mixtures
</pre></div>
</div>
<p>The homogenized mixture ID is the “nuclide” number under which the
mixture is saved on the homogenized cross section library. The value is
arbitrary and serves only as a means to identify the cross section set
on the library, although each ID must be unique. The mixture description
is an alphanumeric label of up to 12 characters that is associated with
the mixture; this label provides a little more descriptive ability than
the ID itself. The label may not contain blanks. Finally, the label is
followed by the list of mixtures to be homogenized, terminated by the
end keyword. The list may contain up to 1000 unique mixtures.</p>
<p>A sample homogenization block is shown below. In this illustration, two
homogenized mixtures are created. This first consists of five different
fuel mixtures (201–205); this could be used to obtain the average fuel
cross section for an assembly containing five different fuel types. The
homogenized cross sections will be written to the homogenized library as
nuclide 500, with label “fuel.” The second instruction homogenizes
mixtures 201, 210, and 220 from the original problem; this could be
used, for example, to homogenize the fuel, clad, and moderator of a fuel
pin cell. This cross section set would be written on the same library as
nuclide 501, with the label “fuel_cell201.”</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read hmog
500   fuel  201 202 203 204 205  end
501   fuel_cell201   201 210 220 end
end hmog
</pre></div>
</div>
<p>Homogenized (macroscopic) cross sections are saved in an AMPX
working-format library at the unit specified by the <em>hmoglib=</em> parameter
(default=13) [ft13f001].</p>
</div>
<div class="section" id="id112">
<span id="id113"></span><h3>Assembly discontinuity factors<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h3>
<p><strong>Assembly discontinuity factor (adf) block keyword = adf</strong></p>
<p>Because discontinuity factors have meaning only with respect to
homogenized cross sections, ADFs are calculated only if homogenized
cross sections are also specified via the Homogenization data block
(see <a class="reference internal" href="#id111"><span class="std std-ref">Homogenization block</span></a>). Calculation of ADFs is specified in the <em>read adf</em>
data block. The three supported formats of this data block are as
follows. For a single-assembly model, the following format is used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read adf
1 homg_assm_id n=Y1 s=Y2 e=X1 w=X2
end adf
</pre></div>
</div>
<p>For a reflected assembly model, the following format is used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read adf
2 homg_assm_id homog_refl_id w=Xi
end adf
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read adf
3 homg_assm_id line1 line2 line3 ...
end adf
</pre></div>
</div>
<p>where</p>
<blockquote>
<div><blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">hmog_assm_id</span></code>        is the identifying label assigned to the homogenized assembly,</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">hmog_refl_id</span></code>      is the label assigned to the homogenized reflector region,</p>
</div></blockquote>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">Y1</span></code>      is the y-ordinate of the north boundary of the assembly
(typically this is y<sub>max</sub> for the global unit),</p>
<p><code class="docutils literal notranslate"><span class="pre">Y2</span></code>      is the y-ordinate of the south boundary of the assembly (typically this is y<sub>min</sub> for the global unit),</p>
<p><code class="docutils literal notranslate"><span class="pre">X1</span></code>      is the x-ordinate of the east boundary of the assembly
(typically this is x<sub>max</sub> for the global unit),</p>
<p><code class="docutils literal notranslate"><span class="pre">X2</span></code>      is the x-ordinate of the east boundary of the assembly
(typically this is x<sub>max</sub> for the global unit),</p>
<p><code class="docutils literal notranslate"><span class="pre">Xi</span></code>      is the x-ordinate for the fuel/reflector interface,</p>
<p><code class="docutils literal notranslate"><span class="pre">linei</span></code>   is a series of two ordered pairs (<code class="docutils literal notranslate"><span class="pre">X1</span></code>,``Y2``), (<code class="docutils literal notranslate"><span class="pre">X1</span></code>,``Y2``)that define a line segment in the NEWT grid.</p>
</div></blockquote>
<p>In a single-assembly calculation, only a single homogenized mixture is
specified. Leading index 1 indicates that ADFs for the fuel assembly are
being calculated; ADFs may be calculated on any or all faces of a
rectangular assembly. In a reflected assembly, the leading index is 2,
followed by the homogenized mixture ID for the fuel assembly first, then
the homogenized mixture ID for the reflector region. An ADF may be
requested only for one location, at the fuel/reflector interface. In any
configuration, ADFs may be requested for a set of arbitrary line
segments defined in the NEWT geometry. In this case, the leading index
is 3, followed by the homogenized mixture ID, followed by up to 12 line
segments, which are defined by their beginning and ending points. ADFs
along these lines are defined as the surface-averaged flux divided by
the average flux defined for the associated homogenized mixture.
Surface-averaged currents are also edited for each arbitrary line
segment; both full and partial currents in both the x- and y- directions
are provided. The net current is also provided in the few-group cross
section database file <em>xfile016</em>. The orientation of the net current
across the line segment is further discussed in Appendix A of TRITON
chapter.</p>
<p>Although any homogenized set of mixtures can be specified for each
homogenized region, the ADF will have physical meaning only if the
homogenized set represents all mixtures in the assembly. Similarly, if a
reflector calculation is performed, the <em>hmog_refl_id</em> should represent
the set of homogenized reflector mixtures. The average collapsed flux in
the homogenized mixtures is used to calculate the homogeneous flux for a
single-assembly ADF. In a reflector calculation, the homogenized
cross sections for the reflector are used to solve the multigroup
diffusion approximation (<a class="reference internal" href="#id38"><span class="std std-ref">Assembly discontinuity factors</span></a>).</p>
<p>Examples illustrate the use of the ADF input specification. Consider a
17 × 17 pressurized-water-reactor (PWR) design. Because of symmetry, it
can be modeled a ¼ assembly; therefore, we choose to model the upper
right quadrant, as shown in <a class="reference internal" href="#fig9-2-42"><span class="std std-numref">Fig. 328</span></a>. Mixtures 1, 2, 3, and 4
represent the fuel, clad, moderator, and guide tube materials,
respectively. The west and south sides of the model are the assembly
midplanes, so ADFs calculated on these boundaries would have no physical
meaning. (These are not real assembly boundaries.) However, because of
the symmetry of the assembly, fluxes would be identical on all
boundaries. Therefore, selection of either the north or east boundary
will yield a valid ADF for all boundaries. We choose to request an ADF
calculation for the east (right) side of the assembly.</p>
<div class="figure align-center" id="id202">
<span id="fig9-2-42"></span><a class="reference internal image-reference" href="_images/fig421.png"><img alt="_images/fig421.png" src="_images/fig421.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-number">Fig. 328 </span><span class="caption-text">Upper-right quadrant of an unreflected PWR assembly.</span><a class="headerlink" href="#id202" title="Permalink to this image">¶</a></p>
</div>
<p>Assuming we are collapsing 44 energy groups to 2 energy groups, we would
specify the following <em>collapse</em>, <em>homog</em>, and <em>adf</em> blocks to obtain
2-group ADFs representative of this assembly:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read collapse
22r1 22r2
end collapse
read hmog
500 assm   1 2 3 4 end
end hmog
read adf
1 500 e=10.752
end adf
</pre></div>
</div>
<p>Again, recall that for a single assembly, the ADF in each energy group
is simply the average flux on the specified boundary divided by the
average flux for the entire assembly, which in this case is the flux in
homogenized mixture 500.</p>
<p>ADF can also be calculated using the arbitrary line-segment ADF type.
Using this new ADF type, the ADF input would be the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read collapse
22r1 22r2
end collapse
read hmog
500 assm   1 2 3 4 end
end hmog
read adf
3 500 10.752 0.0 10.752 10.752
end adf
</pre></div>
</div>
<p>In this example, the east-side ADF will be calculated along the line
segment starting at (10.752,0) and ending at (10.752,10.752). The values
of the line segments depend on a coordinate system of the global unit.</p>
<p>For a reflected model, consider the same type of assembly but
representing an assembly placed on the core periphery. It is bounded on
one side by a 2 cm stainless steel baffle and 10 cm of water, beyond
which is treated as vacuum. Because the reflector calculation is a 1-D
solution, it is not possible to directly model a fuel assembly with two
reflector boundaries. Typically the assumption is made that the same ADF
may be applied in any assembly/reflector boundary and that a 1-D
reflector model is all that is necessary. This model is pictured in
<a class="reference internal" href="#fig9-2-43"><span class="std std-numref">Fig. 329</span></a>. Notice that different mixtures are used in the reflector
model. Fluxes used in homogenized mixtures and for generating
homogenized cross sections are spatially averaged; thus, it is important
to separate the moderator in the reflector from that in the fuel
assembly such that average fluxes in each region properly characterize
that region. For example, the flux in the reflector will be
significantly different (far more thermal) from the flux within the
assembly.</p>
<div class="figure align-center" id="id203">
<span id="fig9-2-43"></span><a class="reference internal image-reference" href="_images/fig431.png"><img alt="_images/fig431.png" src="_images/fig431.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 329 </span><span class="caption-text">Upper-right quadrant of a PWR assembly with baffle and reflector.</span><a class="headerlink" href="#id203" title="Permalink to this image">¶</a></p>
</div>
<p>Assuming again a collapse from 44 energy groups to 2, the following
<em>collapse</em>, <em>homog</em>, and <em>adf</em> blocks would be specified to obtain
2-group ADFs representative of the assembly and the reflector; 2-group
cross sections for each homogenized region would also be prepared from
the collapse and homogenization instructions:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read collapse
22r1 22r2
end collapse
read hmog
500 assm   1 2 3 4 end
501 reflector 5 6 end
end hmog
read adf
2 500 501 w=10.752
end adf
</pre></div>
</div>
</div>
<div class="section" id="flux-planes">
<span id="id114"></span><h3>Flux planes<a class="headerlink" href="#flux-planes" title="Permalink to this headline">¶</a></h3>
<p><strong>Fluxplane block keyword = fluxplane, fluxplan, flux, fluxplanes</strong></p>
<p>The fluxplane block is a special output edit that lets one obtain the
average scalar flux and currents along any line segment or any
continuous set of collinear line segments. One must simply specify the
start and end points of a line segment for which a linearly averaged
flux is desired. This line segment must correspond to one or more line
segments in the model’s grid structure, which requires some knowledge of
where grid lines exist in the model.</p>
<p>The format of a flux plane specification is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read fluxplane
text_label homg_assm_id xstart ystart xend yend
…
end fluxplane
</pre></div>
</div>
<p>where <em>text_label</em> is an alphanumeric description used to label the
selected plane in the output, <em>homg_assm_id</em> is the identifier in the
<em>homog</em> block, and <em>(xstart, ystart)</em> and <em>(xend, yend)</em> are the
start and end points, respectively, for the line segment for which an
average flux is desired. The <em>text_label</em> string must not contain white
space and may be up to 16 characters in length.</p>
<p>As an example, we consider a simple model consisting of two dissimilar
pin cells (1/4 cells):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>global unit 1
cuboid 1 1.26 0.0 0.63 0.0
cylinder 2 .4750 chord +x=0 chord +y=0 sides=20
cylinder 3 .4095 chord +x=0 chord +y=0 sides=20
cylinder 4 .6030 chord +y=0 chord -x=1.26 origin x=1.26 sides=20
cylinder 5 .5630 chord +y=0 chord -x=1.26 origin x=1.26 sides=20
media 1 1 3
media 2 1 2 -3
media 10 1 5
media 2 1 4 -5
media 3 1 1 -2 -4
boundary 1 4 2
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/img1.png"><img alt="_images/img1.png" class="align-center" src="_images/img1.png" style="width: 400px;" /></a>
<p>We know a line segment (actually, two) exists at <em>x</em> = 0, <em>x</em> = 0.63,
and <em>x</em> = 1.26, between <em>y</em> = 0 and <em>y</em> = 0.63. Thus, a legitimate set
of flux plane specifications would be the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read fluxplane
cell_interface 0.63 0.0 0.63 0.63
midplane_cell1 0.0 0.0 0.0 0.63
midplane_cell2 1.26 0.0 1.26 0.63
end fluxplane
</pre></div>
</div>
<p>This will provide a summary of fluxes and currents at each line segment in
fine-group structure, and if a collapse is performed, in broad-group structure.
Results from a calculation with a two-group collapse appear as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Broad Group Fluxes:
 Group    cell_interface    midplane_cell1    midplane_cell2
    1      5.906586D+01      5.903113D+01      5.930420D+01
    2      7.645792D+00      7.641424D+00      6.705809D+00

Broad Group Currents (x):
 Group    cell_interface    midplane_cell1    midplane_cell2
    1     -3.481505D-01      0.000000D+00      0.000000D+00
    2      3.004759D-01      0.000000D+00      0.000000D+00

Broad Group Currents (y):
 Group    cell_interface    midplane_cell1    midplane_cell2
    1      1.081450D-01      1.652161D-01      1.120160D-01
    2     -1.031163D-01     -1.647396D-01     -9.993214D-02
</pre></div>
</div>
<p>Output also includes +x, –x, +y, and –y components of currents.</p>
</div>
<div class="section" id="mixing-table-block">
<span id="id115"></span><h3>Mixing table block<a class="headerlink" href="#mixing-table-block" title="Permalink to this headline">¶</a></h3>
<p><strong>Mixing table block keyword = mixt, mixtable</strong></p>
<p>Generally, NEWT calculations are performed using a cross section library
and mixing table prepared in advance by other SCALE modules. However,
NEWT allows the user the ability to manually specify the isotopic
composition of each mixture used in a NEWT model. If a mixing table
block is read, any existing mixing table data file is ignored.
Therefore, all mixtures specified in the material block must be mixed in
the mixing table block.</p>
<p>The format of the mixing table is simple and straightforward. For each
nuclide used, three parameters must be supplied: (1) <em>mixid</em>, the
mixture ID number into which the nuclide is to be mixed;
(2) <em>nuclideid</em>, the SCALE ID number for the nuclide (which must exist
on the cross section library being referenced); and (3) <em>concentration</em>,
the number density (atoms/b-cm) of the nuclide in this mixture. The same
nuclide may appear in multiple mixtures or more than once in a single
mixture if desired. Macroscopic cross sections are determined for each
mixture by the following formula:</p>
<div class="math notranslate nohighlight">
\[\Sigma^{R}=\sum_{i} \sigma_{i}^{R} N_{i}\]</div>
<p>where</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(\Sigma^{R}\)</span> is the mixed macroscopic cross section for reaction <em>R</em> in the mixture,</p>
<p>N<sub>i</sub> is the number density of nuclide <em>i</em>,</p>
<p><span class="math notranslate nohighlight">\(\sigma_{i}^{R}\)</span> is the microscopic cross section for reaction <em>R</em> in nuclide <em>i</em>.</p>
</div></blockquote>
<p>The form of the mixing table block is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read mixt
mixid1 nuclideid1 concentration1
mixid2 nuclideid2 concentration2
mixid3 nuclideid3 concentration3
…
mixidN nuclideidN concentrationN
end mixt
</pre></div>
</div>
<p>This concludes this list of input blocks available within NEWT. The
following section provides a list of sample inputs used to represent a
variety of configurations and use of codes. These examples are intended
to provide a broader illustration of the use of NEWT in a range of
potential applications.</p>
</div>
</div>
<div class="section" id="examples-of-inputs">
<span id="id116"></span><h2>Examples of Inputs<a class="headerlink" href="#examples-of-inputs" title="Permalink to this headline">¶</a></h2>
<p>This section provides annotated sample input listings for three
different model types, showing the use of a number of different options
and approaches in model development for a variety of applications. These
samples use the TRITON T-XSEC sequence to prepare cross sections for
stand-alone NEWT calculations. In general, this is more easily
accomplished as a TRITON T-NEWT calculation in which cross section
processing and a NEWT transport solution are combined into a single
calculation. However, the user is directed to the TRITON user’s manual
(Chapter <a class="reference external" href="file:///\nstdsrvusersm8jmrrsT01triton.pdf">T1.4</a> of
the SCALE manual) for details on T-XSEC and T‑NEWT calculations. The
examples are intended simply to demonstrate the use of the NEWT code.
The T-XSEC data are included to allow a user to observe the mixture
definitions used in the NEWT input in its calculation. These problems
are also available as sample problems in the SCALE distribution.</p>
<div class="section" id="sample-1">
<span id="id117"></span><h3>Sample 1<a class="headerlink" href="#sample-1" title="Permalink to this headline">¶</a></h3>
<p>Sample 1 illustrates the use of a series of three consecutive
stand-alone NEWT calculations. Annotated input for this problem is given
in <a class="reference internal" href="#fig9-2-44"><span class="std std-numref">Fig. 330</span></a>. The calculation begins with SCALE standard composition
specifications used to prepare a problem-specific weighted cross section
library and mixing table for use by NEWT. In this case the T-XSEC
sequence of the TRITON control module is used. This input is described
in the TRITON chapter and is not described further here.</p>
<p>The first NEWT case uses no parameter block; thus, all default
parameters are applied. The default is an eigenvalue calculation, with
cross sections read from ft04f001 (xnlib=4) and collapsed cross sections
written to ft30f001 (wtdlib=30). The 238-group cross section library is
collapsed to a 44‑group library using mixture-weighted fluxes. The model
calculates the eigenvalue for a simple 1/4 pin cell. The center of the
pin is placed at the origin, the lower-left corner of the global unit
boundary, inlaid into a 2 by 2 base grid. The grid structure is
illustrated in <a class="reference internal" href="#fig9-2-45"><span class="std std-numref">Fig. 331</span></a>.</p>
<p>The second case performs the same calculation using the collapsed cross
section library created by the first case. Parameter <em>restart</em>=no is
set to prevent the code from attempting a restart from the existing
library. Because the first case saved 238-group fluxes and the second
case uses 44 energy groups from the collapsed set, a restart is not
possible.</p>
<p>The third NEWT case is a calculation identical to the second case,
although the input is different. In this case, the flux restart file
from the previous calculation is used as a first guess for fluxes. This
is permitted since both cases used the same cross section library and
therefore have the same energy boundaries. For this case, the “read
geom” data block is omitted, telling NEWT to use the geometry restart
file from the previous case. This allows a rapid restart, since no
geometric data need to be recomputed. Because no other parameters are
changed, this case will converge after one outer iteration to the same
eigenvalue as in the first case.</p>
<div class="figure align-center" id="id204">
<span id="fig9-2-44"></span><a class="reference internal image-reference" href="_images/fig44.svg"><img alt="_images/fig44.svg" src="_images/fig44.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 330 </span><span class="caption-text">Sample 1 input listing (annotated).</span><a class="headerlink" href="#id204" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id205">
<span id="fig9-2-45"></span><a class="reference internal image-reference" href="_images/fig451.png"><img alt="_images/fig451.png" src="_images/fig451.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 331 </span><span class="caption-text">Grid structure for 1/4 pin cell of Sample 1.</span><a class="headerlink" href="#id205" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="sample-2">
<span id="id118"></span><h3>Sample 2<a class="headerlink" href="#sample-2" title="Permalink to this headline">¶</a></h3>
<p>Sample 2 (shown in Figure 9.2.46 and Figure 9.2.47) illustrates the use
of multiple bodies within a single unit. It highlights the use of media
definitions to include and exclude regions when various bodies are used.
Although an array can be used to place bodies, this example illustrates
a method suitable for use in developing a model for a configuration with
an irregular non-array-type structure. This sample problem also
highlights the use of partial-current unstructured-mesh CMFD
acceleration, which reduces the number of outer iterations from 35 to 21
and the CPU run time by ~25%.</p>
<div class="figure align-center" id="id206">
<span id="fig9-2-46"></span><a class="reference internal image-reference" href="_images/fig46.svg"><img alt="_images/fig46.svg" src="_images/fig46.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 332 </span><span class="caption-text">Sample 2 input listing (annotated).</span><a class="headerlink" href="#id206" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id207">
<span id="fig9-2-47"></span><a class="reference internal image-reference" href="_images/fig47.png"><img alt="_images/fig47.png" src="_images/fig47.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 333 </span><span class="caption-text">Mixture placement and grid structure for model described in Sample 2.</span><a class="headerlink" href="#id207" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="sample-3">
<span id="id119"></span><h4>Sample 3<a class="headerlink" href="#sample-3" title="Permalink to this headline">¶</a></h4>
<p>Sample 3 demonstrates the development of a VVER-440 hexagonal fuel
assembly. Annotated input for this problem is given in Figure 9.2.48.
The output plot for this model is shown in Figure 9.2.49. The key
attributes of this model are as follows:</p>
<ol class="arabic simple">
<li><p>the use of hexagonal (hexprism) units in a stacked hexagonal array,</p></li>
<li><p>the use of null units as placeholders in the array,</p></li>
<li><p>a full model within a rhexagonal outer boundary,</p></li>
<li><p>the use of white boundary conditions,</p></li>
<li><dl class="simple">
<dt>the use of the new partial-current-based unstructured CMFD</dt><dd><p>acceleration for hexagonal-domain configurations, and</p>
</dd>
</dl>
</li>
<li><p>new type-3 ADF inputs.</p></li>
</ol>
<p>Using CMFD acceleration, the number of outer iterations needed for
convergence decreased from 21 to 8 with a run-time speedup of ~2.58.</p>
<div class="figure align-center" id="id208">
<span id="fig9-2-48"></span><a class="long reference internal image-reference" href="_images/fig48.svg"><img alt="_images/fig48.svg" class="long" src="_images/fig48.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 334 </span><span class="caption-text">Sample 3 input listing (annotated).</span><a class="headerlink" href="#id208" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id209">
<span id="fig9-2-49"></span><a class="reference internal image-reference" href="_images/fig49.png"><img alt="_images/fig49.png" src="_images/fig49.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 335 </span><span class="caption-text">Grid structure and material placement for VVER-440 model.</span><a class="headerlink" href="#id209" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="sample-4">
<span id="id120"></span><h3>Sample 4<a class="headerlink" href="#sample-4" title="Permalink to this headline">¶</a></h3>
<p>Sample 4 demonstrates the use of NEWT in modeling a larger, more complex
configuration. Annotated input for this problem is given in
<a class="reference internal" href="#fig9-2-50"><span class="std std-numref">Fig. 336</span></a>. The calculation begins with the use of SCALE standard
composition specifications to prepare a problem-specific weighted cross
section library and mixing table for use by NEWT. In this case the
T-XSEC sequence of the TRITON control module is used.</p>
<p>This NEWT case is used to calculate the eigenvalue of an infinite
lattice of fuel assemblies. Symmetry at the assembly center is used to
reduce a 15 by 15 assembly lattice to a smaller one-quarter assembly.
The grid structure is illustrated in <a class="reference internal" href="#fig9-2-51"><span class="std std-numref">Fig. 337</span></a>. A similar
illustration showing media placements by color is given in
<a class="reference internal" href="#fig9-2-52"><span class="std std-numref">Fig. 338</span></a>.</p>
<p>This input illustrates several features of NEWT modeling capabilities.
Some important features of this model are as follows.</p>
<ul class="simple">
<li><p>In this sample problem, S-6 quadrature, P-1 scattering (P-2 in the
moderator), spatial convergence criteria of 0.005, and an eigenvalue
convergence criteria of 0.001 are used. These are an order of a
magnitude larger than the values typically used for LWR lattice
calculations.</p></li>
<li><p>Two sets of UO<sub>2</sub> cross sections are prepared in the T-XSEC
calculation. These cross sections are identical with the exception of
the mixture number. Since NEWT reports fluxes, reaction rates, etc.,
by mixture, the placement of a unique mixture at a specific location
in a model allows one to determine, for example, the reaction rates
at that model location. Mixture 7, placed in unit 9 in this model,
occurs in only one pin location in the model. Mixture 1, placed in
all other fuel rod locations, will yield reaction rates close to the
average of those for all fuel in the assembly. If the flux or
reaction rate was needed in each unique fuel location, a unique
mixture would be needed for each location.</p></li>
<li><p>The use of chords for cutting cylinders allows inclusion of one-half
and one-quarter fuel cells in the quarter-assembly model. Because the
fuel assembly has an odd number of rods in each dimension, use of
symmetry at the assembly midplanes requires the rods to be bisected.</p></li>
<li><p>In this model, local grid spacing was selected such common grid
spacings occur in all cells. However, this is not a requirement. For
example, a much more refined local grid could have been specified for
unit 9. There is no requirement that grid lines match between
different elements of an array.</p></li>
<li><p>Unstructured coarse-mesh finite-difference acceleration (cmfd=2 or
cmfd=yes) was employed to accelerate the convergence of the solution.
For this case, 14 outer iterations were required for full spatial
convergence as compared with 30 outer iterations when CMFD is
disabled. The CMFD-accelerated case ran 2.5 times faster than its
unaccelerated counterpart. In this sample problem, xycmfd=2 was used
to define the coarse-mesh grid to have two fine-mesh cells per
coarse-mesh cell.</p></li>
<li><p>Two-group homogenized cross sections were generated along with
single-assembly (i.e., type 1) ADFs derived from the Collapse block,
ADF block, and the Homogenization block. In addition, a B1 critical
spectrum search is computed after the transport calculation, which is
folded into the transport solution to generated homogenized
constants.</p></li>
</ul>
<div class="figure align-center" id="id210">
<span id="fig9-2-50"></span><a class="long reference internal image-reference" href="_images/fig50.svg"><img alt="_images/fig50.svg" class="long" src="_images/fig50.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 336 </span><span class="caption-text">Sample 4 input listing (annotated).</span><a class="headerlink" href="#id210" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id211">
<span id="fig9-2-51"></span><a class="reference internal image-reference" href="_images/fig511.png"><img alt="_images/fig511.png" src="_images/fig511.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 337 </span><span class="caption-text">Grid structure for one-quarter assembly of Sample 4.</span><a class="headerlink" href="#id211" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id212">
<span id="fig9-2-52"></span><a class="reference internal image-reference" href="_images/fig521.png"><img alt="_images/fig521.png" src="_images/fig521.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 338 </span><span class="caption-text">Mixture placement for quarter-assembly model of Sample 4.</span><a class="headerlink" href="#id212" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="sample-5">
<span id="id121"></span><h3>Sample 5<a class="headerlink" href="#sample-5" title="Permalink to this headline">¶</a></h3>
<p>Sample 5 (<a class="reference internal" href="#fig9-2-53"><span class="std std-numref">Fig. 339</span></a>) illustrates a calculation for a fuel assembly
with a large water boundary and a vacuum boundary condition. The
calculation begins with the use of SCALE standard composition
specifications to prepare a problem-specific weighted cross section
library and mixing table for use by NEWT.</p>
<p>In this model, seven UO<sub>2</sub> pins are adjacent to eight MOX pins,
which, in turn, are adjacent to a large reflector region. The outer
boundary of the reflector is vacuum. Reflection on the top and bottom
boundaries makes the problem infinite in the y direction. The grid
structure for this problem is illustrated in <a class="reference internal" href="#fig9-2-54"><span class="std std-numref">Fig. 340</span></a>. This problem
illustrates the use of the original CMFD acceleration scheme in NEWT
(cmfd=1 or cmfd=rect). Because of the large degree of scattering within
the reflector region, the problem can be relatively slow to converge.
Without CMFD acceleration, 40 outer iterations are required for spatial
convergence as compared with 12 when CMFD is enabled. A total run-time
speedup of ~1.4 is achieved with the CMFD acceleration scheme.</p>
<p>In addition to the application of CMFD, Sample 5 also illustrates the
use of NEWT’s reflector ADF capability. Reflector ADFs are computed
along the fuel/reflector interface.</p>
<div class="figure align-center" id="id213">
<span id="fig9-2-53"></span><a class="long reference internal image-reference" href="_images/fig53.svg"><img alt="_images/fig53.svg" class="long" src="_images/fig53.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 339 </span><span class="caption-text">Sample 5 input listing (annotated).</span><a class="headerlink" href="#id213" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id214">
<span id="fig9-2-54"></span><a class="reference internal image-reference" href="_images/fig541.png"><img alt="_images/fig541.png" src="_images/fig541.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 340 </span><span class="caption-text">Grid structure for 15-pin row of Sample 5.</span><a class="headerlink" href="#id214" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="description-of-output">
<span id="id122"></span><h4>Description of Output<a class="headerlink" href="#description-of-output" title="Permalink to this headline">¶</a></h4>
<p>This section contains a brief description and explanation of NEWT
output. Portions of the output will not be printed for every problem.
Some output is optional, depending on user input specifications and is
so noted in the description. As with any SCALE module, output begins
with an input echo, module execution records with times and completion
codes, and the program verification information banner page. These
outputs are common to all SCALE modules and are not described here.</p>
</div>
</div>
<div class="section" id="newt-banner">
<span id="id123"></span><h3>NEWT banner<a class="headerlink" href="#newt-banner" title="Permalink to this headline">¶</a></h3>
<p>Following the SCALE program verification information, the first section
unique to NEWT output is the NEWT banner, which appears as shown in
<a class="reference internal" href="#fig9-2-55"><span class="std std-numref">Fig. 341</span></a>. The bottom of the banner gives the title of the case as
given in input. The NEWT banner is printed only if the command line
option –p is used to run SCALE.</p>
<div class="figure align-center" id="id215">
<span id="fig9-2-55"></span><a class="reference internal image-reference" href="_images/fig55.png"><img alt="_images/fig55.png" src="_images/fig55.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-number">Fig. 341 </span><span class="caption-text">NEWT copyright banner page and case title.</span><a class="headerlink" href="#id215" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="input-summary">
<span id="id124"></span><h3>Input summary<a class="headerlink" href="#input-summary" title="Permalink to this headline">¶</a></h3>
<p>The next several pages of output provide a summary of input parameters.
As described in <a class="reference internal" href="#id122"><span class="std std-ref">Description of Output</span></a>, default parameters are used when no user
specification is supplied. The input summary lists all parameters and
states used in the calculation, whether user supplied or default. The
following subsections describe the various blocks of output information
provided in the input summary.</p>
<div class="section" id="id125">
<span id="id126"></span><h4>Control options<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h4>
<p>The Control Options block lists global control parameters that determine
the type of analysis being performed. A sample Control Options page is
shown in <a class="reference internal" href="#fig9-2-56"><span class="std std-numref">Fig. 342</span></a>. Parameters are self-explanatory. More
information is available in the description of the keywords in
<a class="reference internal" href="#id124"><span class="std std-ref">Input summary</span></a>.</p>
<div class="figure align-center" id="id216">
<span id="fig9-2-56"></span><a class="reference internal image-reference" href="_images/fig56.svg"><img alt="_images/fig56.svg" src="_images/fig56.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 342 </span><span class="caption-text">Control Options page.</span><a class="headerlink" href="#id216" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="output-options">
<span id="id127"></span><h4>Output options<a class="headerlink" href="#output-options" title="Permalink to this headline">¶</a></h4>
<p>The Output Options block (<a class="reference internal" href="#fig9-2-57"><span class="std std-numref">Fig. 343</span></a>) lists selections made for
output. Portions of the output listing will be printed only if the
appropriate printing option was selected.</p>
<div class="figure align-center" id="id217">
<span id="fig9-2-57"></span><a class="reference internal image-reference" href="_images/fig57.svg"><img alt="_images/fig57.svg" src="_images/fig57.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 343 </span><span class="caption-text">Output Options page.</span><a class="headerlink" href="#id217" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="input-output-unit-assignments">
<span id="id128"></span><h4>Input/output unit assignments<a class="headerlink" href="#input-output-unit-assignments" title="Permalink to this headline">¶</a></h4>
<p>The Input/Output (I/O) Unit Assignments block (<a class="reference internal" href="#fig9-2-58"><span class="std std-numref">Fig. 344</span></a>) simply
lists the unit numbers selected for reading or writing various data
files, as appropriate for the calculation.</p>
<div class="figure align-center" id="id218">
<span id="fig9-2-58"></span><a class="reference internal image-reference" href="_images/fig58.svg"><img alt="_images/fig58.svg" src="_images/fig58.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 344 </span><span class="caption-text">Input/Output Unit Assignments page.</span><a class="headerlink" href="#id218" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="convergence-control-parameters">
<span id="id129"></span><h4>Convergence control parameters<a class="headerlink" href="#convergence-control-parameters" title="Permalink to this headline">¶</a></h4>
<p>The Convergence Control block (<a class="reference internal" href="#fig9-2-59"><span class="std std-numref">Fig. 345</span></a>) summarizes all parameters
used to control spatial, angular, and eigenvalue convergence for the
iterative phases of the solution process.</p>
<div class="figure align-center" id="id219">
<span id="fig9-2-59"></span><a class="reference internal image-reference" href="_images/fig59.svg"><img alt="_images/fig59.svg" src="_images/fig59.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 345 </span><span class="caption-text">Convergence Control Parameters page.</span><a class="headerlink" href="#id219" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="pin-power-edit-requests">
<span id="id130"></span><h4>Pin-power edit requests<a class="headerlink" href="#pin-power-edit-requests" title="Permalink to this headline">¶</a></h4>
<p>If pin-power edits are requested for one or more arrays, a listing is
provided of the arrays for which this request was made (<a class="reference internal" href="#fig9-2-60"><span class="std std-numref">Fig. 346</span></a>).</p>
<div class="figure align-center" id="id220">
<span id="fig9-2-60"></span><a class="reference internal image-reference" href="_images/fig60.svg"><img alt="_images/fig60.svg" src="_images/fig60.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 346 </span><span class="caption-text">Pin-power edit request summary.</span><a class="headerlink" href="#id220" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="geometry-specifications">
<span id="id131"></span><h4>Geometry specifications<a class="headerlink" href="#geometry-specifications" title="Permalink to this headline">¶</a></h4>
<p>The Geometry Specifications block (<a class="reference internal" href="#fig9-2-61"><span class="std std-numref">Fig. 347</span></a>) lists parameters
associated with the geometric model specified by the user. The first
section lists the characteristics of the global unit. This is followed
by a listing of the four boundary conditions. Finally, the last section
in this block lists all bodies specified for the model. The appearance
and contents of this section of input depend on the nature of the input
model.</p>
<div class="figure align-center" id="id221">
<span id="fig9-2-61"></span><a class="reference internal image-reference" href="_images/fig61.svg"><img alt="_images/fig61.svg" src="_images/fig61.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 347 </span><span class="caption-text">Geometry Specifications page.</span><a class="headerlink" href="#id221" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="homogenization-region-specifications">
<span id="id132"></span><h4>Homogenization region specifications<a class="headerlink" href="#homogenization-region-specifications" title="Permalink to this headline">¶</a></h4>
<p>The Homogenization Region Specifications block (<a class="reference internal" href="#fig9-2-62"><span class="std std-numref">Fig. 348</span></a>)
summarizes all sets of homogenized cross sections requested in user
input.</p>
<div class="figure align-center" id="id222">
<span id="fig9-2-62"></span><a class="reference internal image-reference" href="_images/fig62.svg"><img alt="_images/fig62.svg" src="_images/fig62.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 348 </span><span class="caption-text">Homogenization Region Specifications page.</span><a class="headerlink" href="#id222" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="material-specifications">
<span id="id133"></span><h4>Material specifications<a class="headerlink" href="#material-specifications" title="Permalink to this headline">¶</a></h4>
<p>The Material Specification block (<a class="reference internal" href="#fig9-2-63"><span class="std std-numref">Fig. 349</span></a>) lists the NEWT material
number, counting in the order read in; the SCALE mixture number; and the
P<sub>n</sub> order assigned for that mixture.</p>
<div class="figure align-center" id="id223">
<span id="fig9-2-63"></span><a class="reference internal image-reference" href="_images/fig63.svg"><img alt="_images/fig63.svg" src="_images/fig63.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 349 </span><span class="caption-text">Material Specifications page.</span><a class="headerlink" href="#id223" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="derived-parameters">
<span id="id134"></span><h4>Derived parameters<a class="headerlink" href="#derived-parameters" title="Permalink to this headline">¶</a></h4>
<p>The Derived Parameters block (<a class="reference internal" href="#fig9-2-64"><span class="std std-numref">Fig. 350</span></a>) lists values not
specifically input but derived from other sources of input. Some of this
information comes from the cross section library, some from the model
geometry, and some from the S<sub>n</sub> and P<sub>n</sub> values
specified.</p>
<div class="figure align-center" id="id224">
<span id="fig9-2-64"></span><a class="reference internal image-reference" href="_images/fig64.svg"><img alt="_images/fig64.svg" src="_images/fig64.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 350 </span><span class="caption-text">Derived Parameters page.</span><a class="headerlink" href="#id224" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="energy-group-structure-listing">
<span id="id135"></span><h4>Energy group structure listing<a class="headerlink" href="#energy-group-structure-listing" title="Permalink to this headline">¶</a></h4>
<p>The Energy Group Structures block (<a class="reference internal" href="#fig9-2-65"><span class="std std-numref">Fig. 351</span></a>) lists the energy and
lethargy boundaries found in the cross section library. If a broad-group
collapse was requested, the boundaries of the broad-group library that
will be produced are also identified. This example shows the structure
of the SCALE 44GROUPNDF5 library and 2-group fast/thermal collapse
structure. The final entry (group 45, broad group 3) indicates the lower
bound of the previous energy group.</p>
<div class="figure align-center" id="id225">
<span id="fig9-2-65"></span><a class="reference internal image-reference" href="_images/fig65.svg"><img alt="_images/fig65.svg" src="_images/fig65.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 351 </span><span class="caption-text">Energy Group Structure Listing page.</span><a class="headerlink" href="#id225" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="quadrature-parameters">
<span id="id136"></span><h4>Quadrature parameters<a class="headerlink" href="#quadrature-parameters" title="Permalink to this headline">¶</a></h4>
<p>The Quadrature Parameters block (<a class="reference internal" href="#fig9-2-66"><span class="std std-numref">Fig. 352</span></a>) lists the first-quadrant
angles and weights used for the specified order of quadrature. The same
angles and weights are applied in the other three quadrants; however,
the signs of the angles vary with the quadrant. Also listed are the
P<sub>n</sub> moments associated with the maximum P<sub>n</sub> scattering
order requested in all materials. Of course, only a subset of these
moments applies to the lower-order P<sub>n</sub> assignments.</p>
<div class="figure align-center" id="id226">
<span id="fig9-2-66"></span><a class="reference internal image-reference" href="_images/fig66.svg"><img alt="_images/fig66.svg" src="_images/fig66.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 352 </span><span class="caption-text">Quadrature Parameters page.</span><a class="headerlink" href="#id226" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="mixture-volumes-listing">
<span id="id137"></span><h4>Mixture volumes listing<a class="headerlink" href="#mixture-volumes-listing" title="Permalink to this headline">¶</a></h4>
<p>The Mixture Volumes block (<a class="reference internal" href="#fig9-2-67"><span class="std std-numref">Fig. 353</span></a>) provides a summary of the
volume and volume fraction of each mixture in the problem, together with
the total volume. This block can be used as a simple check of the input
model by ensuring that the calculated volumes of mixtures used for a
given problem match the expected volumes or volume fractions.</p>
<div class="figure align-center" id="id227">
<span id="fig9-2-67"></span><a class="reference internal image-reference" href="_images/fig67.svg"><img alt="_images/fig67.svg" src="_images/fig67.svg" width="500" /></a>
<p class="caption"><span class="caption-number">Fig. 353 </span><span class="caption-text">Mixture Volumes page.</span><a class="headerlink" href="#id227" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="mixing-table-listing">
<span id="id138"></span><h4>Mixing table listing<a class="headerlink" href="#mixing-table-listing" title="Permalink to this headline">¶</a></h4>
<p>The Mixing Table block summarizes the input mixing table, whether user
supplied or read from a SCALE-generated file. Number densities are in
units of atoms per barn-centimeter. Although optional, the mixing table
is printed by default. This default setting can be disabled by
specifying <em>prtmxtab</em>=no in the Parameter block. A sample mixing table
is shown in <a class="reference internal" href="#fig9-2-68"><span class="std std-numref">Fig. 354</span></a>.</p>
<div class="figure align-center" id="id228">
<span id="fig9-2-68"></span><a class="reference internal image-reference" href="_images/fig68.svg"><img alt="_images/fig68.svg" src="_images/fig68.svg" width="500" /></a>
<p class="caption"><span class="caption-number">Fig. 354 </span><span class="caption-text">Mixing Table Listing page.</span><a class="headerlink" href="#id228" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="nuclide-cross-sections">
<span id="id139"></span><h4>Nuclide cross sections<a class="headerlink" href="#nuclide-cross-sections" title="Permalink to this headline">¶</a></h4>
<p>The Nuclide Cross Section block is optional and is printed only when
<em>prtxsec</em>=yes is specified in the Parameter Block. The volume of
output generated is quite extensive, especially when a very fine group
library is used and/or a large number of nuclides are included in the
mixing table. The nuclide data are taken directly from the working
library used for the calculation. A sample showing a partial listing for
a single nuclide is shown in <a class="reference internal" href="#fig9-2-69"><span class="std std-numref">Fig. 355</span></a>.</p>
<p>Following the block header, nuclide data are listed for all nuclides.
For each record, the same format is used. Nuclide data begin with a
listing of nuclide header information. This is followed by a listing of
the 1-D cross sections that are important in NEWT calculations. The
sample below shows a partial listing of the 1-D cross sections.
Following the 1-D cross section listing is the scattering matrix for the
nuclide. This abbreviated listing shows a portion of the
P<sub>0</sub> matrix for this nuclide; however, in a full listing, all
higher-order elements are printed as well.</p>
<p>As was indicated in the input description, specification of
<em>prtxsec</em>=1d can be used to obtain header and 1‑D cross section data
only, skipping the printing of scattering matrices.</p>
<div class="figure align-center" id="id229">
<span id="fig9-2-69"></span><a class="reference internal image-reference" href="_images/fig69.svg"><img alt="_images/fig69.svg" src="_images/fig69.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 355 </span><span class="caption-text">Partial listing of Nuclide Cross section data pages.</span><a class="headerlink" href="#id229" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="mixture-cross-sections">
<span id="id140"></span><h4>Mixture cross sections<a class="headerlink" href="#mixture-cross-sections" title="Permalink to this headline">¶</a></h4>
<p>The Mixture Cross Section block provides mixed macroscopic
cross sections for each mixture provided in the input mixing table. The
block is also optional and is printed only when <em>prtmxsec</em>=yes is
specified in the Parameter Block. Although the volume of output
generated is not as extensive as that of the nuclide listings, the
mixture cross section print can be voluminous, especially when a very
fine group library is used and/or a large number of mixtures are
included in the mixing table. A sample showing a partial listing for a
single mixture is shown in <a class="reference internal" href="#fig9-2-70"><span class="std std-numref">Fig. 356</span></a>.</p>
<p>Following the block header, information is provided for each mixture
using the same format. Mixture data begin with a listing of general
mixture information, including the mixing table for that mixture. This
is followed by a listing of 1-D cross sections important in NEWT
calculations. The sample below shows a partial listing of the 1-D mixed
macroscopic cross sections. Following the 1-D cross section listing is
the scattering matrix for the nuclide for all moments requested for the
mixture. This abbreviated listing shows a portion of the
P<sub>0</sub> matrix for this nuclide; however, in a full listing, all
higher-order elements are printed as well if greater than
P<sub>0</sub> scattering was requested.</p>
<p>As was indicated in the input description, specification of
<em>prtmxsec</em>=1d can be used to skip the printing of scattering matrices.</p>
<div class="figure align-center" id="id230">
<span id="fig9-2-70"></span><a class="reference internal image-reference" href="_images/fig70.svg"><img alt="_images/fig70.svg" src="_images/fig70.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 356 </span><span class="caption-text">Partial listing of Mixture Cross section data pages.</span><a class="headerlink" href="#id230" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="iteration-history">
<span id="id141"></span><h3>Iteration history<a class="headerlink" href="#iteration-history" title="Permalink to this headline">¶</a></h3>
<p>The next portion of NEWT output lists the iteration convergence
history for the iterative solution
(<a class="reference internal" href="#fig9-2-71"><span class="std std-numref">Fig. 357</span></a>). This information can be used to track and understand
the performance of the outer loop of the iterative solution. The first
column provides the outer iteration count. The second column lists the
system eigenvalue after each outer iteration. The third column lists
the change in the eigenvalue from the last outer iteration; this is
one of the parameters tested for convergence. The fourth column, “Max
Flux Delta,” gives the maximum change in cell flux for all cells and
all energy groups; this is also used as a convergence test. The next
column lists the cell number and energy group corresponding to the
maximum flux change in this iteration. The next two columns list the
same flux information for mixtures with fissionable nuclides. This can
be used to track spatial convergence in fuel when convergence is
slowed by significant scattering outside the fuel. Finally, the last
column provides information on the convergence of inners in each outer
iteration. Inner iterations do not need to converge within early outer
iterations, but final convergence will not be achieved until all
inners are converged. The maximum number of inner iterations per
energy group is set by the <em>inners=</em> parameter in the parameter input
block. After convergence is achieved, the table is terminated by
printing the final version of <em>k</em><sub>eff</sub>.</p>
<p>If the parameter keyword <em>timed=</em> is set to <em>yes</em>, four additional
columns are introduced that give timing information on the solution
process, listing real (“wall clock”) time, elapsed CPU time since
beginning the iteration process, elapsed CPU time per outer iteration,
and an estimate of the fractional CPU usage during each outer.
<a class="reference internal" href="#fig9-2-72"><span class="std std-numref">Fig. 358</span></a> illustrates the form of output produced when <em>timed=yes</em>
is input. Additionally, a supplementary edit follows the iteration edit
when <em>timed=yes</em>, giving information on average time per transport sweep
(outer iteration) within different components of the solution. This edit
is especially useful when coarse-mesh finite-difference acceleration is
used, to assess the overhead of the CMFD accelerator.</p>
<div class="figure align-center" id="id231">
<span id="fig9-2-71"></span><a class="reference internal image-reference" href="_images/fig71.svg"><img alt="_images/fig71.svg" src="_images/fig71.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 357 </span><span class="caption-text">Nominal iteration history output.</span><a class="headerlink" href="#id231" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id232">
<span id="fig9-2-72"></span><a class="reference internal image-reference" href="_images/fig72.svg"><img alt="_images/fig72.svg" src="_images/fig72.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 358 </span><span class="caption-text">Timed iteration history output.</span><a class="headerlink" href="#id232" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="four-factor-formula">
<span id="id142"></span><h3>Four-factor formula<a class="headerlink" href="#four-factor-formula" title="Permalink to this headline">¶</a></h3>
<p>Following the iteration history listing, NEWT output provides edit
listing the four traditional components of the four-factor formula. This
is followed by an alternate three-group formulation that separates out
resonance and fast escape probabilities (<a class="reference internal" href="#fig9-2-73"><span class="std std-numref">Fig. 359</span></a>).</p>
<div class="figure align-center" id="id233">
<span id="fig9-2-73"></span><a class="reference internal image-reference" href="_images/fig73.svg"><img alt="_images/fig73.svg" src="_images/fig73.svg" width="500" /></a>
<p class="caption"><span class="caption-number">Fig. 359 </span><span class="caption-text">Four-factor formula with alternate three-group formulation.</span><a class="headerlink" href="#id233" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="fine-group-balance-tables">
<span id="id143"></span><h3>Fine-group balance tables<a class="headerlink" href="#fine-group-balance-tables" title="Permalink to this headline">¶</a></h3>
<p>Following the iteration history and flux convergence, a fine-group
balance table is provided for each mixture used in the calculation. Fine
group refers to the group structure of the library used for the
calculation. Broad-group data, discussed later, refer to a group
structure collapsed from the original fine-group structure. After tables
for all mixtures are printed, a last table provides a fine-group summary
for the entire problem (i.e., the volume-weighted average for all
mixtures). Balance tables are printed by default but may be disabled by
setting <em>prtbalnc=no</em> in the Parameter block.</p>
<p><a class="reference internal" href="#fig9-2-74"><span class="std std-numref">Fig. 360</span></a> shows a clipped excerpt from the fine-group summary of an
output listing. Similar tables are produced for each mixture in the
problem for all energy groups in the problem. The header lists the NEWT
mixture number; the mixture ID (i.e., the SCALE mixture number); and the
mixture description, if provided in the original input specification.
The header also gives the number of computational cells in which the
mixture was present and the volume of the mixture in the problem.</p>
<p>For each mixture, two tables are printed. The first table provides a
balance of all sources and loss terms: the fixed source, the fission
source, in-scatter, out-scatter, absorption, leakage, n-2n production,
and the net balance of all terms for each energy group. The final row
lists the mixture total for all groups. The fixed source lists the
user-supplied source for fixed-source problems. This field is disabled
(set to zero) for eigenvalue calculations. The fission source is the
number of neutrons born into each energy group in the mixture. In this
example, the mixture is water, which is not fissile; hence, no fission
source is present. In‑scatter represents the number of neutrons
scattered into each group from all other groups; conversely, out‑scatter
is the loss from each energy group by scattering. Absorption is the
number of neutrons absorbed in reactions that do not emit a neutron
(e.g., n-γ). Leakage is the net loss of neutrons from the mixture to
another mixture or a nonreflective boundary, and n-2n is the effective
n-2n production rate calculated from a weighted sum of all n-<em>x</em>n
reactions. The balance table is the ratio of production to loss in each
energy group.</p>
<p>The second fine-group balance table, also shown in Figure 9.2.74, lists
other reactions rates of interest. The first two columns after the group
number list in-scatter broken into its upscatter and downscatter
components. The subsequent two columns provide a similar breakdown for
out-scatter from the energy group. Self-scatter is the amount of
within-group scattering occurring within each energy group. The fission
rate is the number of (n-fission) reactions occurring in each group. The
next column provides the transverse leakage (i.e., the product of the
flux and the DB<sup>2</sup> term). This column will provide only nonzero
values when a nonzero buckling height is specified in input. The final
column lists the total (scalar) flux for each energy group.</p>
<div class="figure align-center" id="id234">
<span id="fig9-2-74"></span><a class="reference internal image-reference" href="_images/fig74.svg"><img alt="_images/fig74.svg" src="_images/fig74.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 360 </span><span class="caption-text">Partial mixture fine-group balance table output.</span><a class="headerlink" href="#id234" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="planar-fluxes-and-currents">
<span id="id144"></span><h3>Planar fluxes and currents<a class="headerlink" href="#planar-fluxes-and-currents" title="Permalink to this headline">¶</a></h3>
<p>If planar fluxes are requested, an edit is printed to provide fluxes and
currents on each line segment specified, identified by label
(<a class="reference internal" href="#fig9-2-75"><span class="std std-numref">Fig. 361</span></a>). Fine-group fluxes are listed for each energy group,
followed by x and y net currents and partial currents (+x, –x, +y, and
–y). Fluxes and currents are printed for each group in the input group
structure. The example below shows only partial listings of each for
simplicity. If a broad-group collapse is requested, the fine-group
output is followed by the set of fluxes and currents for each broad
energy group.</p>
<p>Note that discontinuity factors make internal use of planar fluxes to
determine the flux and current on each boundary. Hence, planar flux
edits will be present any time an ADF calculation is performed.</p>
<div class="figure align-center" id="id235">
<span id="fig9-2-75"></span><a class="reference internal image-reference" href="_images/fig75.svg"><img alt="_images/fig75.svg" src="_images/fig75.svg" width="600" /></a>
<p class="caption"><span class="caption-number">Fig. 361 </span><span class="caption-text">Example of planar flux and current output (continued below).</span><a class="headerlink" href="#id235" title="Permalink to this image">¶</a></p>
</div>
<a class="reference internal image-reference" href="_images/fig75-2.svg"><img alt="_images/fig75-2.svg" class="align-center" src="_images/fig75-2.svg" width="600" /></a>
</div>
<div class="section" id="id145">
<span id="id146"></span><h3>Pin-power edits<a class="headerlink" href="#id145" title="Permalink to this headline">¶</a></h3>
<p>The next section of the NEWT output listing is the pin-power edit
(<a class="reference internal" href="#fig9-2-76"><span class="std std-numref">Fig. 362</span></a>). This information is printed only if <em>pinpow=yes</em> is set
in one or more arrays. Two maps are provided. The first is the power of
each fuel location relative to all other fuel pins in all other arrays
for which <em>pinpow=yes</em>. This is useful if multiple fuel assemblies are
present or if more than one array is used to describe a fuel assembly.
The second power map shows the pin edit normalized to the set of pins
within the single array. Both maps are identical in a relative sense;
different normalization factors are applied. If <em>pinpow=yes</em> is
specified for only one array, then the two edits will have the same
normalization factor and will be identical. The location of each pin is
identified by the (x,y) coordinate of the center of each element of the
array, in centimeters. Please note that the pin-power option is
available only for square (cuboidal) arrays.</p>
<p>Following the two maps is a one-line edit identifying the location and
magnitude of the maximum pin power.</p>
<div class="figure align-center" id="id236">
<span id="fig9-2-76"></span><a class="reference internal image-reference" href="_images/fig76.svg"><img alt="_images/fig76.svg" src="_images/fig76.svg" width="800" /></a>
<p class="caption"><span class="caption-number">Fig. 362 </span><span class="caption-text">Example of pin-power edit.</span><a class="headerlink" href="#id236" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="broad-group-collapse">
<span id="id147"></span><h3>Broad-group collapse<a class="headerlink" href="#broad-group-collapse" title="Permalink to this headline">¶</a></h3>
<div class="section" id="broad-group-summary-data">
<span id="id148"></span><h4>Broad-group summary data<a class="headerlink" href="#broad-group-summary-data" title="Permalink to this headline">¶</a></h4>
<p>The next section of the NEWT output listing is the broad-group summary
listing (<a class="reference internal" href="#fig9-2-77"><span class="std std-numref">Fig. 363</span></a>). This is printed only if a broad-group collapse
is performed. This section lists broad-group data calculated based on
the collapsing scheme applied. First, the energy group structure is
printed, followed by cell-averaged fluxes in each mixture, for all
collapsed groups. This is followed by flux disadvantage factors for each
mixture and each broad group.</p>
<p>Note that when NEWT is used as the transport solver within TRITON
depletion calculations, a three-group collapse is always done
automatically. If a second user-specified collapse is requested,
broad-group summary data will be provided for both collapsing
structures.</p>
<div class="figure align-center" id="id237">
<span id="fig9-2-77"></span><a class="reference internal image-reference" href="_images/fig77.svg"><img alt="_images/fig77.svg" src="_images/fig77.svg" width="800" /></a>
<p class="caption"><span class="caption-number">Fig. 363 </span><span class="caption-text">Broad-group summary output.</span><a class="headerlink" href="#id237" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="broad-group-cross-section-data">
<span id="id149"></span><h4>Broad-group cross section data<a class="headerlink" href="#broad-group-cross-section-data" title="Permalink to this headline">¶</a></h4>
<p>The next section of data in a NEWT output listing is the broad-group
cross section output
(<a class="reference internal" href="#fig9-2-78"><span class="std std-numref">Fig. 364</span></a>). This is printed only if a broad-group collapse is
performed and if <em>prtbroad=yes</em> is specified in Parameter block input.
This block lists the collapsed cross section data for key reactions
for each nuclide used in the calculation. This is a summary form of
the data that are written to the collapsed cross section library. It
does not list all reactions. Such data may be read directly from the
working-format library by other SCALE utilities if needed. The listing
below shows the data printed for a single nuclide. Data are written in
the same format for all nuclides used in the analysis.</p>
<div class="figure align-center" id="id238">
<span id="fig9-2-78"></span><a class="reference internal image-reference" href="_images/fig78.svg"><img alt="_images/fig78.svg" src="_images/fig78.svg" width="800" /></a>
<p class="caption"><span class="caption-number">Fig. 364 </span><span class="caption-text">Partial broad-group cross section listing.</span><a class="headerlink" href="#id238" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="critical-spectrum-edit">
<span id="id150"></span><h3>Critical spectrum edit<a class="headerlink" href="#critical-spectrum-edit" title="Permalink to this headline">¶</a></h3>
<p>When a critical buckling correction is requested (e.g., <em>solntype=b1</em> is
set in the NEWT parameter block or user-defined material buckling or
transverse height), the critical spectrum is computed using either the
B1 approximation or the P1 approximation (<a class="reference internal" href="#fig9-2-79"><span class="std std-numref">Fig. 365</span></a>). The output
lists the buckling in 1/cm<sup>2</sup>, the method (B1 or P1), and the
computed critical spectrum as a function of energy. Note that the
spectrum is normalized “per unit lethargy” to be equal to 1.0. In
addition to the critical spectrum, the critical adjoint spectrum and the
zero-buckling spectra (forward and adjoint) are also edited.</p>
<div class="figure align-center" id="id239">
<span id="fig9-2-79"></span><a class="reference internal image-reference" href="_images/fig79.svg"><img alt="_images/fig79.svg" src="_images/fig79.svg" width="800" /></a>
<p class="caption"><span class="caption-number">Fig. 365 </span><span class="caption-text">Partial collapsing spectra listing for a case with critical buckling correction.</span><a class="headerlink" href="#id239" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="id151">
<span id="id152"></span><h3>Assembly discontinuity factors<a class="headerlink" href="#id151" title="Permalink to this headline">¶</a></h3>
<p>When calculation of assembly discontinuity factors (ADFs) is requested,
a broad-group edit is provided for each face for which an ADF was
selected (<a class="reference internal" href="#fig9-2-80"><span class="std std-numref">Fig. 366</span></a>). Up to four ADFs may be printed for the fuel
region. If the model contains a reflector region in addition to the
required fuel region, then ADFs are printed for a single face, typically
the fuel/moderator interface. Discontinuity factors for user-input
surfaces may also be edited.</p>
<div class="figure align-center" id="id240">
<span id="fig9-2-80"></span><a class="reference internal image-reference" href="_images/fig80.svg"><img alt="_images/fig80.svg" src="_images/fig80.svg" width="400" /></a>
<p class="caption"><span class="caption-number">Fig. 366 </span><span class="caption-text">Output of assembly discontinuity factors.</span><a class="headerlink" href="#id240" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="groupwise-form-factors">
<span id="id153"></span><h3>Groupwise form factors<a class="headerlink" href="#groupwise-form-factors" title="Permalink to this headline">¶</a></h3>
<p>Whenever homogenization is performed and pin-power edits are requested,
NEWT will automatically calculate groupwise form factors (GFFs). GFFs
are used in pin-power reconstruction calculations for homogenized
assemblies used in nodal diffusion methods (<a class="reference internal" href="#fig9-2-81"><span class="std std-numref">Fig. 367</span></a>).</p>
<div class="figure align-center" id="id241">
<span id="fig9-2-81"></span><a class="reference internal image-reference" href="_images/fig81.svg"><img alt="_images/fig81.svg" src="_images/fig81.svg" width="800" /></a>
<p class="caption"><span class="caption-number">Fig. 367 </span><span class="caption-text">Partial collapsing spectra listing for a case with no critical buckling correction.</span><a class="headerlink" href="#id241" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="homogenized-cross-sections">
<span id="id154"></span><h4>Homogenized cross sections<a class="headerlink" href="#homogenized-cross-sections" title="Permalink to this headline">¶</a></h4>
<p>When homogenization is performed and parameter <em>prthmmix=yes</em> is set,
the final output section of a NEWT calculation is the homogenized cross
section edit, as shown in <a class="reference internal" href="#fig9-2-82"><span class="std std-numref">Fig. 368</span></a>. This information is generally
passed to nodal analysis codes and hence is presented in a slightly
different format from other cross sections. Output includes a
region-averaged k-infinity value, transport-corrected cross section, and
two interpretations of absorption. The first is the directly collapsed
absorption cross section, while the second (Total-Scatter) is a more
consistent definition of absorption as applied in nodal calculations.
The difference between the two definitions is the effective (n-2n)
cross section. Both cross sections exclude contributions from
<sup>135</sup>Xe and <sup>149</sup>Sm; microscopic cross sections and number
densities for these two nuclides are printed explicitly elsewhere in the
table. Nu*fission is the product of the fission cross section and the
number of neutrons produced per fission, while Kappa*fission is the
product of the fission cross section and the energy release per fission
(J). Inverse velocity is the inverse (1/x) of the group neutron speed.</p>
<p>The table also lists the two-group isotropic scattering matrix and the
prompt fission fraction distribution. Finally, NEWT lists approximate
six-group decay constants (lambdas) and group fractions (betas) for each
group.</p>
<div class="figure align-center" id="id242">
<span id="fig9-2-82"></span><a class="reference internal image-reference" href="_images/fig82.svg"><img alt="_images/fig82.svg" src="_images/fig82.svg" width="1000" /></a>
<p class="caption"><span class="caption-number">Fig. 368 </span><span class="caption-text">Homogenized cross section edit for nodal diffusion applications.</span><a class="headerlink" href="#id242" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="end-of-calculation-banner">
<span id="id155"></span><h3>End-of-calculation banner<a class="headerlink" href="#end-of-calculation-banner" title="Permalink to this headline">¶</a></h3>
<p>NEWT output listings are terminated with an end-of-calculation banner
(shown in <a class="reference internal" href="#fig9-2-83"><span class="std std-numref">Fig. 369</span></a>) upon successful completion of a calculation. If
this banner is not present, then the calculation ended abnormally, and
the output listing must be reviewed to determine the cause of the error.
In general, the final lines of an output file describe the error
condition that caused the calculation to stop.</p>
<div class="figure align-center" id="id243">
<span id="fig9-2-83"></span><a class="reference internal image-reference" href="_images/fig83.svg"><img alt="_images/fig83.svg" src="_images/fig83.svg" width="800" /></a>
<p class="caption"><span class="caption-number">Fig. 369 </span><span class="caption-text">End-of-calculation banner listing.</span><a class="headerlink" href="#id243" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="postscript-graphics-files">
<span id="id156"></span><h4>Postscript graphics files<a class="headerlink" href="#postscript-graphics-files" title="Permalink to this headline">¶</a></h4>
<p>Two user-selectable options within NEWT provide the ability to generate
PostScript-based graphics files for visualization of both input
specifications and output results. By specification of <em>drawit=yes</em> in
the NEWT parameter block, NEWT will generate two PostScript-based plot
files: <code class="file docutils literal notranslate"><span class="pre">newtgrid.ps</span></code> and <code class="file docutils literal notranslate"><span class="pre">newtmatl.ps</span></code>. The former, a grayscale plot of the
line segments generated by NEWT based on the input specification, will
be generated if all body placement input is valid. If input contains
errors such that the code stops before grid generation routines are
completed, no <code class="file docutils literal notranslate"><span class="pre">newtgrid.ps</span></code> output is created.</p>
<p>The <code class="file docutils literal notranslate"><span class="pre">newtmatl.ps</span></code> plot illustrates the same grid structure but with
material placement indicated by color. At this time, no user control is
provided for color assignment or plot control. This plot also requires
complete grid generation; additionally, it requires completion of all
media placement routines before the plot will be produced.</p>
<p>Figures used throughout this manual were generated from newtgrid and
newtmatl PostScript plot files. Files <code class="file docutils literal notranslate"><span class="pre">newtgrid.ps</span></code> and <code class="file docutils literal notranslate"><span class="pre">newtmatl.ps</span></code> are
automatically copied back from SCALE’s temporary directory to the
original location of the input case, with the names
<em>casename</em>.newtgrid.ps and <em>casename</em>.newtmatl.ps.</p>
<p>When <em>prtflux=yes</em> is input, NEWT will generate a set of flux plots
showing relative neutron number densities in each energy group. A plot
file will be generated with the name fluxplot_<em>N</em>g.ps, where <em>N</em> is
the number of energy groups in the problem. If an energy collapse is
performed, an additional file named fluxplot_<em>M</em>g.ps is created,
where M is the number of energy groups in the collapsed set.
<a class="reference internal" href="#fig9-2-84"><span class="std std-numref">Fig. 370</span></a> is an example of a flux plot output for the fast group of
a two-group flux collapse.</p>
<div class="figure align-center" id="id244">
<span id="fig9-2-84"></span><a class="reference internal image-reference" href="_images/fig841.png"><img alt="_images/fig841.png" src="_images/fig841.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 370 </span><span class="caption-text">Example of a flux plot image created with prtflux=yes.</span><a class="headerlink" href="#id244" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="media-zone-edits">
<span id="id157"></span><h3>Media zone edits<a class="headerlink" href="#media-zone-edits" title="Permalink to this headline">¶</a></h3>
<p>NEWT automatically determines “zones” representing spatially independent
regions of the same media. For example, in a fuel pin cell, the fuel,
clad, and moderator are all considered separate zones. In an array of
such pin cells, each unique location is a unique zone. Zone numbers and
the geometric location of each zone are listed in the <em>Geometry
Specification</em>” in <a class="reference internal" href="#id131"><span class="std std-ref">Geometry specifications</span></a>.</p>
<p>Upon completion of a calculation, NEWT provides an output edit of each
zone by number, giving the mixture number, average flux, fission power,
and volume, as shown in <a class="reference internal" href="#fig9-2-85"><span class="std std-numref">Fig. 371</span></a>.</p>
<div class="figure align-center" id="id245">
<span id="fig9-2-85"></span><a class="reference internal image-reference" href="_images/fig85.svg"><img alt="_images/fig85.svg" src="_images/fig85.svg" width="500" /></a>
<p class="caption"><span class="caption-number">Fig. 371 </span><span class="caption-text">Media zone output edit.</span><a class="headerlink" href="#id245" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h3>
<dl class="footnote brackets">
<dt class="label" id="id158"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>Formerly with Oak Ridge National Laboratory.</p>
</dd>
</dl>
<p id="bibtex-bibliography-NEWT-0"><dl class="citation">
<dt class="bibtex label" id="alcouffe-review-1981"><span class="brackets">AL81</span><span class="fn-backref">(<a href="#id17">1</a>,<a href="#id22">2</a>)</span></dt>
<dd><p>R. E. Alcouffe and E. W. Larsen. Review of characteristic methods used to solve the linear transport equation. Technical Report, Los Alamos Scientific Lab., NM (USA), 1981.</p>
</dd>
<dt class="bibtex label" id="alcouffe-computational-1979"><span class="brackets"><a class="fn-backref" href="#id19">ALMJW79</a></span></dt>
<dd><p>R. E. Alcouffe, E. W. Larsen, W. F. Miller Jr, and B. R. Wienke. Computational efficiency of numerical methods for the multigroup, discrete-ordinates neutron transport equations: the slab geometry case. <em>Nuclear Science and Engineering</em>, 71(2):111–127, 1979. Publisher: Taylor &amp; Francis.</p>
</dd>
<dt class="bibtex label" id="carlson-discrete-1965"><span class="brackets"><a class="fn-backref" href="#id31">CL65</a></span></dt>
<dd><p>B. G. Carlson and K. D. Lathrop. Discrete ordinates angular quadrature of the neutron transport equation. <em>LA-3186, Los Alamos National Laboratory</em>, 1965.</p>
</dd>
<dt class="bibtex label" id="carlson-transport-1970"><span class="brackets"><a class="fn-backref" href="#id30">Car70</a></span></dt>
<dd><p>Bengt G. Carlson. TRANSPORT THEORY: DISCRETE ORDINATES QUADRATURE OVER THE UNIT SPHERE. Technical Report, Los Alamos Scientific Lab., N. Mex., 1970.</p>
</dd>
<dt class="bibtex label" id="dehart-discrete-1992"><span class="brackets">Deh92</span><span class="fn-backref">(<a href="#id4">1</a>,<a href="#id5">2</a>,<a href="#id24">3</a>)</span></dt>
<dd><p>Mark David Dehart. A discrete ordinates approximation to the neutron transport equation applied to generalized geometries. Technical Report, Westinghouse Savannah River Co., Aiken, SC (United States), 1992.</p>
</dd>
<dt class="bibtex label" id="duderstadt-nuclear-nodate"><span class="brackets"><a class="fn-backref" href="#id12">DH76</a></span></dt>
<dd><p>J. J. Duderstadt and L. J. Hamilton. <em>Nuclear Reactor Analysis</em>. John Wiley &amp; Sons, 1976.</p>
</dd>
<dt class="bibtex label" id="engle-jr-users-1967"><span class="brackets"><a class="fn-backref" href="#id34">EJ67</a></span></dt>
<dd><p>Ward W. Engle Jr. A USERS MANUAL FOR ANISN: A ONE DIMENSIONAL DISCRETE ORDINATES TRANSPORT CODE WITH ANISOTROPIC SCATTERING. Technical Report, Oak Ridge Gaseous Diffusion Plant, Tenn., 1967.</p>
</dd>
<dt class="bibtex label" id="hildebrand-advanced-1976"><span class="brackets">Hil76</span><span class="fn-backref">(<a href="#id14">1</a>,<a href="#id16">2</a>,<a href="#id61">3</a>)</span></dt>
<dd><p>F. B. Hildebrand. <em>Advanced Calculus for Applications</em>. Volume 511. Prentice-Hall, Inc., 1976.</p>
</dd>
<dt class="bibtex label" id="larsen-linear-1981"><span class="brackets"><a class="fn-backref" href="#id20">LA81</a></span></dt>
<dd><p>E. W. Larsen and R. E. Alcouffe. Linear characteristic method for spatially discretizing the discrete ordinates equations in (X, Y)-geometry. Technical Report, Los Alamos Scientific Lab., NM (USA), 1981.</p>
</dd>
<dt class="bibtex label" id="lathrop-spatial-1968"><span class="brackets"><a class="fn-backref" href="#id21">Lat68</a></span></dt>
<dd><p>K. D. Lathrop. Spatial differencing of the two-dimensional transport equation. <em>Report GA-8746, Gulf General Atomic</em>, 1968.</p>
</dd>
<dt class="bibtex label" id="lathrop-spatial-1969"><span class="brackets"><a class="fn-backref" href="#id18">Lat69</a></span></dt>
<dd><p>K. D. Lathrop. Spatial differencing of the transport equation: positivity vs. accuracy. <em>Journal of computational physics</em>, 4(4):475–498, 1969. Publisher: Elsevier.</p>
</dd>
<dt class="bibtex label" id="lathrop-twotran-ii-1973"><span class="brackets"><a class="fn-backref" href="#id33">LB73</a></span></dt>
<dd><p>K. D. Lathrop and F. W. Brinkley. TWOTRAN-II: An interfaced, exportable version of the TWOTRAN code for two-dimensional transport. Technical Report, Los Alamos Scientific Lab., N. Mex.(USA), 1973.</p>
</dd>
<dt class="bibtex label" id="lee-discrete-1962"><span class="brackets"><a class="fn-backref" href="#id32">Lee62</a></span></dt>
<dd><p>Clarence E. Lee. <em>The discrete Sn approximation to transport theory</em>. Volume 2595. Los Alamos Scientific Laboratory of the University of California, 1962.</p>
</dd>
<dt class="bibtex label" id="lewis-j-nodate"><span class="brackets"><a class="fn-backref" href="#id15">LM84</a></span></dt>
<dd><p>E. E. Lewis and W. F. Miller. <em>“Computational Methods of Neutron Transport”</em>. John Wiley &amp; Sons, Inc., New York, 1984.</p>
</dd>
<dt class="bibtex label" id="zhong-implementation-2008"><span class="brackets"><a class="fn-backref" href="#id37">ZDX+08</a></span></dt>
<dd><p>Zhaopeng Zhong, Thomas J. Downar, Yunlin Xu, Mark D. DeHart, and Kevin T. Clarno. Implementation of two-level coarse-mesh finite difference acceleration in an arbitrary geometry, two-dimensional discrete ordinates transport method. <em>Nuclear science and engineering</em>, 158(3):289–298, 2008. Publisher: Taylor &amp; Francis.</p>
</dd>
</dl>
</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Nuclear%20Data%20Libraries%20Overview.html" class="btn btn-neutral float-right" title="SCALE Nuclear Data Libraries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="XSDAppAB.html" class="btn btn-neutral float-left" title="XSDRNPM Appendices A and B" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, SCALE developers

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>