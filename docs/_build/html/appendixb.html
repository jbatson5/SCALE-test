

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MAVRIC Appendix B: MAVRIC Utilities &mdash; SCALE Manual 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MAVRIC Appendix C: Advanced Features" href="appendixc.html" />
    <link rel="prev" title="MAVRIC Appendix A: CAAS Capability" href="CAAScapability.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> SCALE Manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Reactor Physics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="TRITON.html">TRITON: A Multipurpose Transport, Depletion, And Sensitivity and Uncertainty Analysis Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="TRITONAppABC.html">TRITON Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="Polaris.html">POLARIS - 2D Light Water Reactor Lattice Physics Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="PolarisA.html">SCALE 6.2 Polaris Input Format</a></li>
</ul>
<p class="caption"><span class="caption-text">Depletion, Activation, and Spent Fuel Source Terms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Depletion%2C%20Activation%2C%20and%20Spent%20Fuel%20Source%20Terms%20Overview.html">Depletion, Activation, and Spent Fuel Source Terms Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN.html">Origen: Neutron Activation, Actinide Transmutation, Fission Product Generation, and Radiation Source Term Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html">Origen Data Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#energy-resource">Energy Resource</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#decay-resource-format">Decay Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#fission-yield-resource-format">Fission Yield Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#gamma-resource-format">Gamma Resource Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGEN-Data.html#origen-end7dec-nuclide-set">ORIGEN “end7dec” Nuclide Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="ORIGAMI.html">ORIGAMI: A Code for Computing Assembly Isotopics with ORIGEN</a></li>
<li class="toctree-l1"><a class="reference internal" href="SLIG.html">SCALE/Origen Library Generator (SLIG)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Origenutil.html">ORIGEN Utility Programs</a></li>
</ul>
<p class="caption"><span class="caption-text">Sensitivity and Uncertainty Analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Sensitivity%20and%20Uncertainty%20Analysis%20Overview.html">Snesitivity and Uncertainty Analysis Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-1d.html">TSUNAMI-1D:  Control Module for One-Dimensional Cross-Section Sensitivity and Uncertainty</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-1d-appA.html">XSDRNPM Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-3d.html">TSUNAMI-3D: Control Module for Three-Dimensional Cross Section Sensitivity and Uncertainty Analysis for Criticality</a></li>
<li class="toctree-l1"><a class="reference internal" href="sams.html">SAMS: Sensitivity Analysis Module for Scale</a></li>
<li class="toctree-l1"><a class="reference internal" href="sams-appA.html">Sensitivity Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsar.html">TSAR: Tool for Sensitivity Analysis of Reactivity Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-ip.html">TSUNAMI Utility Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsunami-ip-appAB.html">Data File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsurfer.html">TSURFER: An Adjustment Code to Determine Biases and Uncertainties in Nuclear System Responses by Consolidating Differential Data and Benchmark Integral Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsurfer-appA.html">TSURFER Appendix A: Sensitivity/Uncertainty Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sampler.html">Sampler: A Module for Statistical Uncertainty Analysis with Scale Sequences</a></li>
</ul>
<p class="caption"><span class="caption-text">Criticality Safety</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Criticality%20Safety%20Overview.html">Criticality Safety Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS5.html">CSAS5:  Control Module For Enhanced Criticality Safety Analysis Sequences With KENO V.a</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS5App.html">Additional Example Applications of CSAS5</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS6.html">CSAS6:  Control Module for Enhanced Criticality Safety Analysis with KENO-VI</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSAS6App.html">Additional Example Applications of CSAS6</a></li>
<li class="toctree-l1"><a class="reference internal" href="STARBUCS.html">STARBUCS: A Scale Control Module for Automated Criticality Safety Analyses Using Burnup Credit</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sourcerer.html">Sourcerer: Deterministic Starting Source for Criticality Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEVC.html">DEVC: Denovo EigenValue Calculation</a></li>
<li class="toctree-l1"><a class="reference internal" href="KMART.html">KMART5 and KMART6: Postprocessors for KENO V.A and KENO-VI</a></li>
<li class="toctree-l1"><a class="reference internal" href="K5C5.html">K5toK6 and C5toC6: Input File Conversion Programs for KENO and CSAS</a></li>
</ul>
<p class="caption"><span class="caption-text">Material Specification and Cross Section Processing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Material%20Specification%20and%20Cross%20Section%20Processing%20Overview.html">Material Specification and Cross Section Processing Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProc.html">XSPROC: The Material and Cross Section Processing Module for SCALE</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppA.html">XSProc: Standard Composition Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppB.html">XSProc Standard Composition Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSProcAppC.html">Examples of Complete XSProc Input Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="stdcmp.html">Standard Composition Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="BONAMI.html">BONAMI: Resonance Self-Shielding by the Bondarenko Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="CENTRM.html">CENTRM: A Neutron Transport Code for Computing Continuous-Energy Spectra in General One-Dimensional Geometries and Two-Dimensional Lattice Cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="PMC.html">PMC: A Program to Produce Multigroup Cross Sections Using Pointwise Energy Spectra from CENTRM</a></li>
<li class="toctree-l1"><a class="reference internal" href="PMCAppAB.html">PMC Appendices A and B</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHOPS.html">CHOPS: Module to Compute Pointwise Disadvantage Factors and Produce a Cell-Homogenized CENTRM Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="CRAWDAD.html">CRAWDAD: Module to Produce CENTRM-Formatted Continuous-Energy Nuclear Data Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="MCDancoff.html">MCDancoff Data Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="CAJUN.html">CAJUN: Module for Combining and Manipulating CENTRM Continuous-Energy Libraries</a></li>
</ul>
<p class="caption"><span class="caption-text">Monte Carlo Transport</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Monte%20Carlo%20Transport%20Overview.html">Monte Carlo Transport Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoA.html">Keno Appendix A: KENO V.a Shape Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoB.html">Keno Appendix B: KENO VI Shape Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="KenoC.html">Keno Appendix C: Sample problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Monaco.html">Monaco: A Fixed-Source Monte Carlo Transport Code for Shielding Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Radiation Shielding</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="MAVRIC.html">MAVRIC: Monaco with Automated Variance Reduction using Importance Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="CAAScapability.html">MAVRIC Appendix A: CAAS Capability</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MAVRIC Appendix B: MAVRIC Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities-working-with-monaco-mesh-tally-3dmap-files">Utilities working with Monaco mesh tally (*.3DMAP) files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities-for-working-with-denovo-binary-flux-dff-files">Utilities for working with DENOVO binary flux (*.dff) files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilities-for-working-with-denovo-varscl-a-tort-format-files">Utilities for working with DENOVO *.varscl (a TORT format) files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous-utilities">Miscellaneous utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendixc.html">MAVRIC Appendix C: Advanced Features</a></li>
</ul>
<p class="caption"><span class="caption-text">Deterministic Transport</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Deterministic%20Transport%20Intro.html">Deterministic Transport Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSD.html">XSDRNPM: A One-Dimensional Discrete-Ordinates Code for Transport Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSDAppAB.html">XSDRNPM Appendices A and B</a></li>
<li class="toctree-l1"><a class="reference internal" href="NEWT.html">NEWT:  A New Transport Algorithm for Two-Dimensional Discrete-Ordinates Analysis in Non-Orthogonal Geometries</a></li>
</ul>
<p class="caption"><span class="caption-text">Nuclear Data Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nuclear%20Data%20Libraries%20Overview.html">SCALE Nuclear Data Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="XSLib.html">SCALE Cross Section Libraries</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SCALE Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>MAVRIC Appendix B: MAVRIC Utilities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/appendixb.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mavric-appendix-b-mavric-utilities">
<span id="appendixb"></span><h1>MAVRIC Appendix B: MAVRIC Utilities<a class="headerlink" href="#mavric-appendix-b-mavric-utilities" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Several utilities are provided to aid users in dealing with some of the
output files produced by Monaco and MAVRIC. These utilities were
developed at ORNL for specific projects and have been added to SCALE so
that all users can benefit. More utilities have been added that deal
with Denovo, including the older *.varscl files for flux output used in
SCALE 6.1 and the current binary *.dff file for flux output used in
SCALE 6.2. These tools do not have the modern block/keyword input
structure but instead have a fixed format, which is fairly simple since
each utility is made for a very specific function.</p>
<p>Each is described in the following sections. Five sample problems,
<code class="docutils literal notranslate"><span class="pre">mavricUtilities1.inp</span></code>, <code class="docutils literal notranslate"><span class="pre">``mavricUtilities2.inp</span></code>, <code class="docutils literal notranslate"><span class="pre">mavricUtilities3.inp</span></code>,
<code class="docutils literal notranslate"><span class="pre">mavricUtilities4.inp</span></code> and <code class="docutils literal notranslate"><span class="pre">mavricUtilities5.inp</span></code> demonstrate the use of
some of these. For all of these utilities, filenames should be enclosed
in quotes.</p>
</div>
<div class="section" id="utilities-working-with-monaco-mesh-tally-3dmap-files">
<h2>Utilities working with Monaco mesh tally (*.3DMAP) files<a class="headerlink" href="#utilities-working-with-monaco-mesh-tally-3dmap-files" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>mt2ascii</p></td>
<td><p>Convert a mesh
tally into an
ASCII text
file.</p></td>
</tr>
<tr class="row-even"><td><p>mt2msl</p></td>
<td><p>Convert a mesh
tally into a
mesh source
lite.</p></td>
</tr>
<tr class="row-odd"><td><p>mt2msm</p>
<p>mt2silo</p>
</td>
<td><p>Convert a mesh
tally into a
mesh source.
Convert a mesh
tally file into
a Silo file for
VisIt.</p></td>
</tr>
<tr class="row-even"><td><p>mt2vtk</p></td>
<td><p>Convert one
dataset of one
family in a
mesh tally to
VTK format.</p></td>
</tr>
<tr class="row-odd"><td><p>mtAdder</p></td>
<td><p>Add several
Monaco mesh
tally files
together into
one mesh tally.</p></td>
</tr>
<tr class="row-even"><td><p>mtAverager</p></td>
<td><p>Average several
Monaco mesh
tally files
into one mesh
tally.</p></td>
</tr>
<tr class="row-odd"><td><p>mtBinOp</p></td>
<td><p>Binary
operation of
mesh tally
files: sum,
difference,
product, and
ratio.</p></td>
</tr>
<tr class="row-even"><td><p>mtDisp</p></td>
<td><p>Display the
basics of a
mesh tally
file.</p></td>
</tr>
<tr class="row-odd"><td><p>mtExpand</p></td>
<td><p>Expand a
space-only mesh
from a mesh
tally with an
energy
function.</p></td>
</tr>
<tr class="row-even"><td><p>mtFilter</p></td>
<td><p>Perform various
filters on a
mesh tally
file.</p></td>
</tr>
<tr class="row-odd"><td><p>mtInv</p></td>
<td><p>Invert all of
the values in a
mesh tally.</p></td>
</tr>
<tr class="row-even"><td><p>mtMask</p></td>
<td><p>Keep only or
remove
specified
voxels of a
mesh tally
based on
geometry.</p></td>
</tr>
<tr class="row-odd"><td><p>mtMinMax</p></td>
<td><p>Find the
location/value
of the min or
max of each
real mesh in a
mesh tally.</p></td>
</tr>
<tr class="row-even"><td><p>mtMultiply</p></td>
<td><p>Multiply a mesh
tally by a
constant
factor.</p></td>
</tr>
<tr class="row-odd"><td><p>mtPull</p></td>
<td><p>Pull values
from certain
voxels out of a
mesh tally
file.</p></td>
</tr>
<tr class="row-even"><td><p>mtRefine</p></td>
<td><p>Subdivide the
mesh into
smaller meshes
for better
visualization.</p></td>
</tr>
<tr class="row-odd"><td><p>mtResp</p></td>
<td><p>Apply a
response
function to one
family of a
mesh tally
file.</p></td>
</tr>
<tr class="row-even"><td><p>mtSplit</p></td>
<td><p>Split off part
of a mesh tally
file into a
separate mesh
tally file.</p></td>
</tr>
</tbody>
</table>
<p><strong>mt2ascii - Convert a mesh tally into an ASCII text file.</strong></p>
<p>Intended use: Since mesh tally files are in binary, the viewer can be
used to list mesh values. To get the values from the entire file, this
utility can be used to create an ASCII text version.</p>
<p>Input: The mesh tally file name and the filename for the resulting ASCII
file</p>
<p>Output: An ASCII formatted file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mt2ascii</span>
<span class="err">“/optional/path/meshTallyFilename.</span><span class="m">3</span><span class="err">dmap”</span>  <span class="err">!</span> <span class="err">the</span> <span class="err">mesh</span> <span class="err">tally</span>
<span class="err">“/optional/path/outputFilename.txt”</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mt2msl - Convert a mesh tally into a mesh source lite.</strong></p>
<p>Intended use: Convert a fissionSource.3dmap mesh tally computed by KENO
into a meshSoureLite (*.msl) file that can be used by a subsequent KENO
run using starting source type nst=9.</p>
<p>Input: Name of mesh tally (*.3dmap) file</p>
<p>Output: A mesh source lite (*.msl) file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mt2msl</span>
<span class="s">&quot;input.3dmap&quot;</span>    <span class="err">!</span> <span class="err">mesh</span> <span class="err">file</span> <span class="err">(*.</span><span class="m">3</span><span class="err">dmap)</span> <span class="err">name</span>
<span class="m">1</span>                <span class="err">!</span> <span class="err">family</span>
<span class="m">14</span>               <span class="err">!</span> <span class="err">group,</span> <span class="err">or</span> <span class="m">0</span> <span class="err">for</span> <span class="err">family</span> <span class="err">total</span>
<span class="s">&quot;result.msl&quot;</span>     <span class="err">!</span> <span class="err">mesh</span> <span class="err">source</span> <span class="err">lite</span> <span class="err">(*.msl)</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mt2msm - Convert a mesh tally into a mesh source.</strong></p>
<p>Intended use: Turn a tally of fission rate data into a mesh source file.
Mesh tallies are stored in a generic *.3dmap format, which consist of
several families, each with one or more datasets. A typical mesh tally
(without the “noGroupFluxes” keyword) contains three families: the
neutron fluxes with each energy group as a dataset, the photon fluxes
with each energy group as a data set, and the responses with each
response as a dataset. This program uses the spatial information of the
mesh tally and combines a user-given energy distribution for all voxels.
A second way to use this program is to use a whole family (all the
energy groups) without a user-given energy distribution.</p>
<p>Input:</p>
<p>Line 1: filename of mesh tally</p>
<p>Line 2: which family of tally</p>
<p>Line 3: which dataset of that family (or 0 for sum of family)</p>
<p>Line 4: source type: 1-neutron, 2-photon</p>
<p>Line 5: number of bins for mesh source</p>
<p>Lines : energy (eV) and pdf values</p>
<p>Lines : energy (eV) and pdf values</p>
<p>… …</p>
<p>Lines : energy (eV) and pdf values</p>
<p>Line : energy (eV)</p>
<p>Line last: desired output name</p>
<p>Input:</p>
<p>Line 1: filename of mesh tally</p>
<p>Line 2: which family of tally</p>
<p>Line 3: -1 (meaning use the whole family)</p>
<p>Line 4: source type: 1-neutron, 2-photon</p>
<p>Line 5: desired output name</p>
<p>Output: The resulting mesh source stored with the desired filename</p>
<p>Notes: Statistics of mesh tally are discarded.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=shell</span>
   <span class="err">cp</span> <span class="err">${RTNDIR}/barrel</span><span class="m">1</span><span class="err">.mt</span><span class="m">1</span><span class="err">.</span><span class="m">3</span><span class="err">dmap</span> <span class="err">.</span>
<span class="n">end</span>

<span class="nf">=mt2msm</span>
<span class="err">“barrel</span><span class="m">1</span><span class="err">.mt</span><span class="m">1</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>    <span class="err">!</span> <span class="err">mesh</span> <span class="err">tally</span>
<span class="m">3</span>                      <span class="err">!</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">family</span> <span class="err">(</span><span class="m">1</span><span class="err">-n,</span> <span class="m">2</span><span class="err">-p,</span> <span class="m">3</span><span class="err">-responses)</span>
<span class="m">1</span>                      <span class="err">!</span> <span class="err">real</span> <span class="err">mesh</span> <span class="err">in</span> <span class="err">that</span> <span class="err">family</span> <span class="err">(</span><span class="m">0</span> <span class="err">means</span> <span class="err">total</span> <span class="err">of</span> <span class="err">family)</span>
<span class="m">1</span>                      <span class="err">!</span> <span class="err">mesh</span> <span class="err">source</span> <span class="err">particle</span> <span class="err">type</span>  <span class="m">1</span><span class="err">-neutron,</span> <span class="m">2</span><span class="err">-photon</span>
<span class="m">143</span>                    <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">bins</span> <span class="err">in</span> <span class="err">binned</span> <span class="err">histogram</span> <span class="err">distribution</span>
<span class="m">1</span><span class="err">.</span><span class="m">9640</span><span class="err">E+</span><span class="m">07</span> <span class="m">1</span><span class="err">.</span><span class="m">29403</span><span class="err">E-</span><span class="m">08</span> <span class="err">!</span> <span class="err">E_</span><span class="m">1</span>  <span class="err">pdf_</span><span class="m">1</span>
<span class="m">1</span><span class="err">.</span><span class="m">7332</span><span class="err">E+</span><span class="m">07</span> <span class="m">4</span><span class="err">.</span><span class="m">60970</span><span class="err">E-</span><span class="m">07</span> <span class="err">!</span> <span class="err">E_</span><span class="m">2</span>  <span class="err">pdf_</span><span class="m">2</span>
<span class="m">1</span><span class="err">.</span><span class="m">6905</span><span class="err">E+</span><span class="m">07</span> <span class="m">2</span><span class="err">.</span><span class="m">56619</span><span class="err">E-</span><span class="m">06</span> <span class="err">!</span> <span class="err">E_</span><span class="m">3</span>  <span class="err">pdf_</span><span class="m">3</span>
   <span class="err">...</span>        <span class="err">...</span>
<span class="m">1</span><span class="err">.</span><span class="m">2341</span><span class="err">E+</span><span class="m">03</span> <span class="m">5</span><span class="err">.</span><span class="m">28408</span><span class="err">E-</span><span class="m">06</span> <span class="err">!</span> <span class="err">E_</span><span class="m">142</span>  <span class="err">pdf_</span><span class="m">142</span>
<span class="m">9</span><span class="err">.</span><span class="m">6112</span><span class="err">E+</span><span class="m">02</span> <span class="m">1</span><span class="err">.</span><span class="m">77756</span><span class="err">E-</span><span class="m">06</span> <span class="err">!</span> <span class="err">E_</span><span class="m">143</span>  <span class="err">pdf_</span><span class="m">143</span>
<span class="m">7</span><span class="err">.</span><span class="m">4852</span><span class="err">E+</span><span class="m">02</span>             <span class="err">!</span> <span class="err">E_</span><span class="m">144</span>
<span class="err">“barrel.fission.msm”</span>   <span class="err">!</span> <span class="err">output</span> <span class="err">filename</span>
<span class="n">end</span>

<span class="nf">=shell</span>
   <span class="err">cp</span> <span class="err">barrel.fission.msm</span> <span class="err">${RTNDIR}</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mt2msm</span>
<span class="err">“fissionSource.</span><span class="m">3</span><span class="err">dmap”</span>
<span class="m">1</span>                       <span class="err">!</span> <span class="err">neutron</span> <span class="err">flux</span> <span class="err">(for</span> <span class="err">KENO</span> <span class="m">3</span><span class="err">dmap</span> <span class="err">files</span> <span class="err">there</span> <span class="err">is</span> <span class="err">only</span> <span class="err">one</span> <span class="err">family)</span>
<span class="err">-</span><span class="m">1</span>                      <span class="err">!</span> <span class="err">use</span> <span class="err">the</span> <span class="err">whole</span> <span class="err">family</span> <span class="err">(keep</span> <span class="err">all</span> <span class="err">the</span> <span class="err">energy</span> <span class="err">groups)</span>
<span class="m">1</span>                       <span class="err">!</span> <span class="err">particle</span> <span class="err">type</span> <span class="err">(neutron)</span>
<span class="err">“caas.kenovi.fissionSource.msm”</span>
<span class="n">end</span>
</pre></div>
</div>
<p>In SCALE 6.1, the fission source distribution mesh tally produced by
KENO contained data representing the number of fissions in each mesh
cell in each energy group. In SCALE 6.2, the data stored was changed to
be the fissions per unit volume – the fission density. This is more
consistent with other mesh tallies from Monaco which store flux or dose
rates that represent averages over the mesh cells. This change also
allows the MeshFileViewer to display the KENO fission source
distribution better. The mt2msm utility program also changed from SCALE
6.1 to SCALE 6.2 to account for the change in what is stored in the KENO
mesh tally file. Therefore, <strong>KENO-produced fission source mesh tallies
and the mt2msm utility should not be mixed-and-matched across versions
of SCALE.</strong> Doing so would result in the final Monaco mesh source file
being improperly normalized, which would not properly represent the KENO
fission source distribution and would give incorrect results in
subsequent MAVRIC calculations. Because there is not a specific ‘version
flag’ in a mesh tally file or mesh source map file, the user must ensure
that they have used the same version of SCALE for both the CSAS6 and
MAVRIC sequences any time the CAAS capability is used.</p>
<p><strong>mt2silo - Convert a mesh tally file into a Silo file for VisIt.</strong></p>
<p>Input: Name of mesh file (*.3dmap), name of a Silo file, and a format</p>
<p>Output: A new Silo file</p>
<p>Notes: For format, use either 2 (PDB) or 7 (HDF5).</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mt2silo</span>
<span class="s">&quot;perfect.3dmap&quot;</span>        <span class="err">!</span> <span class="err">the</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">tally</span>
<span class="s">&quot;perfect.silo&quot;</span>         <span class="err">!</span> <span class="err">the</span> <span class="err">new</span> <span class="err">silo</span> <span class="err">file</span>
<span class="m">7</span>                      <span class="err">!</span> <span class="err">format</span> <span class="err">-</span> <span class="err">HDF</span><span class="m">5</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mt2vtk - Convert one dataset of one family in a mesh tally to VTK
format.</strong></p>
<p>Intended use: This is a way to transfer Monaco mesh tally data into a
common format that can be used by many data visualization packages,
including VisIt. Mesh tallies are stored in a generic *.3dmap format,
which consist of several families, each with one or more datasets. A
typical mesh tally contains three families: the neutron fluxes with each
energy group as a dataset, the photon fluxes with each energy group as a
data set, and the responses with each response as a dataset. This
program selects one dataset of one family and saves the data (and
optionally the absolute uncertainties) in an ASCII file using a VTK file
format.</p>
<p>Input: The mesh file name, which family, which dataset of that family,
whether or not to include absolute uncertainties and the filename for
the resulting VTK file</p>
<p>Output: An ASCII VTK-formatted file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mt2vtk</span>
<span class="err">“/optional/path/meshTallyFilename.</span><span class="m">3</span><span class="err">dmap”</span>  <span class="err">!</span> <span class="err">the</span> <span class="err">mesh</span> <span class="err">tally</span>
<span class="m">1</span>                                         <span class="err">!</span> <span class="err">neutron</span> <span class="err">flux</span> <span class="err">family</span>
<span class="m">5</span>                                         <span class="err">!</span> <span class="err">energy</span> <span class="err">group</span> <span class="m">5</span>
<span class="err">true</span>                                      <span class="err">!</span> <span class="err">include</span> <span class="err">uncertainties</span>
<span class="err">“/optional/path/outputFilename.vtk”</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mt2vtk</span>
<span class="err">“/optional/path/meshTallyFilename.</span><span class="m">3</span><span class="err">dmap”</span>  <span class="err">!</span> <span class="err">the</span> <span class="err">mesh</span> <span class="err">tally</span>
<span class="m">3</span>                                         <span class="err">!</span> <span class="err">the</span> <span class="err">response</span> <span class="err">family</span>
<span class="m">1</span>                                         <span class="err">!</span> <span class="err">first</span> <span class="err">response</span>
<span class="err">false</span>                                     <span class="err">!</span> <span class="err">do</span> <span class="err">not</span> <span class="err">include</span> <span class="err">uncertainties</span>
<span class="err">“/optional/path/outputFilename.vtk”</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtAdder - Add several Monaco mesh tally files together into one mesh
tally.</strong></p>
<p>Intended use: Add mesh tally results from different sources into one
tally. The resulting mesh tally is the sum of all the components in the
several mesh tallies—fluxes are added and responses are added. For
example, two runs of MAVRIC from two different sources can be made. The
mesh tally results can then be added together, getting the total fluxes
and total responses from each.</p>
<p>Input: The number of files, followed by the list of mesh tally filenames
to add, then the name of the total mesh tally</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span>  <span class="err">=mtAdder</span>
  <span class="err">n</span>
  <span class="err">“filename_</span><span class="m">1</span><span class="err">”</span>
  <span class="err">“filename_</span><span class="m">2</span><span class="err">”</span>
  <span class="err">...</span>
  <span class="err">“filename_n”</span>
  <span class="err">“resultFilename”</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Output: A new mesh tally file</p>
<p>Notes: All of the mesh tally files must be the same size and shape
(number of families, x cells, y cells, z cells, and energy groups in
each family) and have the same number of responses. Responses (if any)
must be consistent to calculate meaningful results.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtAdder</span>
<span class="m">3</span>
<span class="err">“meshFilename_</span><span class="m">1</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>
<span class="err">“meshFilename_</span><span class="m">2</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>
<span class="err">“meshFilename_</span><span class="m">3</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>
<span class="err">“meshFilenameTotal.</span><span class="m">3</span><span class="err">dmap”</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtAverager - Average several Monaco mesh tally files into one mesh
tally.</strong></p>
<p>Intended use: Combine (average) separate runs of the same problem with
different random number seeds into one tally. For example, if a user
does 10 separate runs of the same problem (poor man’s parallel) and
wants to combine the results as if they were from one run, an average is
needed. The average and uncertainties are weighted by the number of
histories in each run, to maintain proper statistics.</p>
<p>Input: The number of files, each filename and how many histories, then
the name of the total mesh tally</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtAverager</span>
<span class="err">n</span>
<span class="err">“filename_</span><span class="m">1</span><span class="err">”</span>   <span class="err">histories_</span><span class="m">1</span>
<span class="err">“filename_</span><span class="m">2</span><span class="err">”</span>   <span class="err">histories_</span><span class="m">2</span>
<span class="err">...</span>           <span class="err">...</span>
<span class="err">“filename_n”</span>   <span class="err">histories_n</span>
<span class="err">“resultFilename”</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Output: A new mesh tally file</p>
<p>Notes: All of the mesh tally files must be the same size and shape
(number of families, x cells, y cells, z cells, and energy groups in
each family) and have the same number of responses. Responses (if any)
must be consistent to calculate meaningful results.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtAverager</span>
<span class="m">3</span>
<span class="err">“meshFilename_</span><span class="m">1</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>   <span class="m">800000</span>
<span class="err">“meshFilename_</span><span class="m">2</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>   <span class="m">900000</span>
<span class="err">“meshFilename_</span><span class="m">3</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>   <span class="m">800000</span>
<span class="err">“/home/area/meshFilename.ave.</span><span class="m">3</span><span class="err">dmap”</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtBinOp - Binary operation of mesh tally files: sum, difference,
product, and ratio.</strong></p>
<p>Intended use: Apply simple math to the results stored in mesh tally
files</p>
<p>Input: The first mesh tally, the operator: add (or sum, +), subtract (or
difference, -), multiply (or product, x, *) and divide (or ratio, ÷,”
/”), the second mesh tally name and then name of the resulting mesh
tally file.</p>
<p>Output: A new mesh tally file</p>
<p>Notes: Uncertainties are propagated assuming the two mesh tallies are
uncorrelated, which may not always be a good assumption. Mesh tallies
need to have the same grid structure and number of families and groups.
Dataset names in the results are inherited from the first mesh tally and
may not make sense after the operation. When using the / (slash) for
division, enclose it in quotes (“/”).</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtBinOp</span>
<span class="err">“neutron.</span><span class="m">3</span><span class="err">dmap”</span>     <span class="err">!</span> <span class="err">first</span> <span class="err">operand</span>
<span class="err">divide</span>              <span class="err">!</span> <span class="err">operation</span>
<span class="err">“total.</span><span class="m">3</span><span class="err">dmap”</span>       <span class="err">!</span> <span class="err">second</span> <span class="err">operand</span>
<span class="err">“ratio.</span><span class="m">3</span><span class="err">dmap”</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtDisp - Display the basics of a mesh tally file.</strong></p>
<p>Input: A mesh tally (*.3dmap) file</p>
<p>Output: Some of the basic details of mesh file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtDisp</span>
<span class="s">&quot;simulation.mt2.dff&quot;</span>    <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtExpand - Expand a space-only mesh from a mesh tally with an energy
function</strong></p>
<p>Input: A mesh tally (*.3dmap) file and some parameters</p>
<p>Output: A mesh file similar to a mesh source but with uncertainty</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtExpand</span>
<span class="c">&#39;activate.mt1.3dmap&#39;</span>
<span class="m">2</span> <span class="m">1</span>  <span class="err">!</span> <span class="err">response</span> <span class="err">family,</span> <span class="err">first</span> <span class="err">response</span> <span class="err">-</span> <span class="err">cobalt</span> <span class="err">activate</span> <span class="err">rate</span>
<span class="err">true</span> <span class="err">!</span> <span class="err">multiply</span> <span class="err">by</span> <span class="err">voxel</span> <span class="err">volumes</span>
<span class="m">2</span>    <span class="err">!</span> <span class="err">make</span> <span class="err">photon</span> <span class="err">source</span>
<span class="m">19</span>   <span class="err">!</span> <span class="err">groups</span>
<span class="m">2</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">07</span> <span class="m">0</span>
<span class="m">1</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">07</span> <span class="m">0</span>
<span class="m">8</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">6</span><span class="err">.</span><span class="m">50</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">5</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">4</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">3</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">2</span><span class="err">.</span><span class="m">50</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">2</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">1</span><span class="err">.</span><span class="m">66</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span><span class="err">.</span><span class="m">5</span>
<span class="m">1</span><span class="err">.</span><span class="m">33</span><span class="err">E+</span><span class="m">06</span> <span class="m">1</span><span class="err">.</span><span class="m">5</span>
<span class="m">1</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span>
<span class="m">8</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">05</span> <span class="m">0</span>
<span class="m">6</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">05</span> <span class="m">0</span>
<span class="m">4</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">05</span> <span class="m">0</span>
<span class="m">3</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">05</span> <span class="m">0</span>
<span class="m">2</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">05</span> <span class="m">0</span>
<span class="m">1</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">05</span> <span class="m">0</span>
<span class="m">4</span><span class="err">.</span><span class="m">50</span><span class="err">E+</span><span class="m">04</span> <span class="m">0</span>
<span class="m">1.00E+04</span>
<span class="c">&#39;photonSource.3dmap&#39;</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtFilter - Perform various filters on a mesh tally file.</strong></p>
<p>Input: A *.3dmap mesh tally file and a group-wise response function</p>
<p>Output: A *.3dmap mesh tally file</p>
<p>Notes: Three basics types of filters: 0) flattening filter, 1) high-pass
filter, 2) low-pass filter. For types 1 and 2, the values plus a given
number of standard deviations will be compared to the criteria. The
input list depends on filter type. Types 1 and 2 require a value and a
number of standard deviations (n_sigma). A flattening filter turns any
positive value into the value of “1.0”.</p>
<p>Filtering performed based on following comparisons;</p>
<p>value + n_sigmas*abs_unc &gt; minValue (high-pass)</p>
<p>or</p>
<p>value + n_sigmas*abs_unc &lt; maxValue (low-pass)</p>
<p>The number of sigmas can be positive or negative.</p>
<p>Examples:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtFilter</span>
<span class="s">&quot;doseRates.3dmap&quot;</span>     <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="m">1</span>                     <span class="err">!</span> <span class="err">high-pass</span> <span class="err">filter:</span>
<span class="m">0</span><span class="err">.</span><span class="m">150</span>                 <span class="err">!</span>    <span class="err">keep</span> <span class="err">dose</span> <span class="err">rates</span> <span class="err">above</span> <span class="m">0</span><span class="err">.</span><span class="m">150</span>
<span class="err">-</span><span class="m">3</span><span class="err">.</span><span class="m">0</span>                  <span class="err">!</span> <span class="err">add</span> <span class="err">-</span><span class="m">3</span><span class="err">.</span><span class="m">0</span> <span class="err">standard</span> <span class="err">deviations</span> <span class="err">to</span> <span class="err">values</span> <span class="err">before</span> <span class="err">comparing</span>
<span class="s">&quot;above.3dmap&quot;</span>         <span class="err">!</span> <span class="err">new</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="n">end</span>

<span class="nf">=mtFilter</span>
<span class="s">&quot;above.3dmap&quot;</span>         <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="m">0</span>                     <span class="err">!</span> <span class="err">flattening</span> <span class="err">filter</span>
<span class="s">&quot;boolean.3dmap&quot;</span>       <span class="err">!</span> <span class="err">new</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtInv - Invert all of the values in a mesh tally.</strong></p>
<p>Intended use: Invert non-zero values in a mesh tally to be used in
further processing.</p>
<p>Input: The original mesh tally, the name of the resulting mesh tally
file</p>
<p>Output: A new mesh tally file</p>
<p>Notes: Uncertainties are propagated (the relative uncertainty of the
reciprocal of a value is the same as the relative uncertainty of the
value).</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtInv</span>
<span class="c">&#39;someTally.3dmap&#39;      ! existing mesh tally file</span>
<span class="c">&#39;inverted.3dmap&#39;       ! new mesh tally file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtMask - Keep only or remove specified voxels of a mesh tally based on
geometry.</strong></p>
<p>Intended use: Only keep or remove certain portions of a mesh tally based
on the unit, media, or mixture at the center of the voxel.</p>
<p>Input: A mesh tally file, an action (keeponly or remove), an operation
(intersection or union) of the unit=u, media=r and mixture=m, a
replacement value for voxels not kept and the file name of the resulting
mesh tally file. User can specify things such as 1) keep only the voxels
that have unit=2 and mixture=5, 2) keep only the voxels that have
media=3 or mixture=4, 3) remove voxels that have unit=2 and mixture=5,
4) remove voxels that have media=3 or mixture=4. To not include the
unit, media, or mixture in the specification, use a value of -1.</p>
<p>Output: A new mesh tally file.</p>
<p>Notes: When processing a file before finding the maximum, make the
replacement value something very low. If mtMask is being used before
finding the minimum, then set the replacement value high. Media is the
SGGP media number within the unit.</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtMask</span>
<span class="s">&quot;theTally.3dmap&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="err">keeponly</span>               <span class="err">!</span> <span class="err">use</span> <span class="s">&#39;keeponly&#39;</span> <span class="err">or</span> <span class="s">&#39;remove&#39;</span>
<span class="err">intersection</span>           <span class="err">!</span> <span class="err">use</span> <span class="s">&#39;intersection&#39;</span> <span class="err">or</span> <span class="s">&#39;union&#39;</span>
<span class="m">2</span> <span class="err">-</span><span class="m">1</span> <span class="m">5</span>                 <span class="err">!</span> <span class="err">unit=</span><span class="m">2</span> <span class="err">AND</span> <span class="err">mixture=</span><span class="m">5</span>
<span class="m">0</span><span class="err">.</span><span class="m">0</span>                    <span class="err">!</span> <span class="err">replacement</span> <span class="err">value</span> <span class="err">for</span> <span class="err">voxels</span> <span class="err">not</span> <span class="err">kept</span>
<span class="c">&#39;new.3dmap&#39;            ! new mesh tally file</span>
<span class="n">end</span>

<span class="nf">=mtMask</span>
<span class="s">&quot;theTally.3dmap&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="err">remove</span>                 <span class="err">!</span> <span class="err">use</span> <span class="s">&#39;keeponly&#39;</span> <span class="err">or</span> <span class="s">&#39;remove&#39;</span>
<span class="err">union</span>                  <span class="err">!</span> <span class="err">use</span> <span class="s">&#39;intersection&#39;</span> <span class="err">or</span> <span class="s">&#39;union&#39;</span>
<span class="err">-</span><span class="m">1</span> <span class="m">3</span> <span class="m">4</span>                 <span class="err">!</span> <span class="err">media=</span><span class="m">3</span> <span class="err">OR</span> <span class="err">mixture=</span><span class="m">4</span>
<span class="m">0</span><span class="err">.</span><span class="m">0</span>                    <span class="err">!</span> <span class="err">replacement</span> <span class="err">value</span> <span class="err">for</span> <span class="err">voxels</span> <span class="err">removed</span>
<span class="c">&#39;new.3dmap&#39;            ! new mesh tally file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtMinMax - Find the location/value of the min or max of each real mesh
in a mesh tally.</strong></p>
<p>Intended use: Determine the minimum or maximum values in a mesh tally.</p>
<p>Input: The mesh tally, what to find (minimums or maximums), how many
mins/maxs for each real mesh in the mesh tally, and the name of the text
output file to store the results</p>
<p>Output: A text output containing the values and locations of the
minimums or maximums of each real mesh in a tally file</p>
<p>Notes: The same information is also in the main SCALE output file.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtMinMax</span>
<span class="c">&#39;bigOleMeshTally.3dmap&#39;   ! existing mesh tally file</span>
<span class="err">maximum</span>                   <span class="err">!</span> <span class="err">find</span> <span class="err">either</span> <span class="err">minimums</span> <span class="err">or</span> <span class="err">maximums</span>
<span class="m">5</span>                         <span class="err">!</span> <span class="err">list</span> <span class="err">top</span> <span class="m">5</span> <span class="err">maximum</span> <span class="err">values</span> <span class="err">in</span> <span class="err">each</span> <span class="err">real</span> <span class="err">mesh</span>
<span class="c">&#39;theList.txt&#39;             ! file name to store all of the results</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtMultiply - Multiply a mesh tally by a constant factor.</strong></p>
<p>Intended use: Multiply every group of every family in a mesh tally for
either a change in source strength or a change in units.</p>
<p>Input: The original mesh tally, the multiplier, and the name of the
resulting mesh tally file</p>
<p>Output: A new mesh tally file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtMultiply</span>
<span class="err">“simulation.mt</span><span class="m">1</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>       <span class="err">!</span> <span class="err">the</span> <span class="err">mesh</span> <span class="err">tally</span>
<span class="m">25</span><span class="err">.</span><span class="m">0</span>                         <span class="err">!</span> <span class="err">source</span> <span class="err">strength</span> <span class="err">increase</span> <span class="err">of</span> <span class="m">25</span>
<span class="err">“simulation.bigger.</span><span class="m">3</span><span class="err">dmap”</span>    <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtPull - Pull values from certain voxels out of a mesh tally file.</strong></p>
<p>Intended use: Get energy-dependent fluxes for certain locations from a
mesh file.</p>
<p>Input: A mesh file (*.3dmap) file and a list of positions and/or voxels</p>
<p>Output: Listing of energy-dependent fluxes from each desired location to
an ASCII text file</p>
<p>Notes: Can pull fluxes either by a physical coordinate position or by
voxel indices. Positions should be entered as a set of x, y, z for
Cartesian coordinate system and r, θ, z for cylindrical coordinate
system.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtPull</span>
<span class="s">&quot;duh.mt2.3dmap&quot;</span>    <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">file</span>
<span class="err">n</span>                  <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">x,y,z</span> <span class="err">points</span> <span class="err">to</span> <span class="err">pull</span>
<span class="err">x_</span><span class="m">1</span> <span class="err">y_</span><span class="m">1</span> <span class="err">z_</span><span class="m">1</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="m">1</span>
<span class="err">x_</span><span class="m">1</span> <span class="err">y_</span><span class="m">2</span> <span class="err">z_</span><span class="m">2</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="m">2</span>
<span class="err">...</span>
<span class="err">x_n</span> <span class="err">y_n</span> <span class="err">z_n</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="err">n</span>
<span class="err">m</span>                  <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">i,j,k</span> <span class="err">voxels</span> <span class="err">to</span> <span class="err">pull</span>
<span class="err">i_</span><span class="m">1</span> <span class="err">j_</span><span class="m">1</span> <span class="err">k_</span><span class="m">1</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="m">1</span>
<span class="err">i_</span><span class="m">2</span> <span class="err">j_</span><span class="m">2</span> <span class="err">k_</span><span class="m">2</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="m">2</span>
<span class="err">...</span>
<span class="err">i_m</span> <span class="err">j_m</span> <span class="err">k_m</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="err">m</span>
<span class="s">&quot;outputName.txt&quot;</span>   <span class="err">!</span> <span class="err">name</span> <span class="err">of</span> <span class="err">output</span> <span class="err">text</span> <span class="err">file</span>
<span class="nf">=end</span>
</pre></div>
</div>
<p><strong>mtRefine - Subdivide the mesh into smaller meshes.</strong></p>
<p>Input: A *.3dmap mesh tally file with geometry mesh size (I,J,K) and
three integers describing how many subdivisions of each voxel to create
in each dimension</p>
<p>Output: A *.3dmap mesh tally file with geometry mesh size
(I*nx,J*ny,K*nz)</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtRefine</span>
<span class="s">&quot;fluxes.3dmap&quot;</span>        <span class="err">!</span> <span class="err">existing</span> <span class="err">*.</span><span class="m">3</span><span class="err">dmap</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span> <span class="err">(I,J,K)</span>
<span class="err">nx</span> <span class="err">ny</span> <span class="err">nz</span>              <span class="err">!</span> <span class="err">how</span> <span class="err">to</span> <span class="err">subdivide</span> <span class="err">each</span>
<span class="s">&quot;refined.3dmap&quot;</span>       <span class="err">!</span> <span class="err">new</span> <span class="err">(largerer)</span> <span class="err">*.</span><span class="m">3</span><span class="err">dmap</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span> <span class="err">(I*nx,J*ny,K*nz)</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtResp - Apply a response function to one family of a mesh tally
file.</strong></p>
<p>Intended use: Compute group-wise dose or reaction rates by combining a
response function with the scalar fluxes.</p>
<p>Input: A *.3dmap mesh tally file and a group-wise response function</p>
<p>Output: A *.3dmap mesh tally file containing one family</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtResp</span>
<span class="s">&quot;fluxes.3dmap&quot;</span>        <span class="err">!</span> <span class="err">existing</span> <span class="err">*.</span><span class="m">3</span><span class="err">dmap</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="m">200</span>                   <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">bins</span> <span class="err">in</span> <span class="err">response</span>
<span class="m">1</span>                     <span class="err">!</span> <span class="err">which</span> <span class="err">family</span>
<span class="m">2</span><span class="err">.</span><span class="m">2675480</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">1</span>
<span class="m">2</span><span class="err">.</span><span class="m">2283355</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">2</span>
<span class="m">2</span><span class="err">.</span><span class="m">1878259</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">3</span>
<span class="err">...</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748440</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="err">nbins-</span><span class="m">2</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748443</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="err">nbins-</span><span class="m">1</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748436</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="err">nbins</span>
<span class="s">&quot;doseByGroup.3dmap&quot;</span>   <span class="err">!</span> <span class="err">new</span> <span class="err">(smaller)</span> <span class="err">*.</span><span class="m">3</span><span class="err">dmap</span> <span class="err">mesh</span> <span class="err">tally</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mtSplit - Split off part of a mesh tally file into a separate mesh
tally file.</strong></p>
<p>Intended use: Some mesh tallies may become so large that the
MeshFileViewer cannot load the entire file to view. This utility allows
users to split off one family or just one group of one family into a
separate mesh tally file.</p>
<p>Input: The original mesh tally, which family (neutron, photon, or
responses), and which dataset (usually a group). Instead of a dataset,
users may specify 0 to get the total of a family or -1 to get all
datasets for that family. The name of the resulting mesh tally also
needs to be given.</p>
<p>Output: A new, smaller, mesh tally file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mtSplit</span>
<span class="err">“mavricUtilities</span><span class="m">3</span><span class="err">.mt</span><span class="m">1</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>       <span class="err">!</span> <span class="err">the</span> <span class="err">mesh</span> <span class="err">tally</span>
<span class="m">1</span>                                  <span class="err">!</span> <span class="err">the</span> <span class="err">family</span> <span class="err">of</span> <span class="err">neutron</span> <span class="err">fluxes</span>
<span class="m">5</span>                                  <span class="err">!</span> <span class="err">fifth</span> <span class="err">neutron</span> <span class="err">flux</span> <span class="err">group</span>
<span class="err">“mavricUtilities</span><span class="m">3</span><span class="err">.nfluxg</span><span class="m">5</span><span class="err">.</span><span class="m">3</span><span class="err">dmap”</span>   <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
</div>
<div class="section" id="utilities-for-working-with-denovo-binary-flux-dff-files">
<h2>Utilities for working with DENOVO binary flux (*.dff) files<a class="headerlink" href="#utilities-for-working-with-denovo-binary-flux-dff-files" title="Permalink to this headline">¶</a></h2>
<p>These utilities include the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>dff2dso</p></td>
<td><p>Convert a Denovo flux file into a
Denovo spatial output file.</p></td>
</tr>
<tr class="row-even"><td><p>dff2mai</p></td>
<td><p>Convert a Denovo flux file into a
mesh angular information file.</p></td>
</tr>
<tr class="row-odd"><td><p>dff2mim</p></td>
<td><p>Invert a Denovo flux file and
store as a mesh importance map.</p></td>
</tr>
<tr class="row-even"><td><p>dff2msl</p></td>
<td><p>Convert a Denovo flux file into a
mesh source lite.</p></td>
</tr>
<tr class="row-odd"><td><p>dffBinOp</p></td>
<td><p>Binary operation of Denovo flux
files: sum, difference, product,
and ratio.</p></td>
</tr>
<tr class="row-even"><td><p>dffDisp</p></td>
<td><p>Display the basics of a Denovo
flux file.</p></td>
</tr>
<tr class="row-odd"><td><p>dffExpand</p></td>
<td><p>Expand a space-only Denovo flux
file by an energy function.</p></td>
</tr>
<tr class="row-even"><td><p>dffFilter</p></td>
<td><p>Perform various filters on a
Denovo flux file.</p></td>
</tr>
<tr class="row-odd"><td><p>dffFix</p></td>
<td><p>Fix the zero and negative values
in a Denovo flux file.</p></td>
</tr>
<tr class="row-even"><td><p>dffInt</p></td>
<td><p>Integrate a single particle type
from a Denovo flux file.</p></td>
</tr>
<tr class="row-odd"><td><p>dffInv</p></td>
<td><p>Invert the values in a Denovo
flux file.</p></td>
</tr>
<tr class="row-even"><td><p>dffMult</p></td>
<td><p>Multiply a Denovo flux file by a
constant factor.</p></td>
</tr>
<tr class="row-odd"><td><p>dffPull</p></td>
<td><p>Pull fluxes from certain voxels
out of a Denovo flux file.</p></td>
</tr>
<tr class="row-even"><td><p>dffResp</p></td>
<td><p>Apply a response function to
scalar fluxes in a Denovo flux
file.</p></td>
</tr>
<tr class="row-odd"><td><p>dffSplit</p></td>
<td><p>Split off a single particle type
from a Denovo flux file.</p></td>
</tr>
</tbody>
</table>
<p><strong>dff2dso - Convert a Denovo flux file into a Denovo spatial output
file.</strong></p>
<p>Input: A binary (stream) Denovo flux file and which particle types to
convert</p>
<p>Output: A binary (stream) Denovo Spatial Output file</p>
<p>Notes: For particle type, use 1 for neutron, 2 for photon, and 0 for all
types.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dff2dso</span>
<span class="s">&quot;neatStuff.dff&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="m">1</span>                     <span class="err">!</span> <span class="err">keep</span> <span class="err">only</span> <span class="err">neutron</span> <span class="err">information</span>
<span class="s">&quot;neatStuff.dso&quot;</span>       <span class="err">!</span> <span class="err">new</span> <span class="err">Denovo</span> <span class="err">spatial</span> <span class="err">output</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dff2mai - Convert a Denovo flux file into a mesh angular information
file.</strong></p>
<p>Intended use: Take the optional net current information from a Denovo
flux file and create the adjoint current unit vectors and lambda
parameters required for directional CADIS. This is stored in a mesh
angular information (*.mai) file.</p>
<p>Input: A binary (stream) denovoFluxFile</p>
<p>Output: A binary (stream) meshAngularInfoFile, a mesh angular
information file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dff2mai</span>
<span class="s">&quot;mavricUtilities3.adjoint.dff&quot;</span>           <span class="err">!</span> <span class="err">new</span> <span class="err">denovoFluxFile</span>
<span class="s">&quot;mavricUtilities3.mai&quot;</span>                   <span class="err">!</span> <span class="err">mesh</span> <span class="err">angular</span> <span class="err">info</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dff2mim - Invert a Denovo flux file and store as a mesh importance
map.</strong></p>
<p>Intended use: Make weight targets without a consistent biased mesh
source.</p>
<p>Input: A Denovo flux (*.dff) file, a scalar constant, and the name of
Monaco mesh importance map (*.mim) file.</p>
<p>Output: A Monaco mesh importance map (*.mim) file.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dff2mim</span>
<span class="s">&quot;adjoint.dff&quot;</span>    <span class="err">!</span> <span class="err">existing</span> <span class="err">adjoint</span> <span class="err">denovoFluxFile</span>
<span class="m">3</span><span class="err">.</span><span class="m">0</span><span class="err">e-</span><span class="m">10</span>          <span class="err">!</span> <span class="err">constant</span>  <span class="err">targetWeight</span> <span class="err">=</span> <span class="err">constant/adjFlux</span>
<span class="s">&quot;test.mim&quot;</span>       <span class="err">!</span> <span class="err">new</span> <span class="err">Monaco</span> <span class="err">mesh</span> <span class="err">importance</span> <span class="err">map</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dff2msl - Convert a Denovo flux file into a mesh source lite.</strong></p>
<p>Intended use: Take Denovo fission source information stored in a *.dff
file and convert it to a mesh source lite file (*.msl) to be used as a
KENO starting source, nst=9.</p>
<p>Input: A Denovo flux (*.dff) file</p>
<p>Output: A mesh source lite (*.msl) file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dff2msl</span>
<span class="s">&quot;wishfulThinking.dff&quot;</span>    <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="s">&quot;startingSource.msl&quot;</span>     <span class="err">!</span> <span class="err">mesh</span> <span class="err">source</span> <span class="err">lite</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffBinOp - Binary operation of Denovo flux files: sum, difference,
product and ratio.</strong></p>
<p>Intended use: Apply simple math to the results stored in Denovo flux
files.</p>
<p>Input: The first flux file, the operator: add (or sum, +), subtract (or
difference, -), multiply (or product, x, *), or divide (or ratio, ÷,
“/”), the second flux file name, and the name of the resulting flux file</p>
<p>Output: A Denovo flux file</p>
<p>Notes: Flux files need to have the same grid structure and number of
groups. When using the / (slash) for division, enclose it in quotes
(“/”).</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffBinOp</span>
<span class="s">&quot;neutron.dff&quot;</span>     <span class="err">!</span> <span class="err">first</span> <span class="err">operand</span>
<span class="err">divide</span>            <span class="err">!</span> <span class="err">operation</span>
<span class="s">&quot;total.dff&quot;</span>       <span class="err">!</span> <span class="err">second</span> <span class="err">operand</span>
<span class="s">&quot;ratio.dff&quot;</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffDisp - Display the basics of a Denovo flux file.</strong></p>
<p>Input: A Denovo flux (*.dff) file</p>
<p>Output: Some of the basic details of the Denovo flux file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffDisp</span>
<span class="s">&quot;fluxes.dff&quot;</span>          <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffExpand - Expand a space-only Denovo flux file by an energy
function.</strong></p>
<p>Input: A Denovo flux (*.dff) file (with a single group - a space-only
function), one or more particle types, and an energy function for each</p>
<p>Output: A full space/energy Denovo flux file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffExpand</span>
<span class="s">&quot;spatialFluxes.dff&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span> <span class="err">(single</span> <span class="err">group)</span>
<span class="m">2</span>                         <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">particles</span>
<span class="m">1</span>                         <span class="err">!</span> <span class="err">particle</span> <span class="err">type</span> <span class="err">(</span><span class="m">1</span><span class="err">-neutron,</span> <span class="m">2</span><span class="err">-photon)</span>
<span class="m">27</span>                        <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">bins</span> <span class="err">in</span> <span class="err">binned</span> <span class="err">histogram</span> <span class="err">distribution</span>
<span class="m">2</span><span class="err">.</span><span class="m">00000</span><span class="err">E+</span><span class="m">07</span> <span class="m">3</span><span class="err">.</span><span class="m">0658021</span><span class="err">E-</span><span class="m">09</span> <span class="err">!</span> <span class="err">E_</span><span class="m">1</span>  <span class="err">amount_</span><span class="m">1</span>
<span class="m">6</span><span class="err">.</span><span class="m">37630</span><span class="err">E+</span><span class="m">06</span> <span class="m">6</span><span class="err">.</span><span class="m">9767163</span><span class="err">E-</span><span class="m">09</span> <span class="err">!</span> <span class="err">E_</span><span class="m">2</span>  <span class="err">amount_</span><span class="m">2</span>
<span class="m">3</span><span class="err">.</span><span class="m">01190</span><span class="err">E+</span><span class="m">06</span> <span class="m">1</span><span class="err">.</span><span class="m">1495182</span><span class="err">E-</span><span class="m">08</span> <span class="err">!</span> <span class="err">E_</span><span class="m">3</span>  <span class="err">amount_</span><span class="m">3</span>
   <span class="err">...</span>        <span class="err">...</span>
<span class="m">3</span><span class="err">.</span><span class="m">00000</span><span class="err">E-</span><span class="m">02</span> <span class="m">1</span><span class="err">.</span><span class="m">7127996</span><span class="err">E-</span><span class="m">04</span> <span class="err">!</span> <span class="err">E_</span><span class="m">26</span>  <span class="err">amount_</span><span class="m">26</span>
<span class="m">1</span><span class="err">.</span><span class="m">00000</span><span class="err">E-</span><span class="m">02</span> <span class="m">3</span><span class="err">.</span><span class="m">0910611</span><span class="err">E-</span><span class="m">04</span> <span class="err">!</span> <span class="err">E_</span><span class="m">27</span>  <span class="err">amount_</span><span class="m">27</span>
<span class="m">1</span><span class="err">.</span><span class="m">00000</span><span class="err">E-</span><span class="m">05</span>               <span class="err">!</span> <span class="err">E_</span><span class="m">28</span>
<span class="m">2</span>                         <span class="err">!</span> <span class="err">particle</span> <span class="err">type</span> <span class="err">(</span><span class="m">1</span><span class="err">-neutron,</span> <span class="m">2</span><span class="err">-photon)</span>
<span class="m">19</span>                        <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">bins</span> <span class="err">in</span> <span class="err">binned</span> <span class="err">histogram</span> <span class="err">distribution</span>
<span class="m">2</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">07</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>              <span class="err">!</span> <span class="err">E_</span><span class="m">1</span>  <span class="err">amount_</span><span class="m">1</span>
<span class="m">1</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">07</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>              <span class="err">!</span> <span class="err">E_</span><span class="m">2</span>  <span class="err">amount_</span><span class="m">2</span>
<span class="m">8</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">06</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>              <span class="err">!</span> <span class="err">E_</span><span class="m">3</span>  <span class="err">amount_</span><span class="m">3</span>
   <span class="err">...</span>        <span class="err">...</span>
<span class="m">1</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">05</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>              <span class="err">!</span> <span class="err">E_</span><span class="m">17</span>  <span class="err">amount_</span><span class="m">17</span>
<span class="m">4</span><span class="err">.</span><span class="m">50</span><span class="err">E+</span><span class="m">04</span> <span class="m">0</span><span class="err">.</span><span class="m">0</span>              <span class="err">!</span> <span class="err">E_</span><span class="m">18</span>  <span class="err">amount_</span><span class="m">18</span>
<span class="m">1</span><span class="err">.</span><span class="m">00</span><span class="err">E+</span><span class="m">04</span>                  <span class="err">!</span> <span class="err">E_</span><span class="m">19</span>
<span class="s">&quot;expanded.dff&quot;</span>            <span class="err">!</span> <span class="err">new</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffFilter - Perform various filters on a Denovo flux file.</strong></p>
<p>Intended use: Keep fluxes in a *.dff file where the flux or response
meets a specified criterion.</p>
<p>Input: A Denovo flux file name, filter type, filter options, the output
file name</p>
<p>Output: A Denovo flux file</p>
<p>Notes: There are three basics types of filters: 0) flattening filter, 1)
high-pass filter, 2) low-pass filter. For types 1 and 2, the criteria
could be a computed response. The input list changes depending on the
filter type and whether a response function is included. For no response
function, use 0 for the number of groups. A flattening filter turns any
positive value into a value of “1.0”.</p>
<p>Examples:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffFilter</span>
<span class="s">&quot;some.dff&quot;</span>               <span class="err">!</span> <span class="err">input</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">filename</span>
<span class="m">0</span>                        <span class="err">!</span> <span class="err">filter</span> <span class="err">type</span>
<span class="s">&quot;flattened.dff&quot;</span>          <span class="err">!</span> <span class="err">output</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">filename</span>
<span class="n">end</span>

<span class="nf">=dffFilter</span>
<span class="s">&quot;some.dff&quot;</span>               <span class="err">!</span> <span class="err">input</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">filename</span>
<span class="m">2</span>                        <span class="err">!</span> <span class="err">filter</span> <span class="err">type</span>
<span class="m">10</span><span class="err">.</span><span class="m">0</span>                     <span class="err">!</span> <span class="err">maximum</span> <span class="err">value</span>
<span class="m">0</span>                        <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">groups</span> <span class="err">for</span> <span class="err">response</span> <span class="err">function</span>
<span class="s">&quot;simpleFiltered.dff&quot;</span>     <span class="err">!</span> <span class="err">output</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">filename</span>
<span class="n">end</span>

<span class="nf">=dffFilter</span>
<span class="s">&quot;some.dff&quot;</span>               <span class="err">!</span> <span class="err">input</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">filename</span>
<span class="m">1</span>                        <span class="err">!</span> <span class="err">filter</span> <span class="err">type</span>
<span class="m">10</span><span class="err">.</span><span class="m">0</span>                     <span class="err">!</span> <span class="err">minimum</span> <span class="err">value</span>
<span class="m">19</span>                       <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">groups</span> <span class="err">for</span> <span class="err">response</span> <span class="err">function</span>
<span class="m">1</span><span class="err">.</span><span class="m">1620022</span><span class="err">E-</span><span class="m">05</span>            <span class="err">!</span>   <span class="err">should</span> <span class="err">match</span> <span class="err">total</span> <span class="err">groups</span> <span class="err">in</span> <span class="err">file</span><span class="m"></span>
<span class="m">8.7445696E-06</span>
<span class="m">7.4596655E-06</span>
<span class="m">6.3505804E-06</span>
<span class="m">5.3994922E-06</span>
<span class="m">4.6016462E-06</span>
<span class="m">3.9522688E-06</span>
<span class="m">3.4588520E-06</span>
<span class="m">3.0130868E-06</span>
<span class="m">2.6200121E-06</span>
<span class="m">2.1944491E-06</span>
<span class="m">1.8269592E-06</span>
<span class="m">1.5149031E-06</span>
<span class="m">1.1595382E-06</span>
<span class="m">8.7044964E-07</span>
<span class="m">6.2187445E-07</span>
<span class="m">3.7080767E-07</span>
<span class="m">2.6877788E-07</span>
<span class="m">5.9327226E-07</span>
<span class="s">&quot;respFiltered.dff&quot;</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">filename</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffFix - Fix the zero and negative values in a Denovo flux file.</strong></p>
<p>Intended use: Replace zero or negative values with nearest good
neighboring value. Checks previous group, previous x voxel, previous y
voxel, then previous z voxel.</p>
<p>Input: A Denovo flux file</p>
<p>Output: A new Denovo flux file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffFix</span>
<span class="s">&quot;original.dff&quot;</span>    <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="s">&quot;repaired.dff&quot;</span>    <span class="err">!</span> <span class="err">new</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffInt - Integrate a single particle type from a Denovo flux file.</strong></p>
<p>Input: A Denovo flux file, which particle type to integrate (1-neutron,
2-photon), and the filename of the resulting integrated file</p>
<p>Output: A single-group Denovo flux file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffInt</span>
<span class="s">&quot;coupled.dff&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="m">2</span>                   <span class="err">!</span> <span class="err">particle</span> <span class="err">type</span>
<span class="s">&quot;photonTotal.dff&quot;</span>   <span class="err">!</span> <span class="err">new</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span> <span class="err">(single</span> <span class="err">group)</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffInv - Invert the values in a Denovo flux file.</strong></p>
<p>Input: A Denovo flux file</p>
<p>Output: A Denovo flux file</p>
<p>Notes: Only non-zero values are inverted</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffInv</span>
<span class="s">&quot;fluxes.dff&quot;</span>        <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="s">&quot;inverted.dff&quot;</span>      <span class="err">!</span> <span class="err">new</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffMult - Multiply a Denovo flux file by a constant factor.</strong></p>
<p>Intended use: source strength change, change in units, etc.</p>
<p>Input: A Denovo flux file and a constant factor</p>
<p>Output: A Denovo flux file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffMult</span>
<span class="s">&quot;fluxes.dff&quot;</span>        <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="m">10000</span><span class="err">.</span><span class="m">0</span>             <span class="err">!</span> <span class="err">change</span> <span class="err">units</span> <span class="err">from</span> <span class="err">(/cm^</span><span class="m">2</span><span class="err">/s)</span> <span class="err">to</span> <span class="err">(/m^</span><span class="m">2</span><span class="err">/s)</span>
<span class="s">&quot;multiplied.dff&quot;</span>    <span class="err">!</span> <span class="err">new</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffPull - Pull fluxes from certain voxels out of a Denovo flux file.</strong></p>
<p>Intended use: Get energy-dependent fluxes for certain locations from a
flux file.</p>
<p>Input: A Denovo flux file and a list of positions and/or voxels</p>
<p>Output: Listing of energy-dependent fluxes from each desired location to
an ASCII text file</p>
<p>Notes: Can pull fluxes either by a physical coordinate position or by
voxel indices.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffPull</span>
<span class="s">&quot;fluxes.dff&quot;</span>       <span class="err">!</span> <span class="err">file</span> <span class="err">with</span> <span class="err">the</span> <span class="err">scalar</span> <span class="err">fluxes</span> <span class="err">you</span> <span class="err">want</span>
<span class="err">n</span>                  <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">x,y,z</span> <span class="err">points</span> <span class="err">to</span> <span class="err">pull</span>
<span class="err">x_</span><span class="m">1</span> <span class="err">y_</span><span class="m">1</span> <span class="err">z_</span><span class="m">1</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="m">1</span>
<span class="err">x_</span><span class="m">1</span> <span class="err">y_</span><span class="m">2</span> <span class="err">z_</span><span class="m">2</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="m">2</span>
<span class="err">...</span>
<span class="err">x_n</span> <span class="err">y_n</span> <span class="err">z_n</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="err">n</span>
<span class="err">m</span>                  <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">i,j,k</span> <span class="err">voxels</span> <span class="err">to</span> <span class="err">pull</span>
<span class="err">i_</span><span class="m">1</span> <span class="err">j_</span><span class="m">1</span> <span class="err">k_</span><span class="m">1</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="m">1</span>
<span class="err">i_</span><span class="m">2</span> <span class="err">j_</span><span class="m">2</span> <span class="err">k_</span><span class="m">2</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="m">2</span>
<span class="err">...</span>
<span class="err">i_m</span> <span class="err">j_m</span> <span class="err">k_m</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="err">m</span>
<span class="s">&quot;outputName.txt&quot;</span>   <span class="err">!</span> <span class="err">name</span> <span class="err">of</span> <span class="err">output</span> <span class="err">text</span> <span class="err">file</span>
<span class="nf">=end</span>
</pre></div>
</div>
<p><strong>dffResp - Apply a response function to scalar fluxes in a Denovo flux
file.</strong></p>
<p>Intended use: Compute group-wise dose or reaction rates by combining a
response function with the scalar fluxes. This can be done for every
particle type in the flux file or a single specific particle type.</p>
<p>Input: A Denovo flux file, particle indicator and a group-wise response
function</p>
<p>Output: A Denovo flux file</p>
<p>Notes: 0-all particles, 1-neutron, 2-photon</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffResp</span>
<span class="s">&quot;fluxes.dff&quot;</span>          <span class="err">!</span> <span class="err">existing</span> <span class="err">coupled</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="m">1</span>                     <span class="err">!</span> <span class="err">keep</span> <span class="err">only</span> <span class="err">neutron</span> <span class="err">information</span>
<span class="m">200</span>                   <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">bins</span> <span class="err">in</span> <span class="err">response</span>
<span class="m">2</span><span class="err">.</span><span class="m">2675480</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">1</span>
<span class="m">2</span><span class="err">.</span><span class="m">2283355</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">2</span>
<span class="m">2</span><span class="err">.</span><span class="m">1878259</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">3</span>
<span class="err">...</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748440</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="err">nbins-</span><span class="m">2</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748443</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="err">nbins-</span><span class="m">1</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748436</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="err">nbins</span>
<span class="s">&quot;doses.dff&quot;</span>           <span class="err">!</span> <span class="err">new</span> <span class="err">(smaller)</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">fle</span>
<span class="n">end</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffResp</span>
<span class="s">&quot;fluxes.dff&quot;</span>          <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="m">0</span>                     <span class="err">!</span> <span class="err">keep</span> <span class="err">all</span> <span class="err">particles</span> <span class="err">information</span>
<span class="m">46</span>                    <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">bins</span> <span class="err">in</span> <span class="err">response</span>
<span class="m">1</span><span class="err">.</span><span class="m">6151395</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">1</span><span class="err">,</span> <span class="err">first</span> <span class="err">neutron</span>
<span class="m">1</span><span class="err">.</span><span class="m">4451494</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">2</span>
<span class="m">1</span><span class="err">.</span><span class="m">2703618</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">3</span>
<span class="err">...</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748447</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">27</span><span class="err">,</span> <span class="err">last</span> <span class="err">neutron</span>
<span class="m">1</span><span class="err">.</span><span class="m">1620022</span><span class="err">E-</span><span class="m">05</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">28</span><span class="err">,</span> <span class="err">first</span> <span class="err">photon</span>
<span class="m">8</span><span class="err">.</span><span class="m">7445696</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">29</span>
<span class="m">7</span><span class="err">.</span><span class="m">4596655</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">30</span>
<span class="err">...</span>
<span class="m">5</span><span class="err">.</span><span class="m">9327226</span><span class="err">E-</span><span class="m">07</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">46</span><span class="err">,</span> <span class="err">last</span> <span class="err">photon</span>
<span class="s">&quot;doses.dff&quot;</span>           <span class="err">!</span> <span class="err">new</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dffSplit - Split off a single particle type from a Denovo flux file.</strong></p>
<p>Intended use: Make a flux file containing a single particle type from
another Denovo flux file.</p>
<p>Input: A Denovo flux file and a particle type</p>
<p>Output: A (smaller) Denovo flux file</p>
<p>Notes: 1-neutron, 2-photon</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dffSplit</span>
<span class="s">&quot;coupled.dff&quot;</span>     <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="m">2</span>                 <span class="err">!</span> <span class="err">particle</span> <span class="err">type</span>
<span class="s">&quot;photons.dff&quot;</span>     <span class="err">!</span> <span class="err">new</span> <span class="err">(smaller)</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
</div>
<div class="section" id="utilities-for-working-with-denovo-varscl-a-tort-format-files">
<h2>Utilities for working with DENOVO *.varscl (a TORT format) files<a class="headerlink" href="#utilities-for-working-with-denovo-varscl-a-tort-format-files" title="Permalink to this headline">¶</a></h2>
<p>These utilities include the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>vs2dff</p></td>
<td><p>Convert a varscl file into a
Denovo flux file.</p></td>
</tr>
<tr class="row-even"><td><p>vsAdder</p></td>
<td><p>Add two TORT *.varscl files
together into one *.varscl file.</p></td>
</tr>
<tr class="row-odd"><td><p>vsBinOp</p></td>
<td><p>Binary operation of TORT
*.varscl files: sum, difference,
product and ratio.</p></td>
</tr>
<tr class="row-even"><td><p>vsDisp</p></td>
<td><p>Display the basic contents of a
TORT *.varscl file.</p></td>
</tr>
<tr class="row-odd"><td><p>vsFilter</p></td>
<td><p>Perform various filters on a TORT
*.varscl file.</p></td>
</tr>
<tr class="row-even"><td><p>vsInt</p></td>
<td><p>Integrate a single particle type
from a TORT *.varscl file.</p></td>
</tr>
<tr class="row-odd"><td><p>vsInv</p></td>
<td><p>Invert the values in a TORT
*.varscl file.</p></td>
</tr>
<tr class="row-even"><td><p>vsMult</p></td>
<td><p>Multiply a TORT *.varscl file by
a constant factor.</p></td>
</tr>
<tr class="row-odd"><td><p>vsPull</p></td>
<td><p>Pull fluxes from certain voxels
out of a TORT *.varscl file.</p></td>
</tr>
<tr class="row-even"><td><p>vsReGrp</p></td>
<td><p>Regroup a TORT *.varscl file.</p></td>
</tr>
<tr class="row-odd"><td><p>vsResp</p></td>
<td><p>Apply a response function to
scalar fluxes in a TORT *.varscl
file.</p></td>
</tr>
<tr class="row-even"><td><p>vsSplit</p></td>
<td><p>Split off part of a TORT
*.varscl file into a separate
*.varscl file.</p></td>
</tr>
</tbody>
</table>
<p>These utilities work with the *.varscl files produced with SCALE 6 and
SCALE 6.1. The *.varscl format (a TORT format) is a single precision,
binary format that has been replaced with the double precision, binary
*.dff file (Denovo flux file) in SCALE 6.2. SCALE 6 and SCALE 6.1 users
can request the executable binaries for these utilities by sending an
email to <a class="reference external" href="mailto:scaleHelp&#37;&#52;&#48;ornl&#46;gov">scaleHelp<span>&#64;</span>ornl<span>&#46;</span>gov</a>.</p>
<p><strong>vs2dff - Convert a varscl file into a Denovo flux file.</strong></p>
<p>Intended use: Convert a varscl file (used in previous versions of
MAVRIC) into a Denovo flux file (introduced in SCALE 6.2).</p>
<p>Input: The *varscl file name, whether or not it is an adjoint flux, and
the filename for the resulting denovoFluxfile</p>
<p>Output: A binary (stream) denovoFluxFile</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vs2dff</span>
<span class="s">&quot;mavricUtilities3.adjoint.varscl&quot;</span>        <span class="err">!</span> <span class="err">the</span> <span class="err">TORT</span> <span class="err">varscl</span> <span class="err">file</span>
<span class="err">true</span>                                     <span class="err">!</span> <span class="err">it</span> <span class="err">is</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">flux</span>
<span class="s">&quot;mavricUtilities3.adjoint.dff&quot;</span>           <span class="err">!</span> <span class="err">new</span> <span class="err">denovoFluxFile</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsAdder - Add two TORT *.varscl files together into one *.varscl
file.</strong></p>
<p>Intended use: Beta versions of MAVRIC used TORT and GRTUNC-3D and could
add the *.varscl files from each together before using them to create
importance maps. MAVRIC now uses Denovo and no longer needs to add
separate GRTUNC/TORT files. This utility is designed for people wishing
to use the older files with the latest MAVRIC.</p>
<p>Input: Two *.varscl file names, typically one from GRTUNC-3D and the
other from TORT, the filename of the added file, whether you want lots
of output displayed (“true” or “false”) and whether or not there is a
minimum value of flux to use. If so, it is then listed.</p>
<p>Output: A single *.varscl with the specified name</p>
<p>Notes: Addition is commutative, but not all varscl files are created
equal. Do not mix up the GRTUNCL and the TORT files. GRTUNCL3D does not
fill in the header info quite right, so the added varscl file takes
header info only from the TORT varscl file.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsAdder</span>
<span class="err">“/some/path/problem.gtunc.adjoint.varscl”</span>
<span class="err">“/some/path/problem.tort.adjoint.varscl”</span>
<span class="err">“total.varscl”</span>
<span class="err">f</span>
<span class="err">t</span><span class="m"></span>
<span class="m">1.0e-25</span>
<span class="n">end</span>

<span class="nf">=shell</span>
  <span class="err">cp</span> <span class="err">total.varscl</span> <span class="err">${RTNDIR}/total.varscl</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsBinOp - Binary operation of TORT *.varscl files: sum, difference,
product and ratio.</strong></p>
<p>Intended use: Apply simple math to the results stored in TORT *.varscl
files.</p>
<p>Input: The first flux file, the operator: add (or sum, +), subtract (or
difference, -), multiply (or product, x, *), and divide (or ratio, ÷,
“/”), the second flux file name, and the name of the resulting flux file</p>
<p>Output: A TORT *.varscl file</p>
<p>Notes: Flux files need to have the same grid structure and number of
groups. When using the / (slash) for division, enclose it in quotes
(“/”).</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsBinOp</span>
<span class="s">&quot;neutron.varscl&quot;</span>     <span class="err">!</span> <span class="err">first</span> <span class="err">operand</span>
<span class="err">false</span>                <span class="err">!</span> <span class="err">are</span> <span class="err">these</span> <span class="err">adjoint</span> <span class="err">files?</span>
<span class="err">divide</span>               <span class="err">!</span> <span class="err">operation</span>
<span class="s">&quot;total.varscl&quot;</span>       <span class="err">!</span> <span class="err">second</span> <span class="err">operand</span>
<span class="s">&quot;ratio.varscl&quot;</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsDisp - Display the basic contents of a TORT *.varscl file.</strong></p>
<p>Input: A TORT *.varscl file name and adjoint flag</p>
<p>Output: Text display</p>
<p>Examples:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsDisp</span>
<span class="s">&quot;some.varscl&quot;</span>            <span class="err">!</span> <span class="err">input</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
<span class="err">false</span>                    <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">varscl?</span>
<span class="n">end</span>

<span class="nf">=vsDisp</span>
<span class="s">&quot;some.varscl&quot;</span>            <span class="err">!</span> <span class="err">input</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
<span class="err">adjoint</span>                  <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">varscl?</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsFilter - Perform various filters on a TORT *.varscl file.</strong></p>
<p>Intended use: Keep fluxes in a *.varscl file where the flux or response
meets a specified criterion.</p>
<p>Input: A TORT *.varscl file name, filter type, filter options, the
output file name</p>
<p>Output: A TORT *.varscl file</p>
<p>Notes: There are three basics types of filters: 0) flattening filter, 1)
high-pass filter, 2) low-pass filter. For types 1 and 2, the criteria
could be a computed response. The input list changes depending on the
filter type and whether a response function is included. For no response
function, use 0 for the number of groups.</p>
<p>Examples:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsFilter</span>
<span class="s">&quot;some.varscl&quot;</span>            <span class="err">!</span> <span class="err">input</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
<span class="err">false</span>                    <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">varscl?</span>
<span class="m">0</span>                        <span class="err">!</span> <span class="err">filter</span> <span class="err">type</span>
<span class="s">&quot;flattened.varscl&quot;</span>       <span class="err">!</span> <span class="err">output</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
<span class="n">end</span>

<span class="nf">=vsFilter</span>
<span class="s">&quot;some.varscl&quot;</span>            <span class="err">!</span> <span class="err">input</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
<span class="err">false</span>                    <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">varscl?</span>
<span class="m">2</span>                        <span class="err">!</span> <span class="err">filter</span> <span class="err">type</span>
<span class="m">10</span><span class="err">.</span><span class="m">0</span>                     <span class="err">!</span> <span class="err">maximum</span> <span class="err">value</span>
<span class="m">0</span>                        <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">groups</span> <span class="err">for</span> <span class="err">response</span> <span class="err">function</span>
<span class="s">&quot;simpleFiltered.varscl&quot;</span>  <span class="err">!</span> <span class="err">output</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
<span class="n">end</span>

<span class="nf">=vsFilter</span>
<span class="s">&quot;some.varscl&quot;</span>            <span class="err">!</span> <span class="err">input</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
<span class="err">false</span>                    <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">varscl?</span>
<span class="m">1</span>                        <span class="err">!</span> <span class="err">filter</span> <span class="err">type</span>
<span class="m">10</span><span class="err">.</span><span class="m">0</span>                     <span class="err">!</span> <span class="err">minimum</span> <span class="err">value</span>
<span class="m">19</span>                       <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">groups</span> <span class="err">for</span> <span class="err">response</span> <span class="err">function</span>
<span class="m">1</span><span class="err">.</span><span class="m">1620022</span><span class="err">E-</span><span class="m">05</span>            <span class="err">!</span>   <span class="err">should</span> <span class="err">match</span> <span class="err">total</span> <span class="err">groups</span> <span class="err">in</span> <span class="err">file</span><span class="m"></span>
<span class="m">8.7445696E-06</span>
<span class="m">7.4596655E-06</span>
<span class="m">6.3505804E-06</span>
<span class="m">5.3994922E-06</span>
<span class="m">4.6016462E-06</span>
<span class="m">3.9522688E-06</span>
<span class="m">3.4588520E-06</span>
<span class="m">3.0130868E-06</span>
<span class="m">2.6200121E-06</span>
<span class="m">2.1944491E-06</span>
<span class="m">1.8269592E-06</span>
<span class="m">1.5149031E-06</span>
<span class="m">1.1595382E-06</span>
<span class="m">8.7044964E-07</span>
<span class="m">6.2187445E-07</span>
<span class="m">3.7080767E-07</span>
<span class="m">2.6877788E-07</span>
<span class="m">5.9327226E-07</span>
<span class="s">&quot;respFiltered.varscl&quot;</span>    <span class="err">!</span> <span class="err">output</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">filename</span>
</pre></div>
</div>
<p><strong>vsInt - Integrate a single particle type from a TORT *.varscl file.</strong></p>
<p>Input: A TORT *.varscl file</p>
<p>Output: A single-group TORT *.varscl file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsInt</span>
<span class="s">&quot;coupled.varscl&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="err">false</span>                  <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">file?</span>
<span class="m">2</span>                      <span class="err">!</span> <span class="err">particle</span> <span class="err">type</span> <span class="err">(</span><span class="m">0</span><span class="err">-all,</span> <span class="m">1</span><span class="err">-neutron,</span> <span class="m">2</span><span class="err">-photon)</span>
<span class="s">&quot;photonTotal.varscl&quot;</span>   <span class="err">!</span> <span class="err">new</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span> <span class="err">(single</span> <span class="err">group)</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsInv - Invert the values in a TORT *.varscl file.</strong></p>
<p>Input: A TORT *.varscl file</p>
<p>Output: A TORT *.varscl file</p>
<p>Notes: Only non-zero values are inverted</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsInv</span>
<span class="s">&quot;fluxes.varscl&quot;</span>        <span class="err">!</span> <span class="err">existing</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="err">false</span>                  <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">file?</span>
<span class="s">&quot;inverted.varscl&quot;</span>      <span class="err">!</span> <span class="err">new</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsMult - Multiply a TORT *.varscl file by a constant factor.</strong></p>
<p>Intended use: source strength change, change in units, etc.</p>
<p>Input: A TORT *.varscl file and a constant factor</p>
<p>Output: A TORT *.varscl file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsMult</span>
<span class="s">&quot;fluxes.varscl&quot;</span>        <span class="err">!</span> <span class="err">existing</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="err">false</span>                  <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">file?</span>
<span class="m">10000</span><span class="err">.</span><span class="m">0</span>                <span class="err">!</span> <span class="err">change</span> <span class="err">units</span> <span class="err">from</span> <span class="err">(/cm^</span><span class="m">2</span><span class="err">/s)</span> <span class="err">to</span> <span class="err">(/m^</span><span class="m">2</span><span class="err">/s)</span>
<span class="s">&quot;multiplied.varscl&quot;</span>    <span class="err">!</span> <span class="err">new</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsPull - Pull fluxes from certain voxels out of a TORT *.varscl
file.</strong></p>
<p>Intended use: Get energy-dependent fluxes for certain locations from a
flux file.</p>
<p>Input: A TORT *.varscl file and a list of positions and/or voxels</p>
<p>Output: Listing of energy-dependent fluxes from each desired location to
an ASCII text file</p>
<p>Notes: Can pull fluxes either by a physical coordinate position or by
voxel indices.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsPull</span>
<span class="s">&quot;fluxes.varscl&quot;</span>    <span class="err">!</span> <span class="err">file</span> <span class="err">with</span> <span class="err">the</span> <span class="err">scalar</span> <span class="err">fluxes</span> <span class="err">you</span> <span class="err">want</span>
<span class="err">false</span>              <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">file?</span>
<span class="err">n</span>                  <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">x,y,z</span> <span class="err">points</span> <span class="err">to</span> <span class="err">pull</span>
<span class="err">x_</span><span class="m">1</span> <span class="err">y_</span><span class="m">1</span> <span class="err">z_</span><span class="m">1</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="m">1</span>
<span class="err">x_</span><span class="m">1</span> <span class="err">y_</span><span class="m">2</span> <span class="err">z_</span><span class="m">2</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="m">2</span>
<span class="err">...</span>
<span class="err">x_n</span> <span class="err">y_n</span> <span class="err">z_n</span>        <span class="err">!</span> <span class="err">coordinates</span> <span class="err">of</span> <span class="err">point</span> <span class="err">n</span>
<span class="err">m</span>                  <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">i,j,k</span> <span class="err">voxels</span> <span class="err">to</span> <span class="err">pull</span>
<span class="err">i_</span><span class="m">1</span> <span class="err">j_</span><span class="m">1</span> <span class="err">k_</span><span class="m">1</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="m">1</span>
<span class="err">i_</span><span class="m">2</span> <span class="err">j_</span><span class="m">2</span> <span class="err">k_</span><span class="m">2</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="m">2</span>
<span class="err">...</span>
<span class="err">i_m</span> <span class="err">j_m</span> <span class="err">k_m</span>        <span class="err">!</span> <span class="err">indices</span> <span class="err">of</span> <span class="err">voxel</span> <span class="err">m</span>
<span class="s">&quot;outputName.txt&quot;</span>   <span class="err">!</span> <span class="err">name</span> <span class="err">of</span> <span class="err">output</span> <span class="err">text</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsReGrp - Regroup a TORT *.varscl file.</strong></p>
<p>Input: A TORT *.varscl file and adjoint flag, then a list of how the
new groups should be formed from the old groups</p>
<p>Output: A smaller TORT *.varscl file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsReGrp</span>
<span class="s">&quot;coupled.varscl&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="err">false</span>                  <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">file?</span>
<span class="m">27</span>                     <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">neutron</span> <span class="err">groups</span> <span class="err">in</span> <span class="err">file</span>
<span class="m">1</span>                      <span class="err">!</span> <span class="err">new</span> <span class="err">group</span> <span class="err">assignment</span> <span class="err">for</span> <span class="err">each</span>
<span class="m">1</span>                      <span class="err">!</span>     <span class="err">existing</span> <span class="err">neutron</span> <span class="err">group</span>
<span class="m">1</span>                      <span class="err">!</span>   <span class="err">must</span> <span class="err">start</span> <span class="err">with</span> <span class="err">one</span>
<span class="m">2</span>                      <span class="err">!</span>   <span class="err">each</span> <span class="err">entry</span> <span class="err">is</span> <span class="err">same</span> <span class="err">as</span> <span class="err">last</span> <span class="err">or</span>
<span class="err">...</span>                   <span class="err">!</span>     <span class="err">increases</span> <span class="err">by</span> <span class="m">1</span>
<span class="m">8</span>                      <span class="err">!</span> <span class="err">new</span> <span class="err">group</span> <span class="err">assignment</span> <span class="err">for</span> <span class="err">neutron</span> <span class="err">group</span> <span class="m">27</span>
<span class="m">19</span>                     <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">photon</span> <span class="err">groups</span> <span class="err">in</span> <span class="err">file</span>
<span class="m">1</span>                      <span class="err">!</span> <span class="err">new</span> <span class="err">group</span> <span class="err">assignment</span> <span class="err">for</span> <span class="err">each</span>
<span class="m">1</span>                      <span class="err">!</span>     <span class="err">existing</span> <span class="err">photon</span> <span class="err">group</span>
<span class="m">1</span>                      <span class="err">!</span>   <span class="err">must</span> <span class="err">start</span> <span class="err">with</span> <span class="err">one</span>
<span class="m">2</span>                      <span class="err">!</span>   <span class="err">each</span> <span class="err">entry</span> <span class="err">is</span> <span class="err">same</span> <span class="err">as</span> <span class="err">last</span> <span class="err">or</span>
<span class="err">...</span>                   <span class="err">!</span>     <span class="err">increases</span> <span class="err">by</span> <span class="m">1</span>
<span class="m">4</span>                      <span class="err">!</span> <span class="err">new</span> <span class="err">group</span> <span class="err">assignment</span> <span class="err">for</span> <span class="err">photon</span> <span class="err">group</span> <span class="m">19</span>
<span class="s">&quot;smaller.varscl&quot;</span>       <span class="err">!</span> <span class="err">new</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span> <span class="err">name</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsResp - Apply a response function to scalar fluxes in a TORT
*.varscl file.</strong></p>
<p>Intended use: Compute group-wise dose or reaction rates by combining a
response function with the scalar fluxes.</p>
<p>Input: A TORT *.varscl file and a group-wise response function</p>
<p>Output: A TORT *.varscl file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsResp</span>
<span class="s">&quot;fluxes.varscl&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">coupled</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="err">false</span>                 <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">file?</span>
<span class="m">200</span>                   <span class="err">!</span> <span class="err">number</span> <span class="err">of</span> <span class="err">bins</span> <span class="err">in</span> <span class="err">response</span>
<span class="m">2</span><span class="err">.</span><span class="m">2675480</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">1</span>
<span class="m">2</span><span class="err">.</span><span class="m">2283355</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">2</span>
<span class="m">2</span><span class="err">.</span><span class="m">1878259</span><span class="err">E-</span><span class="m">04</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">3</span>
<span class="err">...</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748440</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">198</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748443</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">199</span>
<span class="m">3</span><span class="err">.</span><span class="m">6748436</span><span class="err">E-</span><span class="m">06</span>         <span class="err">!</span> <span class="err">response</span> <span class="err">group</span> <span class="m">200</span>
<span class="s">&quot;doses.varscl&quot;</span>        <span class="err">!</span> <span class="err">new</span> <span class="err">(smaller)</span> <span class="err">Denovo</span> <span class="err">flux</span> <span class="err">fle</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>vsSplit - Split off part of a TORT *.varscl file into a separate
*.varscl file.</strong></p>
<p>Intended use: Make a flux file containing a single particle type from
another TORT *.varscl file.</p>
<p>Input: A TORT *.varscl file and a particle type</p>
<p>Output: A (smaller) TORT *.varscl file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=vsSplit</span>
<span class="s">&quot;coupled.varscl&quot;</span>     <span class="err">!</span> <span class="err">existing</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="err">false</span>                <span class="err">!</span> <span class="err">is</span> <span class="err">this</span> <span class="err">an</span> <span class="err">adjoint</span> <span class="err">file?</span>
<span class="m">2</span>                    <span class="err">!</span> <span class="err">particle</span> <span class="err">type</span> <span class="err">(</span><span class="m">1</span><span class="err">-neutron,</span> <span class="m">2</span><span class="err">-photon)</span>
<span class="s">&quot;photons.varscl&quot;</span>     <span class="err">!</span> <span class="err">new</span> <span class="err">(smaller)</span> <span class="err">TORT</span> <span class="err">*.varscl</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
</div>
<div class="section" id="miscellaneous-utilities">
<h2>Miscellaneous utilities<a class="headerlink" href="#miscellaneous-utilities" title="Permalink to this headline">¶</a></h2>
<p>These utilities include the following:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>dsi2asc</p></th>
<th class="head"><p>Convert a Denovo simple input (*.dsi) from binary to ASCII.</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dsiDisp</p></td>
<td><p>Display the basics of a Denovo simple input file.</p></td>
</tr>
<tr class="row-odd"><td><p>dso2msl</p></td>
<td><p>Use a Denovo spatial output to create a mesh source lite.</p></td>
</tr>
<tr class="row-even"><td><p>dsoDisp</p></td>
<td><p>Display the basics of a Denovo spatial output file.</p></td>
</tr>
<tr class="row-odd"><td><p>mim2wwinp</p></td>
<td><p>Convert a mesh importance map into an MCNP weight window file.</p></td>
</tr>
<tr class="row-even"><td><p>mimDisp</p></td>
<td><p>Display the basics of a mesh importance map (*.mim) file.</p></td>
</tr>
<tr class="row-odd"><td><p>mimNorm</p></td>
<td><p>Normalize a mesh importance map to a given location/energy.</p></td>
</tr>
<tr class="row-even"><td><p>msmDisp</p></td>
<td><p>Display the basics of a mesh source map (*.msm) file.</p></td>
</tr>
</tbody>
</table>
<p><strong>dsi2asc - Convert a Denovo simple input (*.dsi) from binary to ASCII</strong>.</p>
<p>Intended use: Check a Denovo input file for correctness.</p>
<p>Input: Names of original binary Denovo simple input (*.dsi) file and the desired ASCII text file</p>
<p>Output: Human-readable form of the Denovo input file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dsi2asc</span>
<span class="s">&quot;input.dsi&quot;</span>    <span class="err">!</span> <span class="err">Denovo</span> <span class="err">simple</span> <span class="err">input</span> <span class="err">file</span> <span class="err">(binary)</span>
<span class="s">&quot;ascii.txt&quot;</span>    <span class="err">!</span> <span class="err">new</span> <span class="err">ascii</span> <span class="err">text</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dsiDisp - Display the basics of a Denovo simple input file.</strong></p>
<p>Input:  A Denovo simple input (*.dsi) file</p>
<p>Output:  Some of the basic details of the Denovo simple input file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dsiDisp</span>
<span class="s">&quot;godiva.dsi&quot;</span>          <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">simple</span> <span class="err">input</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dso2msl - Use a Denovo spatial output to create a mesh source lite.</strong></p>
<p>Input: A *.dso file is made of three-dimensional data sets called fields. Which field to convert? 1-n: convert that field    0: convert sum of all fields</p>
<p>Output: A mesh source lite (*.msl) file for KENO-VI.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dso2msl</span>
<span class="s">&quot;fisSource.dso&quot;</span>  <span class="err">!</span> <span class="err">Denovo</span> <span class="err">spatial</span> <span class="err">output</span> <span class="err">file</span> <span class="err">with</span> <span class="err">many</span> <span class="err">fields</span>
<span class="m">1</span>                <span class="err">!</span> <span class="err">which</span> <span class="err">field</span> <span class="err">to</span> <span class="err">use</span>
<span class="s">&quot;test.msl&quot;</span>       <span class="err">!</span> <span class="err">new</span> <span class="err">Monaco</span> <span class="err">mesh</span> <span class="err">source</span> <span class="err">lite</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>dsoDisp - Display the basics of a Denovo spatial output file.</strong></p>
<p>Input: A Denovo spatial output (*.dsi) file</p>
<p>Output: Some of the basic details of the Denovo spatial output file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=dsoDisp</span>
<span class="s">&quot;godiva.dso&quot;</span>          <span class="err">!</span> <span class="err">existing</span> <span class="err">Denovo</span> <span class="err">spatial</span> <span class="err">output</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mim2wwinp - Convert a mesh importance map into an MCNP weight window
file.</strong></p>
<p>Intended Use: To create an MCNP weight window file from a Monaco mesh
importance map file outside of a MAVRIC calculation. Monaco mesh
importance map files store target weights, but MCNP wwinp files store
lower weight bounds. To convert, the user needs to supply the
windowRatio, <em>r</em> (the ratio of the upper weight bound for splitting to
the lower weight bound for roulette). Target weights, <em>t</em>, are the
average of the upper, <em>u</em>, and lower, <em>l</em>, weight window bounds, so
<em>l</em>=2<em>t</em>/(<em>r</em>+1). For example, for a Monaco target weight of 1.0
and a windowRatio of 10.0, the MCNP lower weight bound will be
<em>l</em>=2(1.0)/(10.0+1)=0.1818. To reduce the size of the map, the user
can specify which neutron and photon groups to store in the new file. If
the last group is less than the first group, no groups of that particle
will be stored.</p>
<p>Input:</p>
<p>Line 1: filename of the Monaco mesh importance map file</p>
<p>Line 2: windowRatio (&gt;1.0)</p>
<p>Line 3: first_neutron_group last_neutron_group</p>
<p>Line 4: first_photon_group last_photon_group</p>
<p>Line 5: filename of the MCNP weight window input file</p>
<p>Output: The resulting weight window input file stored with the desired
filename</p>
<p>Notes: Geometry information in the Monaco mesh importance map file is
lost since the MCNP wwinp format does not support it.</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span>  <span class="err">=mim</span><span class="m">2</span><span class="err">wwinp</span>
<span class="s">&quot;/scale/smplprbs/mavric.graphiteCADIS.mim&quot;</span>  <span class="err">!</span> <span class="err">importance</span> <span class="err">map</span>
<span class="m">19</span><span class="err">.</span><span class="m">0</span>                                        <span class="err">!</span> <span class="err">window</span> <span class="err">ratio</span>
<span class="m">5</span> <span class="m">22</span>                                        <span class="err">!</span> <span class="err">save</span> <span class="err">n</span> <span class="err">groups</span> <span class="m">5</span><span class="err">-</span><span class="m">22</span>
<span class="m">19</span> <span class="m">1</span>                                        <span class="err">!</span> <span class="err">save</span> <span class="err">no</span> <span class="err">p</span> <span class="err">groups</span>
<span class="s">&quot;/scale/test9/testmimww.wwinp&quot;</span>              <span class="err">!</span> <span class="err">new</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mimDisp - Display the basics of a mesh importance map file.</strong></p>
<p>Input: A mesh importance map (*.mim) file</p>
<p>Output: Some of the basic details of mesh importance map file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mimDisp</span>
<span class="s">&quot;the.mim&quot;</span>    <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">importance</span> <span class="err">map</span> <span class="err">file</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>mimNorm - Normalize a mesh importance map to a given
location/energy.</strong></p>
<p>Input: A mesh importance map (*.mim) file, a location (x, y, z), a
particle type and energy, and a filename for the normalized map file.
Use 1 for neutron and 2 for photon. Energy should be in eV. The new
importance map file will be normalized such that the given
location/energy has a target weight of 1. If a particle type or energy
is 0, then the energy group with the minimum non-zero target value at
the given location will be the group that is set to 1.0 in the new file.
(This option is similar to the MCNP weight window generator.)</p>
<p>Output: A mesh importance map file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=mimNorm</span>
<span class="s">&quot;the.mim&quot;</span>       <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">importance</span> <span class="err">map</span> <span class="err">file</span>
<span class="m">27</span><span class="err">.</span><span class="m">5</span> <span class="err">-</span><span class="m">16</span><span class="err">.</span><span class="m">5</span> <span class="m">32</span><span class="err">.</span><span class="m">0</span> <span class="err">!</span> <span class="err">location</span>
<span class="m">1</span> <span class="m">1</span><span class="err">.</span><span class="m">0</span><span class="err">e</span><span class="m">6</span>         <span class="err">!</span> <span class="err">neutron,</span> <span class="m">1</span> <span class="err">MeV</span>
<span class="s">&quot;normed.mim&quot;</span>    <span class="err">!</span> <span class="err">new</span> <span class="err">file</span> <span class="err">that</span> <span class="err">is</span> <span class="err">normalized</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>msmDisp - Display the basics of a mesh source map file.</strong></p>
<p>Input: A mesh source map (*.msm) file</p>
<p>Output: Some of the basic details of mesh source map file</p>
<p>Example:</p>
<div class="highlight-scale notranslate"><div class="highlight"><pre><span></span><span class="nf">=msmDisp</span>
<span class="s">&quot;the.msm&quot;</span>    <span class="err">!</span> <span class="err">existing</span> <span class="err">mesh</span> <span class="err">source</span> <span class="err">map</span> <span class="err">file</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="appendixc.html" class="btn btn-neutral float-right" title="MAVRIC Appendix C: Advanced Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="CAAScapability.html" class="btn btn-neutral float-left" title="MAVRIC Appendix A: CAAS Capability" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, SCALE developers

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>